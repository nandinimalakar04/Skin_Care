(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".react-international-phone-country-selector{position:relative}.react-international-phone-country-selector-button{display:flex;height:var(--react-international-phone-height, 36px);box-sizing:border-box;align-items:center;justify-content:center;padding:0;border:1px solid var(--react-international-phone-country-selector-border-color, var(--react-international-phone-border-color, gainsboro));margin:0;-moz-appearance:button;appearance:button;-webkit-appearance:button;background-color:var(--react-international-phone-country-selector-background-color, var(--react-international-phone-background-color, white));cursor:pointer;text-transform:none;-webkit-user-select:none;user-select:none}.react-international-phone-country-selector-button:hover{background-color:var(--react-international-phone-country-selector-background-color-hover, whitesmoke)}.react-international-phone-country-selector-button--hide-dropdown{cursor:auto}.react-international-phone-country-selector-button--hide-dropdown:hover{background-color:transparent}.react-international-phone-country-selector-button__button-content{display:flex;align-items:center;justify-content:center}.react-international-phone-country-selector-button__flag-emoji{margin:0 4px}.react-international-phone-country-selector-button__flag-emoji--disabled{opacity:.75}.react-international-phone-country-selector-button__dropdown-arrow{border-top:var(--react-international-phone-country-selector-arrow-size, 4px) solid var(--react-international-phone-country-selector-arrow-color, #777);border-right:var(--react-international-phone-country-selector-arrow-size, 4px) solid transparent;border-left:var(--react-international-phone-country-selector-arrow-size, 4px) solid transparent;margin-right:4px;transition:all .1s ease-out}.react-international-phone-country-selector-button__dropdown-arrow--active{transform:rotateX(180deg)}.react-international-phone-country-selector-button__dropdown-arrow--disabled{border-top-color:var(--react-international-phone-disabled-country-selector-arrow-color, #999)}.react-international-phone-country-selector-button--disabled{background-color:var(--react-international-phone-disabled-country-selector-background-color, var(--react-international-phone-disabled-background-color, whitesmoke));cursor:auto}.react-international-phone-country-selector-button--disabled:hover{background-color:var(--react-international-phone-disabled-country-selector-background-color, var(--react-international-phone-disabled-background-color, whitesmoke))}.react-international-phone-flag-emoji{width:var(--react-international-phone-flag-width, 24px);height:var(--react-international-phone-flag-height, 24px);box-sizing:border-box}.react-international-phone-country-selector-dropdown{position:absolute;z-index:1;top:var(--react-international-phone-dropdown-top, 44px);left:var(--react-international-phone-dropdown-left, 0);display:flex;width:300px;max-height:200px;flex-direction:column;padding:4px 0;margin:0;background-color:var(--react-international-phone-dropdown-item-background-color, var(--react-international-phone-background-color, white));box-shadow:var(--react-international-phone-dropdown-shadow, 2px 2px 16px rgba(0, 0, 0, .25));color:var(--react-international-phone-dropdown-item-text-color, var(--react-international-phone-text-color, #222));list-style:none;overflow-y:scroll}.react-international-phone-country-selector-dropdown__preferred-list-divider{height:1px;border:none;margin:var(--react-international-phone-dropdown-preferred-list-divider-margin, 0);background:var(--react-international-phone-dropdown-preferred-list-divider-color, var(--react-international-phone-border-color, gainsboro))}.react-international-phone-country-selector-dropdown__list-item{display:flex;min-height:var(--react-international-phone-dropdown-item-height, 28px);box-sizing:border-box;align-items:center;padding:2px 8px}.react-international-phone-country-selector-dropdown__list-item-flag-emoji{margin-right:8px}.react-international-phone-country-selector-dropdown__list-item-country-name{overflow:hidden;margin-right:8px;font-size:var(--react-international-phone-dropdown-item-font-size, 14px);text-overflow:ellipsis;white-space:nowrap}.react-international-phone-country-selector-dropdown__list-item-dial-code{color:var(--react-international-phone-dropdown-item-dial-code-color, gray);font-size:var(--react-international-phone-dropdown-item-font-size, 14px)}.react-international-phone-country-selector-dropdown__list-item:hover{background-color:var(--react-international-phone-selected-dropdown-item-background-color, var(--react-international-phone-selected-dropdown-item-background-color, whitesmoke));cursor:pointer}.react-international-phone-country-selector-dropdown__list-item--selected,.react-international-phone-country-selector-dropdown__list-item--focused{background-color:var(--react-international-phone-selected-dropdown-item-background-color, whitesmoke);color:var(--react-international-phone-selected-dropdown-item-text-color, var(--react-international-phone-text-color, #222))}.react-international-phone-country-selector-dropdown__list-item--selected .react-international-phone-country-selector-dropdown__list-item-dial-code,.react-international-phone-country-selector-dropdown__list-item--focused .react-international-phone-country-selector-dropdown__list-item-dial-code{color:var(--react-international-phone-selected-dropdown-item-dial-code-color, var(--react-international-phone-dropdown-item-dial-code-color, gray))}.react-international-phone-country-selector-dropdown__list-item--focused{background-color:var(--react-international-phone-selected-dropdown-item-background-color, var(--react-international-phone-selected-dropdown-item-background-color, whitesmoke))}.react-international-phone-dial-code-preview{display:flex;align-items:center;justify-content:center;padding:0 8px;border:1px solid var(--react-international-phone-dial-code-preview-border-color, var(--react-international-phone-border-color, gainsboro));margin-right:-1px;background-color:var(--react-international-phone-dial-code-preview-background-color, var(--react-international-phone-background-color, white));color:var(--react-international-phone-dial-code-preview-text-color, var(--react-international-phone-text-color, #222));font-size:var(--react-international-phone-dial-code-preview-font-size, var(--react-international-phone-font-size, 13px))}.react-international-phone-dial-code-preview--disabled{background-color:var(--react-international-phone-dial-code-preview-disabled-background-color, var(--react-international-phone-disabled-background-color, whitesmoke));color:var(--react-international-phone-dial-code-preview-disabled-text-color, var(--react-international-phone-disabled-text-color, #666))}.react-international-phone-input-container{display:flex}.react-international-phone-input-container .react-international-phone-country-selector-button{border-radius:var(--react-international-phone-border-radius, 4px);margin-right:-1px;border-bottom-right-radius:0;border-top-right-radius:0}.react-international-phone-input-container .react-international-phone-input{overflow:visible;height:var(--react-international-phone-height, 36px);box-sizing:border-box;padding:0 8px;border:1px solid var(--react-international-phone-border-color, gainsboro);border-radius:var(--react-international-phone-border-radius, 4px);margin:0;background-color:var(--react-international-phone-background-color, white);border-bottom-left-radius:0;border-top-left-radius:0;color:var(--react-international-phone-text-color, #222);font-family:inherit;font-size:var(--react-international-phone-font-size, 13px)}.react-international-phone-input-container .react-international-phone-input:focus{outline:none}.react-international-phone-input-container .react-international-phone-input--disabled{background-color:var(--react-international-phone-disabled-background-color, whitesmoke);color:var(--react-international-phone-disabled-text-color, #666)}.al-shadow-host{--al-body-font-size: 16px;--al-button-color: #fff;--al-border-radius: 5px;--al-light-neutral: #f3f6f8;--al-grey: #e5e7eb;--al-color-warning: #ffc107;--al-color-danger: #dc3545;--al-color-success: #28a745;--al-text-default: #333;--al-text-light: #fff;--al-text-dark: #000;--al-text-muted: #6c757d;--al-heading-font-size: 18px}.unavailable{font-family:SF Pro JP,SF Pro Text,SF Pro Icons,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,メイリオ,Meiryo,ＭＳ Ｐゴシック,Helvetica Neue,Helvetica,Arial,sans-serif;background:#fff;padding:18px;box-shadow:10px 10px 20px #0000001a;border-radius:10px;border:3px solid #01a3a4;margin:0 12px}.asklayer-body-overflow-hidden{overflow:hidden}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var ms=Object.defineProperty;var ys=(t,e,r)=>e in t?ms(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var I=(t,e,r)=>(ys(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var G=(t=>(t.ASKKLAYER_SESSION="asklayer_session",t.ASKLAYER_SEARCH="asklayer_search",t.ASKLAYER_REFERRER="asklayer_referrer",t.ASKLAYER_LANDING_PAGE="asklayer_landing_page",t.ASKLAYER_ACCESS_HISTORY="asklayer_access_history",t.ASKLAYER_BROWSING_HISTORY="asklayer_browsing_history",t.ASKLAYER_NUMBER_OF_PAGEVIEWS_IN_SESSION="asklayer_number_of_pageviews_in_session",t.ASKLAYER_SURVEY_SHOWN="asklayer_survey_shown",t.ASKLAYER_SURVEY_COMPLETED="asklayer_survey_completed",t.ASKLAYER_NANOID="asklayer_nanoid",t.ASKLAYER_SUBMISSION_ID="asklayer_submission_",t.ASKLAYER_PAGE_HISTORY="asklayer_page_history_",t.ASKLAYER_COMPLETED_SURVEY_BY_ORDER="asklayer_completed_survey_order_",t))(G||{});class vs{constructor(){I(this,"type","localStorage");typeof localStorage>"u"&&(this.type="cookie")}set(e,r,n=!1){typeof r=="object"&&(r=JSON.stringify(r)),this.type==="localStorage"&&(localStorage.setItem(e,r),n&&localStorage.setItem(`${e}_expires`,this.toUnixTimestamp(n).toString()))}setSession(e,r){typeof r=="object"&&(r=JSON.stringify(r)),sessionStorage.setItem(e,r)}get(e){if(this.type==="localStorage"){const r=localStorage.getItem(e);return r===null||this.isExpired(e)?null:this.tryJsonParse(r)}}getSession(e){const r=sessionStorage.getItem(e);return this.tryJsonParse(r)}hasKeyStartsWith(e){return Object.keys(localStorage).some(r=>r.startsWith(e))}isExpired(e){const r=localStorage.getItem(`${e}_expires`);return r?parseInt(r)<Date.now():!1}remove(e){this.type==="localStorage"&&(localStorage.removeItem(e),localStorage.removeItem(`${e}_expires`))}tryJsonParse(e){try{return JSON.parse(e)}catch{return e}}toUnixTimestamp(e){return Date.now()+Math.floor(e*24*60*60*1e3)}}const z=new vs;var Nt,V,ti,ri,Qe,en,ni,ii,si,Ar,vr,_r,oi,Tt={},ai=[],_s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,It=Array.isArray;function Ue(t,e){for(var r in e)t[r]=e[r];return t}function Nr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function De(t,e,r){var n,i,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Nt.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return xt(t,o,n,i,null)}function xt(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ti,__i:-1,__u:0};return i==null&&V.vnode!=null&&V.vnode(s),s}function bs(){return{current:null}}function ce(t){return t.children}function Ie(t,e){this.props=t,this.context=e}function dt(t,e){if(e==null)return t.__?dt(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?dt(t):null}function li(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return li(t)}}function br(t){(!t.__d&&(t.__d=!0)&&Qe.push(t)&&!Wt.__r++||en!=V.debounceRendering)&&((en=V.debounceRendering)||ni)(Wt)}function Wt(){for(var t,e,r,n,i,s,o,a=1;Qe.length;)Qe.length>a&&Qe.sort(ii),t=Qe.shift(),a=Qe.length,t.__d&&(r=void 0,i=(n=(e=t).__v).__e,s=[],o=[],e.__P&&((r=Ue({},n)).__v=n.__v+1,V.vnode&&V.vnode(r),Ir(e.__P,r,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,s,i??dt(n),!!(32&n.__u),o),r.__v=n.__v,r.__.__k[r.__i]=r,di(s,r,o),r.__e!=i&&li(r)));Wt.__r=0}function ci(t,e,r,n,i,s,o,a,c,d,h){var u,f,g,v,w,x,T=n&&n.__k||ai,_=e.length;for(c=ws(r,e,T,c,_),u=0;u<_;u++)(g=r.__k[u])!=null&&(f=g.__i==-1?Tt:T[g.__i]||Tt,g.__i=u,x=Ir(t,g,f,i,s,o,a,c,d,h),v=g.__e,g.ref&&f.ref!=g.ref&&(f.ref&&Dr(f.ref,null,g),h.push(g.ref,g.__c||v,g)),w==null&&v!=null&&(w=v),4&g.__u||f.__k===g.__k?c=ui(g,c,t):typeof g.type=="function"&&x!==void 0?c=x:v&&(c=v.nextSibling),g.__u&=-7);return r.__e=w,c}function ws(t,e,r,n,i){var s,o,a,c,d,h=r.length,u=h,f=0;for(t.__k=new Array(i),s=0;s<i;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(c=s+f,(o=t.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?xt(null,o,null,null,null):It(o)?xt(ce,{children:o},null,null,null):o.constructor==null&&o.__b>0?xt(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,a=null,(d=o.__i=Ss(o,r,c,u))!=-1&&(u--,(a=r[d])&&(a.__u|=2)),a==null||a.__v==null?(d==-1&&(i>h?f--:i<h&&f++),typeof o.type!="function"&&(o.__u|=4)):d!=c&&(d==c-1?f--:d==c+1?f++:(d>c?f--:f++,o.__u|=4))):t.__k[s]=null;if(u)for(s=0;s<h;s++)(a=r[s])!=null&&!(2&a.__u)&&(a.__e==n&&(n=dt(a)),fi(a,a));return n}function ui(t,e,r){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,e=ui(n[i],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=dt(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ge(t,e){return e=e||[],t==null||typeof t=="boolean"||(It(t)?t.some(function(r){Ge(r,e)}):e.push(t)),e}function Ss(t,e,r,n){var i,s,o=t.key,a=t.type,c=e[r];if(c===null&&t.key==null||c&&o==c.key&&a==c.type&&!(2&c.__u))return r;if(n>(c!=null&&!(2&c.__u)?1:0))for(i=r-1,s=r+1;i>=0||s<e.length;){if(i>=0){if((c=e[i])&&!(2&c.__u)&&o==c.key&&a==c.type)return i;i--}if(s<e.length){if((c=e[s])&&!(2&c.__u)&&o==c.key&&a==c.type)return s;s++}}return-1}function tn(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||_s.test(e)?r:r+"px"}function Rt(t,e,r,n,i){var s,o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||tn(t.style,e,"");if(r)for(e in r)n&&r[e]==n[e]||tn(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(si,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n?r.u=n.u:(r.u=Ar,t.addEventListener(e,s?_r:vr,s)):t.removeEventListener(e,s?_r:vr,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function rn(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=Ar++;else if(e.t<r.u)return;return r(V.event?V.event(e):e)}}}function Ir(t,e,r,n,i,s,o,a,c,d){var h,u,f,g,v,w,x,T,_,P,C,S,b,$,O,M,K,W=e.type;if(e.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),s=[a=e.__e=r.__e]),(h=V.__b)&&h(e);e:if(typeof W=="function")try{if(T=e.props,_="prototype"in W&&W.prototype.render,P=(h=W.contextType)&&n[h.__c],C=h?P?P.props.value:h.__:n,r.__c?x=(u=e.__c=r.__c).__=u.__E:(_?e.__c=u=new W(T,C):(e.__c=u=new Ie(T,C),u.constructor=W,u.render=Es),P&&P.sub(u),u.props=T,u.state||(u.state={}),u.context=C,u.__n=n,f=u.__d=!0,u.__h=[],u._sb=[]),_&&u.__s==null&&(u.__s=u.state),_&&W.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ue({},u.__s)),Ue(u.__s,W.getDerivedStateFromProps(T,u.__s))),g=u.props,v=u.state,u.__v=e,f)_&&W.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),_&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(_&&W.getDerivedStateFromProps==null&&T!==g&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(T,C),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(T,u.__s,C)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(u.props=T,u.state=u.__s,u.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(R){R&&(R.__=e)}),S=0;S<u._sb.length;S++)u.__h.push(u._sb[S]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(T,u.__s,C),_&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(g,v,w)})}if(u.context=C,u.props=T,u.__P=t,u.__e=!1,b=V.__r,$=0,_){for(u.state=u.__s,u.__d=!1,b&&b(e),h=u.render(u.props,u.state,u.context),O=0;O<u._sb.length;O++)u.__h.push(u._sb[O]);u._sb=[]}else do u.__d=!1,b&&b(e),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++$<25);u.state=u.__s,u.getChildContext!=null&&(n=Ue(Ue({},n),u.getChildContext())),_&&!f&&u.getSnapshotBeforeUpdate!=null&&(w=u.getSnapshotBeforeUpdate(g,v)),M=h,h!=null&&h.type===ce&&h.key==null&&(M=hi(h.props.children)),a=ci(t,It(M)?M:[M],e,r,n,i,s,o,a,c,d),u.base=e.__e,e.__u&=-161,u.__h.length&&o.push(u),x&&(u.__E=u.__=null)}catch(R){if(e.__v=null,c||s!=null)if(R.then){for(e.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(K=s.length;K--;)Nr(s[K]);else e.__e=r.__e,e.__k=r.__k;V.__e(R,e,r)}else s==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=xs(r.__e,e,r,n,i,s,o,c,d);return(h=V.diffed)&&h(e),128&e.__u?void 0:a}function di(t,e,r){for(var n=0;n<r.length;n++)Dr(r[n],r[++n],r[++n]);V.__c&&V.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){V.__e(s,i.__v)}})}function hi(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:It(t)?t.map(hi):Ue({},t)}function xs(t,e,r,n,i,s,o,a,c){var d,h,u,f,g,v,w,x=r.props,T=e.props,_=e.type;if(_=="svg"?i="http://www.w3.org/2000/svg":_=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(d=0;d<s.length;d++)if((g=s[d])&&"setAttribute"in g==!!_&&(_?g.localName==_:g.nodeType==3)){t=g,s[d]=null;break}}if(t==null){if(_==null)return document.createTextNode(T);t=document.createElementNS(i,_,T.is&&T),a&&(V.__m&&V.__m(e,s),a=!1),s=null}if(_==null)x===T||a&&t.data==T||(t.data=T);else{if(s=s&&Nt.call(t.childNodes),x=r.props||Tt,!a&&s!=null)for(x={},d=0;d<t.attributes.length;d++)x[(g=t.attributes[d]).name]=g.value;for(d in x)if(g=x[d],d!="children"){if(d=="dangerouslySetInnerHTML")u=g;else if(!(d in T)){if(d=="value"&&"defaultValue"in T||d=="checked"&&"defaultChecked"in T)continue;Rt(t,d,null,g,i)}}for(d in T)g=T[d],d=="children"?f=g:d=="dangerouslySetInnerHTML"?h=g:d=="value"?v=g:d=="checked"?w=g:a&&typeof g!="function"||x[d]===g||Rt(t,d,g,x[d],i);if(h)a||u&&(h.__html==u.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(u&&(t.innerHTML=""),ci(e.type=="template"?t.content:t,It(f)?f:[f],e,r,n,_=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:r.__k&&dt(r,0),a,c),s!=null)for(d=s.length;d--;)Nr(s[d]);a||(d="value",_=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[d]||_=="progress"&&!v||_=="option"&&v!=x[d])&&Rt(t,d,v,x[d],i),d="checked",w!=null&&w!=t[d]&&Rt(t,d,w,x[d],i))}return t}function Dr(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(i){V.__e(i,r)}}function fi(t,e,r){var n,i;if(V.unmount&&V.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||Dr(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){V.__e(s,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&fi(n[i],e,r||typeof t.type!="function");r||Nr(t.__e),t.__c=t.__=t.__e=void 0}function Es(t,e,r){return this.constructor(t,r)}function ht(t,e,r){var n,i,s,o;e==document&&(e=document.documentElement),V.__&&V.__(t,e),i=(n=typeof r=="function")?null:r&&r.__k||e.__k,s=[],o=[],Ir(e,t=(!n&&r||e).__k=De(ce,null,[t]),i||Tt,Tt,e.namespaceURI,!n&&r?[r]:i?null:e.firstChild?Nt.call(e.childNodes):null,s,!n&&r?r:i?i.__e:e.firstChild,n,o),di(s,t,o)}function pi(t,e){ht(t,e,pi)}function gi(t,e,r){var n,i,s,o,a=Ue({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?i=e[s]:a[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?Nt.call(arguments,2):r),xt(t.type,a,n||t.key,i||t.ref,null)}function Pr(t){function e(r){var n,i;return this.getChildContext||(n=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&n.forEach(function(o){o.__e=!0,br(o)})},this.sub=function(s){n.add(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){n&&n.delete(s),o&&o.call(s)}}),r.children}return e.__c="__cC"+oi++,e.__=t,e.Provider=e.__l=(e.Consumer=function(r,n){return r.children(n)}).contextType=e,e}Nt=ai.slice,V={__e:function(t,e,r,n){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},ti=0,ri=function(t){return t!=null&&t.constructor==null},Ie.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ue({},this.state),typeof t=="function"&&(t=t(Ue({},r),this.props)),t&&Ue(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),br(this))},Ie.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),br(this))},Ie.prototype.render=ce,Qe=[],ni=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ii=function(t,e){return t.__v.__b-e.__v.__b},Wt.__r=0,si=/(PointerCapture)$|Capture$/i,Ar=0,vr=rn(!1),_r=rn(!0),oi=0;var Xe,re,ur,nn,ft=0,mi=[],ue=V,sn=ue.__b,on=ue.__r,an=ue.diffed,ln=ue.__c,cn=ue.unmount,un=ue.__;function gt(t,e){ue.__h&&ue.__h(re,t,ft||e),ft=0;var r=re.__H||(re.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function F(t){return ft=1,$r(_i,t)}function $r(t,e,r){var n=gt(Xe++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):_i(void 0,e),function(a){var c=n.__N?n.__N[0]:n.__[0],d=n.t(c,a);c!==d&&(n.__N=[d,n.__[1]],n.__c.setState({}))}],n.__c=re,!re.__f)){var i=function(a,c,d){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(f){return!!f.__c});if(h.every(function(f){return!f.__N}))return!s||s.call(this,a,c,d);var u=n.__c.props!==a;return h.forEach(function(f){if(f.__N){var g=f.__[0];f.__=f.__N,f.__N=void 0,g!==f.__[0]&&(u=!0)}}),s&&s.call(this,a,c,d)||u};re.__f=!0;var s=re.shouldComponentUpdate,o=re.componentWillUpdate;re.componentWillUpdate=function(a,c,d){if(this.__e){var h=s;s=void 0,i(a,c,d),s=h}o&&o.call(this,a,c,d)},re.shouldComponentUpdate=i}return n.__N||n.__}function ee(t,e){var r=gt(Xe++,3);!ue.__s&&Rr(r.__H,e)&&(r.__=t,r.u=e,re.__H.__h.push(r))}function rt(t,e){var r=gt(Xe++,4);!ue.__s&&Rr(r.__H,e)&&(r.__=t,r.u=e,re.__h.push(r))}function ve(t){return ft=5,Te(function(){return{current:t}},[])}function Lr(t,e,r){ft=6,rt(function(){if(typeof t=="function"){var n=t(e());return function(){t(null),n&&typeof n=="function"&&n()}}if(t)return t.current=e(),function(){return t.current=null}},r==null?r:r.concat(t))}function Te(t,e){var r=gt(Xe++,7);return Rr(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function ct(t,e){return ft=8,Te(function(){return t},e)}function er(t){var e=re.context[t.__c],r=gt(Xe++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(re)),e.props.value):t.__}function yi(t,e){ue.useDebugValue&&ue.useDebugValue(e?e(t):t)}function vi(){var t=gt(Xe++,11);if(!t.__){for(var e=re.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function Cs(){for(var t;t=mi.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ut),t.__H.__h.forEach(wr),t.__H.__h=[]}catch(e){t.__H.__h=[],ue.__e(e,t.__v)}}ue.__b=function(t){re=null,sn&&sn(t)},ue.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),un&&un(t,e)},ue.__r=function(t){on&&on(t),Xe=0;var e=(re=t.__c).__H;e&&(ur===re?(e.__h=[],re.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Ut),e.__h.forEach(wr),e.__h=[],Xe=0)),ur=re},ue.diffed=function(t){an&&an(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(mi.push(e)!==1&&nn===ue.requestAnimationFrame||((nn=ue.requestAnimationFrame)||ks)(Cs)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),ur=re=null},ue.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Ut),r.__h=r.__h.filter(function(n){return!n.__||wr(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ue.__e(n,r.__v)}}),ln&&ln(t,e)},ue.unmount=function(t){cn&&cn(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Ut(n)}catch(i){e=i}}),r.__H=void 0,e&&ue.__e(e,r.__v))};var dn=typeof requestAnimationFrame=="function";function ks(t){var e,r=function(){clearTimeout(n),dn&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);dn&&(e=requestAnimationFrame(r))}function Ut(t){var e=re,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),re=e}function wr(t){var e=re;t.__c=t.__(),re=e}function Rr(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function _i(t,e){return typeof e=="function"?e(t):e}var Ts=Symbol.for("preact-signals");function Mr(){if(ut>1)ut--;else{for(var t,e=!1;Et!==void 0;){var r=Et;for(Et=void 0,Sr++;r!==void 0;){var n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&Si(r))try{r.c()}catch(i){e||(t=i,e=!0)}r=n}}if(Sr=0,ut--,e)throw t}}var J=void 0;function bi(t){var e=J;J=void 0;try{return t()}finally{J=e}}var Et=void 0,ut=0,Sr=0,jt=0;function wi(t){if(J!==void 0){var e=t.n;if(e===void 0||e.t!==J)return e={i:0,S:t,p:J.s,n:void 0,t:J,e:void 0,x:void 0,r:e},J.s!==void 0&&(J.s.n=e),J.s=e,t.n=e,32&J.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=J.s,e.n=void 0,J.s.n=e,J.s=e),e}}function Se(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched}Se.prototype.brand=Ts;Se.prototype.h=function(){return!0};Se.prototype.S=function(t){var e=this,r=this.t;r!==t&&t.e===void 0&&(t.x=r,this.t=t,r!==void 0?r.e=t:bi(function(){var n;(n=e.W)==null||n.call(e)}))};Se.prototype.U=function(t){var e=this;if(this.t!==void 0){var r=t.e,n=t.x;r!==void 0&&(r.x=n,t.e=void 0),n!==void 0&&(n.e=r,t.x=void 0),t===this.t&&(this.t=n,n===void 0&&bi(function(){var i;(i=e.Z)==null||i.call(e)}))}};Se.prototype.subscribe=function(t){var e=this;return Vr(function(){var r=e.value,n=J;J=void 0;try{t(r)}finally{J=n}})};Se.prototype.valueOf=function(){return this.value};Se.prototype.toString=function(){return this.value+""};Se.prototype.toJSON=function(){return this.value};Se.prototype.peek=function(){var t=J;J=void 0;try{return this.value}finally{J=t}};Object.defineProperty(Se.prototype,"value",{get:function(){var t=wi(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Sr>100)throw new Error("Cycle detected");this.v=t,this.i++,jt++,ut++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Mr()}}}});function ze(t,e){return new Se(t,e)}function Si(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function xi(t){for(var e=t.s;e!==void 0;e=e.n){var r=e.S.n;if(r!==void 0&&(e.r=r),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Ei(t){for(var e=t.s,r=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):r=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}t.s=r}function nt(t,e){Se.call(this,void 0),this.x=t,this.s=void 0,this.g=jt-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched}nt.prototype=new Se;nt.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===jt))return!0;if(this.g=jt,this.f|=1,this.i>0&&!Si(this))return this.f&=-2,!0;var t=J;try{xi(this),J=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(r){this.v=r,this.f|=16,this.i++}return J=t,Ei(this),this.f&=-2,!0};nt.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}Se.prototype.S.call(this,t)};nt.prototype.U=function(t){if(this.t!==void 0&&(Se.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};nt.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(nt.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=wi(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function As(t,e){return new nt(t,e)}function Ci(t){var e=t.u;if(t.u=void 0,typeof e=="function"){ut++;var r=J;J=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,Or(t),n}finally{J=r,Mr()}}}function Or(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Ci(t)}function Ns(t){if(J!==this)throw new Error("Out-of-order effect");Ei(this),J=t,this.f&=-2,8&this.f&&Or(this),Mr()}function mt(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}mt.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};mt.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Ci(this),xi(this),ut++;var t=J;return J=this,Ns.bind(this,t)};mt.prototype.N=function(){2&this.f||(this.f|=2,this.o=Et,Et=this)};mt.prototype.d=function(){this.f|=8,1&this.f||Or(this)};mt.prototype.dispose=function(){this.d()};function Vr(t){var e=new mt(t);try{e.c()}catch(n){throw e.d(),n}var r=e.d.bind(e);return r[Symbol.dispose]=r,r}var dr;function yt(t,e){V[t]=e.bind(null,V[t]||function(){})}function Gt(t){dr&&dr(),dr=t&&t.S()}function ki(t){var e=this,r=t.data,n=Ds(r);n.value=r;var i=Te(function(){for(var s=e.__v;s=s.__;)if(s.__c){s.__c.__$f|=4;break}return e.__$u.c=function(){var o,a=e.__$u.S(),c=i.value;a(),ri(c)||((o=e.base)==null?void 0:o.nodeType)!==3?(e.__$f|=1,e.setState({})):e.base.data=c},As(function(){var o=n.value.value;return o===0?0:o===!0?"":o||""})},[]);return i.value}ki.displayName="_st";Object.defineProperties(Se.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:ki},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});yt("__b",function(t,e){if(typeof e.type=="string"){var r,n=e.props;for(var i in n)if(i!=="children"){var s=n[i];s instanceof Se&&(r||(e.__np=r={}),r[i]=s,n[i]=s.peek())}}t(e)});yt("__r",function(t,e){Gt();var r,n=e.__c;n&&(n.__$f&=-2,(r=n.__$u)===void 0&&(n.__$u=r=function(i){var s;return Vr(function(){s=this}),s.c=function(){n.__$f|=1,n.setState({})},s}())),Gt(r),t(e)});yt("__e",function(t,e,r,n){Gt(),t(e,r,n)});yt("diffed",function(t,e){Gt();var r;if(typeof e.type=="string"&&(r=e.__e)){var n=e.__np,i=e.props;if(n){var s=r.U;if(s)for(var o in s){var a=s[o];a!==void 0&&!(o in n)&&(a.d(),s[o]=void 0)}else r.U=s={};for(var c in n){var d=s[c],h=n[c];d===void 0?(d=Is(r,c,h,i),s[c]=d):d.o(h,i)}}}t(e)});function Is(t,e,r,n){var i=e in t&&t.ownerSVGElement===void 0,s=ze(r);return{o:function(o,a){s.value=o,n=a},d:Vr(function(){var o=s.value.value;n[e]!==o&&(n[e]=o,i?t[e]=o:o?t.setAttribute(e,o):t.removeAttribute(e))})}}yt("unmount",function(t,e){if(typeof e.type=="string"){var r=e.__e;if(r){var n=r.U;if(n){r.U=void 0;for(var i in n){var s=n[i];s&&s.d()}}}}else{var o=e.__c;if(o){var a=o.__$u;a&&(o.__$u=void 0,a.d())}}t(e)});yt("__h",function(t,e,r,n){(n<3||n===9)&&(e.__$f|=2),t(e,r,n)});Ie.prototype.shouldComponentUpdate=function(t,e){var r=this.__$u,n=r&&r.s!==void 0;for(var i in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(n||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(n||4&this.__$f)||3&this.__$f)return!0;for(var s in t)if(s!=="__source"&&t[s]!==this.props[s])return!0;for(var o in this.props)if(!(o in t))return!0;return!1};function Ds(t){return Te(function(){return ze(t)},[])}const de=ze(!1),Ps=ze({}),At=ze(null),tt=ze({}),he=ze(""),tr=ze(null),Ti=ze(0),Fr=ze(null);function Ai(){const t=z.get(G.ASKLAYER_ACCESS_HISTORY);return t&&Array.isArray(t)&&t.length>0?t:!1}function $s(){let t=Ai();t||(t=[]),t.push(Date.now()),z.set(G.ASKLAYER_ACCESS_HISTORY,t)}function Ls(){let t=z.get(G.ASKLAYER_BROWSING_HISTORY);t||(t=[]),t.length>500&&t.shift(),t.push([location.href,Date.now()]),z.set(G.ASKLAYER_BROWSING_HISTORY,t)}function Rs(){let t=+z.getSession(G.ASKLAYER_NUMBER_OF_PAGEVIEWS_IN_SESSION);z.setSession(G.ASKLAYER_NUMBER_OF_PAGEVIEWS_IN_SESSION,++t)}const hn=(t,e,r=!1)=>{const n=z.get(e)??[],i=n.find(a=>a.id===t);if(i?(Array.isArray(i.history)||(i.history=[]),i.history.push(Date.now())):n.push({id:t,history:[Date.now()]}),z.set(e,n),e===G.ASKLAYER_SURVEY_COMPLETED){const a=tt.value.orderId;a&&z.set(`${G.ASKLAYER_COMPLETED_SURVEY_BY_ORDER}${t}_${a}`,Date.now())}if(!r)return;const s=z.getSession(e)??[],o=s.find(a=>a.id===t);o?o.history.push(Date.now()):s.push({id:t,history:[Date.now()]}),z.setSession(e,s)},Ms=()=>{const t=document.documentElement,e=document.body,r=t.scrollTop?t.scrollTop:e.scrollTop,n=(t.scrollTop?t.scrollHeight:e.scrollHeight)-t.clientHeight;return Math.round(r/n*100)},Os=()=>!!document.querySelector(".osChatOptimize .panel.fixed");function Vs(t,e){let r,n;return function(){const i=arguments;n?(clearTimeout(r),r=setTimeout(function(){Date.now()-n>=e&&(t.apply(null,i),n=Date.now())},e-(Date.now()-n))):(t.apply(null,i),n=Date.now())}}var le=(t=>(t.FORCE_TRIGGERED="FORCE_TRIGGERED",t.TIME_ELAPSED="TIME_ELAPSED",t.NO_OPERATION_TIME_ELAPSED="NO_OPERATION_TIME_ELAPSED",t.WINDOW_SCROLL="WINDOW_SCROLL",t.WINDOW_CLICK="WINDOW_CLICK",t.SURVEY_OPENED="SURVEY_OPENED",t.SURVEY_CLOSED="SURVEY_CLOSED",t.SURVEY_READY="SURVEY_READY",t.SURVEY_COMPLETED="SURVEY_COMPLETED",t.SURVEY_HEIGHT_CHANGED="SURVEY_HEIGHT_CHANGED",t.SESSION_CREATED="SESSION_CREATED",t.EVENT_GENERATOR_CREATED="EVENT_GENERATOR_CREATED",t.QUERY_STATUS="QUERY_STATUS",t.COUPON_APPLICATION="COUPON_APPLICATION",t.SURVEY_EXIT_INTENT="SURVEY_EXIT_INTENT",t.SUBMISSION_ID="SUBMISSION_ID",t.RENDERER_READY="RENDERER_READY",t))(le||{});class Fs{constructor(){I(this,"observers");I(this,"iframe");this.observers=[]}addObserver(e){this.observers.push(e)}removeObserver(e){this.observers=this.observers.filter(r=>r!==e)}notify(e){this.observers.forEach(r=>r.update(e))}}class Ni extends Fs{constructor(){super();I(this,"timeElapsed",0);I(this,"noOperationTimeElapsed",0);I(this,"navFlag","initial");this.listenRendererEvents()}init(){this.tick(),this.listenEvents(),this.startSession(),Ls(),Rs()}startSession(){return this.sessionExists()||(this.setSessionVariables(),$s(),this.notify({type:le.SESSION_CREATED,value:null})),!0}sessionExists(){return!!z.getSession(G.ASKKLAYER_SESSION)}setSessionVariables(){z.setSession(G.ASKKLAYER_SESSION,Date.now()),z.setSession(G.ASKLAYER_SEARCH,location.search),z.setSession(G.ASKLAYER_REFERRER,document.referrer),z.setSession(G.ASKLAYER_LANDING_PAGE,location.href)}resetNoOperationTime(){this.noOperationTimeElapsed=0}tick(){setInterval(()=>{this.timeElapsed+=1,this.noOperationTimeElapsed+=1,this.notify({type:le.TIME_ELAPSED,value:this.timeElapsed}),this.notify({type:le.NO_OPERATION_TIME_ELAPSED,value:this.noOperationTimeElapsed})},1e3)}triggerSurvey(r){this.notify({type:le.FORCE_TRIGGERED,surveyId:r})}getStatus(r){this.notify({type:le.QUERY_STATUS,surveyId:r})}listenEvents(){const r=["scroll","click","blur","mousemove","keydown","touchstart","touchmove","touchend","resize","pagehide"],n=Vs(()=>{this.notify({type:le.WINDOW_SCROLL,value:Ms()})},50),i=s=>{var o;this.navFlag="blur",!(((o=document.activeElement)==null?void 0:o.tagName)==="IFRAME"||s.target!==window||Os())&&new Promise(a=>setTimeout(a,10)).then(()=>{this.navFlag==="blur"&&this.notify({type:le.SURVEY_EXIT_INTENT,value:null})})};r.forEach(s=>{window.addEventListener(s,o=>{this.resetNoOperationTime(),o.type==="blur"?i(o):o.type==="scroll"?n():o.type==="pagehide"&&(this.navFlag="pagehide")})}),window.addEventListener("asklayer-emit-close",s=>{this.notify({type:le.SURVEY_CLOSED,value:null,surveyId:s.detail.surveyId})}),document.body.addEventListener("mouseleave",s=>{s.clientY<20&&this.notify({type:le.SURVEY_EXIT_INTENT,value:null})})}listenRendererEvents(){window.addEventListener("asklayer-renderer-ready",r=>{r.detail.surveyId&&this.notify({type:le.RENDERER_READY,value:null,surveyId:r.detail.surveyId})})}}var q=(t=>(t.WIDGET="WIDGET",t.POST_PURCHASE="POST_PURCHASE",t.LINK="LINK",t.EMAIL="EMAIL",t.SELECT_PREVIEW="SELECT_PREVIEW",t))(q||{});let Us=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");class rr{constructor(){I(this,"platform","generic");I(this,"platformId","");I(this,"orderId","")}isLoggedIn(){return!!this.getPlatformId()}getPlatformId(){return this.platformId||this.setPlatformId(),this.platformId}setPlatformId(){var e;this.platformId=((e=window.asklayerData)==null?void 0:e.platformId)??""}getOrderId(){return this.orderId||this.setOrderId(),this.orderId}getCurrentPageId(){return""}getCurrentProductId(){return""}setOrderId(){var e;this.orderId=((e=window.asklayerData)==null?void 0:e.orderId)??""}async getCartState(){return[]}getPostPurchaseStyle(){return{}}getPostPurchaseWrapper(){return null}getWrapperElement(e){switch(e){case q.POST_PURCHASE:return this.getPostPurchaseWrapper();default:return document.body}}async getUserTags(e){return e?[]:[]}}class Hs extends rr{constructor(){super(...arguments);I(this,"platform","shopify")}setPlatformId(){var r,n,i,s;(r=window.Shopify)!=null&&r.checkout?this.platformId=window.Shopify.checkout.customer_id??"":this.platformId=((s=(i=(n=window.ShopifyAnalytics)==null?void 0:n.meta)==null?void 0:i.page)==null?void 0:s.customerId)??""}setOrderId(){var r,n;this.orderId=((n=(r=window.Shopify)==null?void 0:r.checkout)==null?void 0:n.order_id)??""}getCurrentPageId(){var n,i,s,o,a;return((s=(i=(n=window.ShopifyAnalytics)==null?void 0:n.meta)==null?void 0:i.page)==null?void 0:s.resourceType)==="page"?((a=(o=window.ShopifyAnalytics)==null?void 0:o.meta)==null?void 0:a.page.resourceId.toString())??"":""}getCurrentProductId(){var n,i,s,o,a;return((s=(i=(n=window.ShopifyAnalytics)==null?void 0:n.meta)==null?void 0:i.page)==null?void 0:s.resourceType)==="product"?((a=(o=window.ShopifyAnalytics)==null?void 0:o.meta)==null?void 0:a.page.resourceId.toString())??"":""}async getCartState(){return[]}getPostPurchaseStyle(){return{width:"100%",position:"relative"}}async getOrder(r){const n=this.getOrderId();if(!n)return[];try{const s=await fetch("https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:n,userId:r,platform:"shopify"})});if(s.ok)return await s.json();throw new Error(s.statusText)}catch{return[]}}async getUserTags(r){var i,s,o,a,c;const n=((o=(s=(i=window.ShopifyAnalytics)==null?void 0:i.meta)==null?void 0:s.page)==null?void 0:o.customerId)||((c=(a=window.Shopify)==null?void 0:a.checkout)==null?void 0:c.customer_id);if(!n)return[];try{const h=await fetch("https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer/customer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,query:"tag",customerId:n,platform:"shopify"})});if(h.ok)return await h.json();throw new Error(h.statusText)}catch{return[]}}getPostPurchaseWrapper(){const r=document.querySelector(".thank-you__additional-content");if(r)return r;const n=document.querySelector("div.section__content");return n||document.body}}class Ys extends rr{constructor(){super(...arguments);I(this,"platform","wix")}async getMember(){const r=location.hostname,n="wix_app_id_placeholder";try{const i=await fetch(`https://${r}/_api/apps/current-member/${n}`);if(i.ok)return(await i.json()).member}catch(i){console.error(i)}return null}isLoggedIn(){return!!this.platformId}async getCartState(){return[]}}class zs extends rr{constructor(){super(...arguments);I(this,"platform","wordpress")}isLoggedIn(){return!!this.platformId}async getCartState(){return[]}}class Bs extends rr{constructor(){super(...arguments);I(this,"platform","generic")}}function Mt(t){switch(t){case"shopify":return new Hs;case"wix":return new Ys;case"wordpress":return new zs;default:return new Bs}}function Ur(){return typeof window.Shopify<"u"?Mt("shopify"):typeof window.wixEmbedsAPI<"u"?Mt("wix"):typeof window.wp<"u"?Mt("wordpress"):Mt("generic")}var Ws=0;function l(t,e,r,n,i,s){e||(e={});var o,a,c=e;if("ref"in c)for(a in c={},e)a=="ref"?o=e[a]:c[a]=e[a];var d={type:t,props:c,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ws,__i:-1,__u:0,__source:i,__self:s};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return V.vnode&&V.vnode(d),d}const js=`*,*:before,*:after{box-sizing:border-box}body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:400}ol,ul{list-style:none}img{max-width:100%;height:auto}#alroot{font-family:SF Pro JP,SF Pro Display,SF Pro Icons,Helvetica Neue,Helvetica,Arial,sans-serif;font-optical-sizing:auto;line-height:1.5;font-weight:400;font-size:var(--al-body-font-size);color-scheme:light;color:var(--al-text-dark);background-color:transparent;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%}#alroot:lang(ja){font-family:SF Pro JP,SF Pro Display,SF Pro Icons,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,メイリオ,Meiryo,ＭＳ Ｐゴシック,Helvetica Neue,Helvetica,Arial,sans-serif}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}h1{font-size:3.2em;line-height:1.1}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme: light){#alroot{color:#213547;background-color:transparent}a:hover{color:#747bff}button{background-color:#f9f9f9}}.live-edit-mode *{pointer-events:none}.headingText,.headingText p{font-size:var(--al-heading-font-size);margin-bottom:.8em;font-weight:700}.bodyText{font-size:var(--al-body-font-size);margin-bottom:1.4em}.al-btn{font-size:var(--al-body-font-size)}.al-img{margin-bottom:.8em;max-width:100%}.mb{margin-bottom:1.4em}.metadata-icon{width:100%!important;height:40px}label{font-weight:500;margin:0}.input-wrap{position:relative}input[type=text],input[type=number],input[type=email],input[type=password],textarea,select{box-shadow:2px 2px 3px #00000008;padding:.5em;border-radius:6px;border:2px solid var(--al-grey);width:100%;font-size:var(--al-body-font-size);transition:border .3s;line-height:1em}input[type=text]:focus,input[type=number]:focus,input[type=email]:focus,input[type=password]:focus,textarea:focus,select:focus{outline:none;border-color:var(--al-color-primary)}input[type=text].has-error,input[type=number].has-error,input[type=email].has-error,input[type=password].has-error,textarea.has-error,select.has-error{border-color:var(--al-color-danger)}textarea{min-height:90px}.form-error{position:absolute;bottom:0;left:0;color:var(--al-color-danger);font-size:14px;animation-name:errorShake;animation-timing-function:ease-in-out;animation-duration:1s;animation-fill-mode:both;animation-iteration-count:1;transform:translateY(110%)}@keyframes errorShake{0%{transform:translateY(110%) translate(0)}6.5%{transform:translateY(110%) translate(-6px) rotateY(-9deg)}18.5%{transform:translateY(110%) translate(5px) rotateY(7deg)}31.5%{transform:translateY(110%) translate(-3px) rotateY(-5deg)}43.5%{transform:translateY(110%) translate(2px) rotateY(3deg)}50%{transform:translateY(110%) translate(0)}}.optional{position:absolute;top:2px;right:4px;color:var(--al-text-muted);font-size:14px;font-weight:500}.widget-bottom{height:90dvh;display:flex;flex-direction:column;justify-content:flex-end}@supports (height: 90dvh){.widget-bottom{height:90dvh}}.wrapper{position:fixed;width:min(95vw,370px);z-index:1;overflow-y:hidden;pointer-events:none}.pos-screen-center{position:relative;margin:auto}.pos-left{top:auto;right:auto;bottom:12px;left:12px}.pos-right{top:auto;left:auto;bottom:12px;right:12px}.pos-center{top:auto;bottom:12px;right:auto;left:50%;transform:translate(-50%)}.pos-embedded{position:relative;width:100%;padding:15px 0}.height-manager{border:3px solid var(--al-color-primary);display:flex;flex-direction:column;border-radius:10px;overflow-y:hidden;pointer-events:all;transition:height .3s;max-height:100%;background:#fff;justify-content:flex-end;position:relative}.page-manager{background:#fff;max-height:100%;position:relative;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;scrollbar-width:thin}.page-manager.overflow-hidden{overflow:hidden}.pos-screen-center .page-manager{overflow-y:hidden}.page-manager.metadata-page{background-color:#efefef}.page-manager.live-metadata-page{display:none}.page-wrapper{height:100%;transition:opacity .3s,height .3s}.page{padding:20px}.transition300ms{transition-property:height,opacity;transition-duration:.3s}.transition900ms{transition-property:height,opacity;transition-duration:.9s}.opacity0,.fade-appear{opacity:0}.fade-appear-active,.fade-appear-done{opacity:1!important}.fade-enter{opacity:0}.fade-enter-active{opacity:1!important}.fade-enter-done,.fade-exit{opacity:1}.fade-exit-active,.fade-exit-done{opacity:0}label.forCheckbox{display:flex;align-items:center;background:var(--al-light-neutral);padding:5px 10px;border-radius:5px}input[type=checkbox]{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0 10px 0 0;font:inherit;color:var(--al-color-primary);width:18px;height:18px;flex-shrink:0;flex-grow:0;border:.15em solid currentColor;border-radius:.15em;transform:translateY(-.075em);background:white;display:grid;place-content:center}input[type=checkbox]:before{content:"";width:.65em;height:.65em;clip-path:polygon(14% 44%,0 65%,50% 100%,100% 16%,80% 0%,43% 62%);transform:scale(0);transform-origin:bottom left;transition:.12s transform ease-in-out;box-shadow:inset 1em 1em var(--al-color-primary)}input[type=checkbox]:checked:before{transform:scale(1)}input[type=checkbox]:focus{outline:none}input[type=checkbox]:disabled{--form-control-color: var(--al-color-primary-dark);color:var(--al-color-primary-dark);cursor:not-allowed}input[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;margin:0;font:inherit;color:var(--al-color-primary);width:1.15em;height:1.15em;border:.15em solid var(--al-color-primary);border-radius:50%;transform:translateY(-.075em);display:grid;place-items:center}input[type=radio]:before{content:"";width:.65em;height:.65em;border-radius:50%;transform:scale(0);transition:.12s transform ease-in-out;box-shadow:inset 1em 1em var(--al-color-primary-light)}input[type=radio]:checked:before{transform:scale(1)}.al-btnSet{display:flex;flex-direction:row;justify-content:flex-end;align-content:center}.al-btnSet.back-enabled{justify-content:space-between}.al-btn.back{align-self:flex-start}.al-btn.forward{align-self:flex-end}.al-btn{cursor:pointer;background:var(--al-color-primary);color:var(--al-button-color);display:flex;align-items:center;justify-content:center;padding:5px 20px;border-radius:var(--al-border-radius);font-weight:700;transition:filter .3s}.al-btn:hover{filter:brightness(1.1);color:var(--al-button-color)}.al-btn.icon-left{flex-direction:row-reverse}.al-btn .icon{margin-left:.5em}.al-btn .icon.icon-left,.al-btn.back .icon{margin-left:0;margin-right:.5em}.icon.i18px{width:18px}.icon.i22px{max-width:22px}.icon{filter:invert(1)}.icon.dark{filter:invert(0)}.stats-bar{border-radius:var(--al-border-radius);display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:.5em;position:relative;font-size:.8em;padding:4px 0;color:#fff;background:#ccc}.stats-bar-label{font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:50%}.stats-bar-label,.stats-bar-percentage,.stats-bar-count{z-index:1;padding-left:.5em}.stats-bar-fill{z-index:0;position:absolute;top:0;left:0;bottom:0;background:var(--al-color-primary);border-radius:var(--al-border-radius);width:0;transition:width 1s;transition-timing-function:cubic-bezier(.66,.07,.53,1.19)}.stats-bar-fill.highlight{filter:brightness(1.3)}.close-button svg{width:100%;height:auto}.pl_lexical__paragraph{margin:0 0 .7rem;line-height:1.2}@keyframes slideInDown{0%{transform:translateZ(0);visibility:visible;opacity:1}to{transform:translate3d(0,100%,0);opacity:0}}.slideIn-exit-active{animation-name:slideInDown;animation-duration:.6s}@keyframes slideInUp{0%{transform:translate3d(0,100%,0);visibility:visible;opacity:0}to{-webkit-transform:translateZ(0);opacity:1;transform:translateZ(0)}}.slideIn-enter-active{animation-name:slideInUp;animation-duration:.6s}.slideIn-enter{opacity:0}@keyframes slideInRight{0%{transform:translate3d(30%,0,0);visibility:visible;opacity:0}to{opacity:1;transform:translate(0)}}.slideInRight{animation-name:slideInRight;animation-duration:.4s;animation-timing-function:ease;animation-delay:10ms;animation-fill-mode:forwards;opacity:0}.slideInRight-appear{opacity:0}.cursor-pointer{cursor:pointer}
`;var B={},Ii={},Gs=[].slice;Ii.stringFormat=function(){var t,e,r,n,i,s;for(t=arguments.length>=1?Gs.call(arguments,0):[],s=t[0],e=r=0,n=t.length-1;n>=0?r<n:r>n;e=n>=0?++r:--r)i=new RegExp("\\{"+e+"\\}","gm"),s=s.replace(i,t[e+1]);return s};/**
 * @title ipret
 * @overview Micro i18n library for node and browser. Translate your app with strings already there.
 * @copyright (c) 2017
 * @license MIT
 * @author İsmail Demirbilek
 * @module ipret
 */const qs=Ii;var Dt,pt,Ks=[].slice;pt={};Dt=null;B.setStrings=function(t,e){pt[t]=e,Object.keys(pt).length===1&&(Dt=t)};B.setLanguage=function(t){if(pt[t]==null)throw new Error("There is no translations map for given language code: "+t);Dt=t};B.translate=function(){var t,e;return t=arguments.length>=1?Ks.call(arguments,0):[],e=t.map(function(r){var n;return((n=pt[Dt])!=null?n[r]:void 0)||r}),qs.stringFormat.apply(this,e)};B.getLanguage=function(){return Dt};B.getLanguages=function(){return Object.keys(pt)};const Zs="إرسال",Js="أيام",Xs="ساعات",Qs="دقائق",eo="ثواني",to="التالي",ro="إغلاق",no="البريد الإلكتروني",io="تنزيل",so="و",oo="اختياري",ao={Submit:Zs,"This is required":"هذا الحقل مطلوب","This is invalid":"هذا غير صالح","You must check at least one to continue.":"يجب تحديد خيار واحد على الأقل للمتابعة.","Please select an option":"يرجى اختيار خيار",days:Js,hours:Xs,minutes:Qs,seconds:eo,"Sorry, this email has already been registered.":"عذراً، هذا البريد الإلكتروني مسجل مسبقا.","Something wrong with the server. Please retry after a while.":"حدث خطأ في الخادم. يرجى المحاولة مرة أخرى بعد فترة.","Please select":"يرجى التحديد","The value must be {0} or higher.":"يجب أن تكون القيمة {0} أو أعلى.","The value must be {0} or lower.":"يجب أن تكون القيمة {0} أو أقل.","Generating coupon...":"جاري إنشاء القسيمة...","You must check this box to continue.":"يجب تحديد هذا المربع للمتابعة.","This survey is not available.":"هذا الاستبيان غير متاح.",Next:to,Close:ro,Email:no,Download:io,"You can't leave this empty":"لا يمكن ترك هذا الحقل فارغاً","privacy policy":"سياسة الخصوصية","terms and conditions":"الشروط والأحكام","I agree to the":"أوافق على",and:so,"Code copied!":"تم نسخ الرمز!",Optional:oo},lo="Einreichen",co="Tage",uo="Stunden",ho="Minuten",fo="Sekunden",po="Weiter",go="Schließen",mo="E-Mail",yo="Herunterladen",vo="und",_o="Optional",bo={Submit:lo,"This is required":"Dies ist erforderlich","This is invalid":"Dies ist ungültig","You must check at least one to continue.":"Sie müssen mindestens eine Option ankreuzen, um fortzufahren.","Please select an option":"Bitte wählen Sie eine Option",days:co,hours:uo,minutes:ho,seconds:fo,"Sorry, this email has already been registered.":"Entschuldigung, diese E-Mail wurde bereits registriert.","Something wrong with the server. Please retry after a while.":"Etwas ist mit dem Server schiefgelaufen. Bitte versuchen Sie es später noch einmal.","Please select":"Bitte auswählen","The value must be {0} or higher.":"Der Wert muss {0} oder höher sein.","The value must be {0} or lower.":"Der Wert muss {0} oder niedriger sein.","Generating coupon...":"Gutschein wird erstellt...","You must check this box to continue.":"Sie müssen dieses Feld ankreuzen, um fortzufahren.","This survey is not available.":"Diese Umfrage ist nicht verfügbar.",Next:po,Close:go,Email:mo,Download:yo,"You can't leave this empty":"Sie können dieses Feld nicht leer lassen","privacy policy":"Datenschutzrichtlinie","terms and conditions":"Nutzungsbedingungen","I agree to the":"Ich stimme den",and:vo,"Code copied!":"Code kopiert!",Optional:_o},wo="Submit",So={Submit:wo},xo="Enviar",Eo="días",Co="horas",ko="minutos",To="segundos",Ao="Siguiente",No="Cerrar",Io="Correo electrónico",Do="Descargar",Po="y",$o="Opcional",Lo={Submit:xo,"This is required":"Esto es obligatorio","This is invalid":"Esto no es válido","You must check at least one to continue.":"Debe marcar al menos una opción para continuar.","Please select an option":"Por favor seleccione una opción",days:Eo,hours:Co,minutes:ko,seconds:To,"Sorry, this email has already been registered.":"Lo siento, este correo electrónico ya ha sido registrado.","Something wrong with the server. Please retry after a while.":"Algo salió mal con el servidor. Por favor, inténtelo de nuevo después de un rato.","Please select":"Por favor seleccione","The value must be {0} or higher.":"El valor debe ser {0} o más alto.","The value must be {0} or lower.":"El valor debe ser {0} o más bajo.","Generating coupon...":"Generando cupón...","You must check this box to continue.":"Debe marcar esta casilla para continuar.","This survey is not available.":"Esta encuesta no está disponible.",Next:Ao,Close:No,Email:Io,Download:Do,"You can't leave this empty":"No puede dejar esto vacío","privacy policy":"política de privacidad","terms and conditions":"términos y condiciones","I agree to the":"Estoy de acuerdo con el",and:Po,"Code copied!":"¡Código copiado!",Optional:$o},Ro="Soumettre",Mo="jours",Oo="heures",Vo="minutes",Fo="secondes",Uo="Suivant",Ho="Fermer",Yo="Email",zo="Télécharger",Bo="et",Wo="Optionnel",jo={Submit:Ro,"This is required":"Ceci est requis","This is invalid":"Ceci est invalide","You must check at least one to continue.":"Vous devez cocher au moins une option pour continuer.","Please select an option":"Veuillez sélectionner une option",days:Mo,hours:Oo,minutes:Vo,seconds:Fo,"Sorry, this email has already been registered.":"Désolé, cet email a déjà été enregistré.","Something wrong with the server. Please retry after a while.":"Un problème est survenu avec le serveur. Veuillez réessayer plus tard.","Please select":"Veuillez sélectionner","The value must be {0} or higher.":"La valeur doit être de {0} ou plus.","The value must be {0} or lower.":"La valeur doit être de {0} ou moins.","Generating coupon...":"Génération du coupon...","You must check this box to continue.":"Vous devez cocher cette case pour continuer.","This survey is not available.":"Cette enquête n'est pas disponible.",Next:Uo,Close:Ho,Email:Yo,Download:zo,"You can't leave this empty":"Vous ne pouvez pas laisser ce champ vide","privacy policy":"politique de confidentialité","terms and conditions":"conditions générales d'utilisation","I agree to the":"J'accepte les",and:Bo,"Code copied!":"Code copié !",Optional:Wo},Go="Invia",qo="giorni",Ko="ore",Zo="minuti",Jo="secondi",Xo="Avanti",Qo="Chiudi",ea="Email",ta="Scarica",ra="e",na="Opzionale",ia={Submit:Go,"This is required":"Questo è obbligatorio","This is invalid":"Questo non è valido","You must check at least one to continue.":"Devi selezionare almeno un'opzione per continuare.","Please select an option":"Si prega di selezionare un'opzione",days:qo,hours:Ko,minutes:Zo,seconds:Jo,"Sorry, this email has already been registered.":"Spiacente, questa email è già stata registrata.","Something wrong with the server. Please retry after a while.":"Qualcosa è andato storto con il server. Per favore riprova più tardi.","Please select":"Si prega di selezionare","The value must be {0} or higher.":"Il valore deve essere {0} o superiore.","The value must be {0} or lower.":"Il valore deve essere {0} o inferiore.","Generating coupon...":"Generazione del coupon in corso...","You must check this box to continue.":"Devi selezionare questa casella per continuare.","This survey is not available.":"Questo sondaggio non è disponibile.",Next:Xo,Close:Qo,Email:ea,Download:ta,"You can't leave this empty":"Non puoi lasciare questo campo vuoto","privacy policy":"informativa sulla privacy","terms and conditions":"termini e condizioni","I agree to the":"Accetto la",and:ra,"Code copied!":"Codice copiato!",Optional:na},sa="送信",oa="日",aa="時間",la="分",ca="秒",ua="次へ",da="閉じる",ha="Eメール",fa="ダウンロード",pa="および",ga="任意",ma={Submit:sa,"This is required":"これは必須項目です","This is invalid":"正しく入力してください","You must check at least one to continue.":"少なくとも1つにチェックをしてください","Please select an option":"オプションを選択してください",days:oa,hours:aa,minutes:la,seconds:ca,"Sorry, this email has already been registered.":"申し訳ございません。このメールアドレスは既に登録されています。","Something wrong with the server. Please retry after a while.":"問題が発生しました。時間をおいてもう一度試してください。","Please select":"選択してください","The value must be {0} or higher.":"値は{0}以上にする必要があります","The value must be {0} or lower.":"値は{0}以下にする必要があります","Generating coupon...":"クーポンを生成中...","You must check this box to continue.":"続行するには、チェックしてください","This survey is not available.":"このアンケートは利用できません。",Next:ua,Close:da,Email:ha,Download:fa,"You can't leave this empty":"この項目は必須です","privacy policy":"プライバシーポリシー","terms and conditions":"利用規約","I agree to the":"に同意します",and:pa,"Code copied!":"コピーされました！",Optional:ga},ya="Enviar",va="días",_a="horas",ba="minutos",wa="segundos",Sa="Siguiente",xa="Cerrar",Ea="Correo electrónico",Ca="Descargar",ka="y",Ta="Opcional",Aa={Submit:ya,"This is required":"Esto es obligatorio","This is invalid":"Esto no es válido","You must check at least one to continue.":"Debe marcar al menos una opción para continuar.","Please select an option":"Por favor seleccione una opción",days:va,hours:_a,minutes:ba,seconds:wa,"Sorry, this email has already been registered.":"Lo siento, este correo electrónico ya ha sido registrado.","Something wrong with the server. Please retry after a while.":"Algo salió mal con el servidor. Por favor, inténtelo de nuevo después de un rato.","Please select":"Por favor seleccione","The value must be {0} or higher.":"El valor debe ser {0} o más alto.","The value must be {0} or lower.":"El valor debe ser {0} o más bajo.","Generating coupon...":"Generando cupón...","You must check this box to continue.":"Debe marcar esta casilla para continuar.","This survey is not available.":"Esta encuesta no está disponible.",Next:Sa,Close:xa,Email:Ea,Download:Ca,"You can't leave this empty":"No puede dejar esto vacío","privacy policy":"política de privacidad","terms and conditions":"términos y condiciones","I agree to the":"Estoy de acuerdo con el",and:ka,"Code copied!":"¡Código copiado!",Optional:Ta},Na=new Map([["en",So],["de",bo],["es",Lo],["pt",Aa],["fr",jo],["it",ia],["ar",ao],["ja",ma]]),Ia=t=>{const e=t.findIndex(i=>i.custom);let r=null;e>-1&&(r=t.splice(e,1));const n=t.map(i=>({value:i,sort:Math.random()})).sort((i,s)=>i.sort-s.sort).map(({value:i})=>i);return r&&n.push(r[0]),n},fn=()=>{let t=navigator.language||navigator.userLanguage;const e=new URLSearchParams(window.location.search);return t=(e.get("lang")||e.get("language"))??t,t=t.substring(0,2),t},Da=()=>(Na.forEach((t,e)=>{B.setStrings(e,t)}),B.getLanguages().includes(fn())?B.setLanguage(fn()):B.setLanguage("en"),B),Pa=(t,e)=>{const r=[];for(let n=t;n<=e;n++)r.push(n);return r},$a=(t,e)=>{var r=document.createElement("a");r.download=e,r.href=t,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)},La=t=>{const e=t.primaryColor;if(!e||typeof e!="object")document.documentElement.style.setProperty("--al-color-primary"," #01a3a4"),document.documentElement.style.setProperty("--al-color-primary-light","#00bfc0"),document.documentElement.style.setProperty("--al-color-primary-dark","#007e80");else{const r=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,n=`rgba(${e.r*1.2}, ${e.g*1.2}, ${e.b*1.2}, ${e.a})`,i=`rgba(${e.r*.8}, ${e.g*.8}, ${e.b*.8}, ${e.a})`;document.documentElement.style.setProperty("--al-color-primary",r),document.documentElement.style.setProperty("--al-color-primary-light",n),document.documentElement.style.setProperty("--al-color-primary-dark",i)}},Ce=(t,e,r)=>{const n=`al_style_${r}`;if(t.getElementById(n))return;const s=document.createElement("style");s.textContent=e,s.id=n,t.appendChild(s)},Ra=t=>window.innerWidth<=500&&t!=="screen-center"?"pos-center":`pos-${t}`,Ma=(t,e,r,n)=>{const i=["page-manager"];return t==="live"&&r.type==="MetaData"&&i.push("live-metadata-page"),t==="live-edit"&&r.type==="MetaData"&&i.push("metadata-page"),r.type!=="MetaData"&&!n&&i.push("with-branding"),i.join(" ")},xr=t=>{try{new URL(t)}catch{return""}let e=t.replace("firebasestorage.googleapis.com/v0/b/asklayer.appspot.com","asklayer-images.b-cdn.net");const r=new URL(e);return r.searchParams.append("optimizer","image"),r.searchParams.append("width","650"),r.toString()},Oa=t=>new Promise(e=>{t.onload=()=>{e("image loaded")},t.onerror=r=>{console.error(r),e("image loaded error")},setTimeout(()=>{e("image loaded by timeout")},1e3)}),pn=t=>{const e=new Image;return e.src=t,Oa(e)},Va=async(t,e,r)=>{const n=await fetch("https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer/addtags",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({surveyId:t,submitterId:e,tags:r})});if(!n.ok)throw new Error("HTTP error "+n.status);return await n.json()},gn=(t="view",e=null,r,n)=>{const i=r,s=n,o=e,a=t,c=document.referrer;let h=`https://asklayer-analytics-ingest-6nonizu4oa-an.a.run.app?u=${i}&s=${s}&a=${a}`;c&&(h+=`&r=${c}`),o&&(h+=`&p=${o}`),fetch(h,{headers:{"ASKLAYER-TIMESTAMP":new Date().toISOString()}}).catch(u=>{console.error(u)})},Di=t=>{window.dispatchEvent(new CustomEvent("asklayer-emit-close",{detail:{surveyId:t}}))},Fa=t=>Array.from(new Set(t)),Ua=t=>t.startsWith("http")?t:new URL(t,location.href).href,Hr=(t,e=null)=>{const r="";window.parent.postMessage({type:t,value:e,surveyId:r},"*")},Pi=t=>{const e=[],r=[];let n="";return t.forEach(s=>{var o;(o=s.actions)!=null&&o.length&&s.actions.forEach(a=>{a.action==="tagUser"&&a.enabled&&e.push(a.value),a.action==="metafield"&&a.enabled&&a.value&&a.customAnswer&&r.push([a.value,a.customAnswer]),a.action==="openUrl"&&a.enabled&&(n||(n=a.value))})}),[{action:"tagUser",enabled:e.length>0,value:e.flat()},{action:"metafield",enabled:r.length>0,value:r},{action:"openUrl",enabled:!!n,value:n}]},Fe={Dropdown:"Dropdown",SingleChoice:"SingleChoice",Binary:"Binary",NumberScale:"NumberScale",Stars:"Stars",Satisfaction:"Satisfaction",Consent:"Consent",Text:"Text",EmailCapture:"EmailCapture",ShortAnswer:"ShortAnswer",Coupon:"Coupon",WordCloud:"WordCloud",MultipleChoice:"MultipleChoice",SingleLine:"SingleLine",ButtonList:"ButtonList"},$i=[Fe.Dropdown,Fe.SingleChoice,Fe.Binary,Fe.MultipleChoice,Fe.WordCloud,Fe.ButtonList],Li=[Fe.NumberScale,Fe.Stars,Fe.Satisfaction,Fe.Consent],Ha=(t,e,r,n=[])=>{var s;let i=r;if($i.includes(e))i=(s=t.goto)!=null&&s.enabled?t.goto:r;else if(Li.includes(e)&&Array.isArray(n)&&n.length>0){const o=+t.value;n.forEach(a=>{(a.type==="range"&&a.min<=o&&a.max>=o||a.type==="equal"&&a.min===o)&&a.goto&&a.goto.destination&&a.goto.enabled&&(i=a.goto)})}return i},Ya=(t,e,r,n)=>{var T,_,P;let i=[];const s=[];if($i.includes(e))((T=t.actions)==null?void 0:T.length)>0&&(i=t.actions.filter(C=>C.enabled));else if(Li.includes(e)&&Array.isArray(n)&&n.length>0){const C=+t.value;n.forEach(S=>{(S.type==="range"&&S.min<=C&&S.max>=C||S.type==="equal"&&S.min===C)&&(i=[...i,...S.actions.filter(b=>b.enabled)])})}const o=r.find(C=>C.action==="tagUser"&&C.enabled),a=i.find(C=>C.action==="tagUser"),c=((_=o==null?void 0:o.value)==null?void 0:_.map(C=>C.value))??[],d=((P=a==null?void 0:a.value)==null?void 0:P.map(C=>C.value))??[],h=new Set([...c,...d]);h.size>0&&s.push({enabled:!0,action:"tagUser",value:Array.from(h)});const u=r.find(C=>C.action==="metafield"&&C.enabled),f={};if(u){const C=u.value;Array.isArray(t.value)?f[C]=t.value.map(S=>String(S)):f[C]=[String(t.value)]}const g=i.find(C=>C.action==="metafield");let v=[];if(g!=null&&g.value&&typeof g.value=="string"?v.push([g.value,g.customAnswer]):Array.isArray(g==null?void 0:g.value)&&(v=g.value),v=v.filter(C=>C.length===2),v.length>0){Fa(v.map(([S])=>S)).forEach(S=>{delete f[S]});for(let[S,b]of v)f[S]||(f[S]=[]),Array.isArray(b)?f[S]=[...f[S],...b]:f[S].push(b)}Object.keys(f).length>0&&s.push({enabled:!0,action:"metafield",value:f});const w=r.find(C=>C.action==="openUrl"&&C.enabled&&C.value),x=i.find(C=>C.action==="openUrl"&&C.value);return x?s.push(x):w&&s.push(w),s},za=async(t,e,r,n,i,s=[])=>{if(t==null)return Promise.resolve();if(de.value==="live-edit")return Array.isArray(t)||(t=[t]),Promise.resolve({results:t.map(c=>({answer:c,count:1}))});const o={userId:r.userId,submitterId:At.value,submissionId:e,platformId:tt.value.id??"",orderId:tt.value.orderId??"",tags:i.tags,metafields:i.metafields,surveyId:r.id,pageId:n.id,pageAlias:n.alias,type:n.type,answer:t,location:Fr.value,currentUrl:location.href,possibleAnswers:s};JSON.stringify(o);const a=await fetch("https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer/answer",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok)throw new Error("HTTP error "+a.status);return await a.json()},Ri=t=>{let e=[],r={};return!t||(t==null?void 0:t.length)<1?{tags:e,metafields:r}:(t.filter(n=>n==null?void 0:n.enabled).forEach(n=>{switch(n.action){case"openUrl":n.value&&n.value.length>0&&window.open(Ua(n.value),"_blank");break;case"tagUser":e=n.value??[];break;case"metafield":r=n.value??{};break;case"close":break}}),{tags:e,metafields:r})},Mi=Pr(null),Ba=({mainData:t,children:e,shadowDom:r,currentPageIndex:n,setCurrentPageIndex:i})=>{const s=ve(null),[o,a]=F(!1),[c,d]=F("unset"),[h,u]=F(t.pages[0]),f=ve(null),g=ve(null),w=he.value==="LINK"||he.value==="EMAIL"||he.value==="SELECT_PREVIEW"?"pos-screen-center":Ra(t.position),x=w==="pos-screen-center",T=t.hideBranding?6:36,_=S=>{s.current=S;const b={submissionId:S,timestamp:Date.now(),orderId:tt.value.orderId??""};z.set(`${G.ASKLAYER_SUBMISSION_ID}${t.id}`,b)},P=()=>{if(!f.current)return;const b=f.current.querySelector(".page-wrapper").scrollHeight+T+1;f.current.style.height=b+"px",Hr("ASKLAYER_HEIGHT_CHANGED",b),setTimeout(()=>{var $;($=g.current)==null||$.classList.remove("overflow-hidden")},500)};ee(()=>{var S;(S=g.current)==null||S.classList.add("overflow-hidden")},[h.id]),ee(()=>{if(de.value==="live-edit")return;const S=z.get(`${G.ASKLAYER_SUBMISSION_ID}${t.id}`);S!=null&&S.submissionId&&(s.current=S.submissionId)},[]),ee(()=>{if(de.value==="live-edit")return;let S=z.get(`${G.ASKLAYER_PAGE_HISTORY}${t.id}`)??[];Array.isArray(S)===!1&&(S=[]);const b=t.pages[n].id;S[S.length-1]!==b&&(S.push(b),S.length>20&&S.shift()),z.set(`${G.ASKLAYER_PAGE_HISTORY}${t.id}`,S)},[n]),ee(()=>{u(t.pages[n])},[n,t]);const C=()=>{if(de.value==="live-edit")return;const S={surveyId:t.id,submitterId:At.value,submissionId:s.current};hn(t.id,G.ASKLAYER_SURVEY_COMPLETED),fetch("https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer/complete",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(S)}).then(b=>{if(!b.ok)throw new Error("HTTP error "+b.status);return b.json()})};return ee(()=>{window.addEventListener("asklayer-show",S=>{var b;((b=S.detail)==null?void 0:b.surveyId)===t.id&&(a(!0),de.value!=="live-edit"&&hn(t.id,G.ASKLAYER_SURVEY_SHOWN))}),window.addEventListener("asklayer-close",S=>{var b;((b=S.detail)==null?void 0:b.surveyId)===t.id&&a(!1)})},[]),h?l(Mi.Provider,{value:{shadowDom:r,mainData:t,visibility:o,currentPage:h,setCurrentPage:u,currentPageIndex:n,setCurrentPageIndex:i,submissionIdRef:s,setSubmissionId:_,showLoader:c,setShowLoader:d,isCenterPos:x,position:w,heightManagerRef:f,pageManagerRef:g,sendSurveyComplete:C,resetHeight:P},children:e}):null},ne=()=>er(Mi),Wa=`.loadingOverlay{position:absolute;display:flex;justify-content:center;align-items:center;height:100%;width:100%;top:0;left:0;z-index:9999}.loadingOverlay .overlay{background-color:#0000004d;display:flex;justify-content:center;align-items:center;position:absolute;top:0;left:0;right:0;bottom:0;z-index:9999;border-radius:7px}.loadingOverlay .spinner{animation:rotate 1s infinite;height:50px;width:50px}.loadingOverlay .spinner:before,.loadingOverlay .spinner:after{border-radius:50%;content:"";display:block;height:20px;width:20px}.loadingOverlay .spinner:before{animation:ball1 1s infinite;background-color:#fff;box-shadow:30px 0 0 var(--al-color-primary);margin-bottom:10px}.loadingOverlay .spinner:after{animation:ball2 1s infinite;background-color:var(--al-color-primary);box-shadow:30px 0 #fff}@keyframes rotate{0%{transform:rotate(0) scale(.8)}50%{transform:rotate(360deg) scale(1.2)}to{transform:rotate(720deg) scale(.8)}}@keyframes ball1{0%{box-shadow:30px 0 0 var(--al-color-primary)}50%{box-shadow:0 0 0 var(--al-color-primary);margin-bottom:0;transform:translate(15px,15px)}to{box-shadow:30px 0 0 var(--al-color-primary);margin-bottom:10px}}@keyframes ball2{0%{box-shadow:30px 0 #fff}50%{box-shadow:0 0 #fff;margin-top:-20px;transform:translate(15px,15px)}to{box-shadow:30px 0 #fff;margin-top:0}}
`,ja=({show:t})=>{const{shadowDom:e}=ne();return Ce(e,Wa,"loadingOverlay"),t==="show"?l("div",{className:"loadingOverlay",children:l("div",{className:"overlay",children:l("div",{className:"spinner"})})}):null},Ga=({headingText:t,bodyText:e,imagePosition:r="top",imageAlignment:n="left",imageUrl:i,imageWidth:s=325,pageType:o})=>{const{currentPage:a,resetHeight:c}=ne(),d=e.replace(/(<([^>]+)>)/gi,"").trim().length!==0;if(o==="MetaData"&&de.value==="live")return null;const h={display:"flex",justifyContent:{left:"flex-start",center:"center",right:"flex-end"}[n]},u=()=>{requestAnimationFrame(()=>{setTimeout(()=>{c()},100)})},f=i?l("div",{className:"al-img-container",style:h,children:l("img",{className:`al-img al-img-${r} ${o==="MetaData"&&"metadata-icon"}`,src:xr(i),style:{width:s+"px"},onLoad:u,onError:u})}):null;return ee(()=>{i||u()},[a]),l(ce,{children:[r==="top"&&f,t&&l("div",{className:"headingText",dangerouslySetInnerHTML:{__html:t}}),r==="middle"&&f,e&&d&&l("div",{className:"bodyText",dangerouslySetInnerHTML:{__html:e}}),r==="bottom"&&f]})},Oi=Pr(null);let hr=!1;const qa=({children:t})=>{const{mainData:e,currentPage:r,setCurrentPage:n,currentPageIndex:i,setCurrentPageIndex:s,submissionIdRef:o,setSubmissionId:a,sendSurveyComplete:c,setShowLoader:d}=ne(),{actions:h,goto:u={destination:"next"},type:f,leftText:g,rightText:v,consentText:w="I agree to the terms and conditions",metadata:x,isNps:T}=r,{choices:_,randomize:P,showResults:C,custom:S,conditionalActions:b,scaleMax:$,buttonText:O="",label:M="",placeholderText:K="Please select",skippable:W=!1}=r.questionSettings,R=de.value==="live-edit"?!1:P,[Y,L]=F(!1),[H,j]=F(),se=_.filter(oe=>!oe.custom||oe.custom&&oe.enabled),we=R?Ia(se):se,Pe=()=>{de.value==="live-edit"||Y||(c(),L(!0))},qe=(oe,Q)=>{if(!Q||!Q.destination)return oe+1;if((Q==null?void 0:Q.destination)==="end")return e.pages.length-1;let _e=(Q==null?void 0:Q.destination)==="page"?e.pages.findIndex(Ke=>Ke.id===Q.value):oe+1;return _e<0&&(_e=oe+1),_e},it=async(oe,Q=Promise.resolve())=>{if(!o.current){d("show");try{await Q}catch{}finally{d("hide")}}const _e=qe(i,oe);de.value==="live-edit"&&Hr("ASKLAYER_UPCOMING_INDEX",_e),s(_e)},or=()=>{let oe=[];return C&&(oe=we.map(Q=>({value:Q.value,custom:(Q==null?void 0:Q.custom)??!1}))),oe},_t=(oe=null)=>{if(de.value==="live-edit")return!1;const Q=qe(i,oe),_e=e.pages[Q];return(_e==null?void 0:_e.type)==="ThankYou"},ar=(oe,Q,_e)=>{j(Q),n({...r,type:"Result",id:`${r.id}_result`,selectedOptions:oe.value,results:_e.results})},$t=async oe=>{if(hr)return;if(!oe)return it(u);hr=!0;const Q=Ha(oe,f,u,b);let _e={};if(de.value!=="live-edit"){const $e=Ya(oe,f,h,b);_e=Ri($e)}const Ke=za(oe.value,o.current,e,r,_e,or()).then($e=>{$e!=null&&$e.submissionId&&a($e.submissionId),C&&ar(oe,Q,$e),_t(Q)&&Pe()}).catch(console.log).finally(()=>{hr=!1});C||it(Q,Ke)};return l(Oi.Provider,{value:{actions:h,gotoTarget:H,processGoto:it,processComplete:Pe,shuffledChoices:we,handleSubmit:$t,getUpComingPageIndex:qe,custom:S,scaleMax:$,leftText:g,rightText:v,buttonText:O,skippable:W,label:M,placeholderText:K,consentText:w,setMarkedComplete:L,shouldProcessComplete:_t,metadata:x,isNps:T},children:t})},ie=()=>er(Oi),fe=({text:t,buttonAction:e,iconName:r="chevron-right",iconOnLeft:n=!1,iconDark:i=!1,enableBackButton:s,gotoTarget:o={destination:"next"}})=>{const a=B.translate,{mainData:c,currentPageIndex:d}=ne(),{processGoto:h}=ie(),u=()=>{e?e():h(o)};return l("div",{className:`al-btnSet ${s&&"back-enabled"}`,children:[s&&l("div",{className:`al-btn back ${n&&"icon-left"}`,onClick:()=>h({destination:"back"}),children:[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:{marginLeft:"-6px"},className:`icon i18px ${i&&"dark"}`,children:l("path",{d:"M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.42Z"})}),a("Back")]}),l("div",{className:"",style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[c.showProgress&&l("span",{className:"progress",style:{fontWeight:"400",fontSize:"14px",marginRight:"14px"},children:[d+1," / ",c.pages.length]}),l("div",{className:`al-btn ${n&&"icon-left"}`,onClick:u,children:[t||a("Next"),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:`icon i18px ${i&&"dark"}`,children:[r==="check"&&l("path",{d:"M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"}),r==="download"&&l("path",{d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"}),r==="airplane"&&l("path",{d:"m2 21 21-9L2 3v7l15 2-15 2v7Z"}),r==="chevron-left"&&l("path",{d:"M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.42Z"}),r==="chevron-right"&&l("path",{d:"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42Z"})]})]})]})]})},mn=`.binary{display:flex;flex-direction:row}.binary-container{display:flex;flex-direction:column;gap:12px}.binary>div{flex-basis:50%;background:var(--al-light-neutral);cursor:pointer;transition:all .3s;padding:10px 0;text-align:center;line-height:1em}.binary>div:first-child{border-radius:var(--al-border-radius) 0 0 var(--al-border-radius);border-right:1px solid var(--al-grey)}.binary>div:last-child{border-radius:0 var(--al-border-radius) var(--al-border-radius) 0;border-left:1px solid var(--al-grey)}@media (hover: hover){.binary>div:hover{filter:brightness(.95)}}.binaryItem-hover{filter:brightness(.95)}
`,Ka=()=>{const t=B.translate,{shadowDom:e}=ne(),{handleSubmit:r,shuffledChoices:n,skippable:i}=ie();return Ce(e,mn,"binary"),l("div",{className:mn["binary-container"],children:[l("div",{className:"binary transition300ms",children:n.map((s,o)=>l("div",{onClick:()=>r(s),onTouchStart:a=>{const c=a.currentTarget;c&&c.classList.add("binaryItem-hover")},onTouchEnd:a=>{const c=a.currentTarget;c&&c.classList.remove("binaryItem-hover")},children:s.value},o))}),i&&l(fe,{text:t("Next"),buttonAction:()=>r()})]})},Za=`.buttonList-container{display:flex;flex-direction:column}.buttonList-item{width:100%;padding:4px 8px;border-radius:4px;cursor:pointer;text-align:center;margin-bottom:.8em;font-weight:600}@media (hover: hover){.buttonList-item:hover{transform:scale(1.03);background:rgb(1,163,164);box-shadow:0 0 10px #00000026;transition:all .2s ease-in-out}}.buttonList-item-hover{transform:scale(1.03);background:rgb(1,163,164);box-shadow:0 0 10px #00000026;transition:all .2s ease-in-out}.buttonList-value{color:#fff}
`,Ja=()=>{const t=B.translate,{shadowDom:e}=ne(),{handleSubmit:r,shuffledChoices:n,skippable:i}=ie();return Ce(e,Za,"buttonList"),l("div",{className:"buttonList-containe",children:[n.map((s,o)=>l("div",{className:"buttonList-item",style:{background:s.bgColor},onClick:()=>r(s),onTouchStart:a=>{const c=a.currentTarget;c&&c.classList.add("buttonList-item-hover")},onTouchEnd:a=>{const c=a.currentTarget;c&&c.classList.remove("buttonList-item-hover")},children:l("span",{className:"buttonList-value",children:s.value})},`ButtonList-${s.value}-${o}`)),i&&l(fe,{text:t("Next"),buttonAction:()=>r()})]})},Xa=()=>{const t=B.translate,[e,r]=F(!1),[n,i]=F(!1),{handleSubmit:s,consentText:o,skippable:a}=ie(),c=async()=>{n?s({value:n}):a?s():r(!0)};return l("div",{className:"dropdown",children:[l("div",{className:"input-wrap mb",children:[l("label",{className:"forCheckbox cursor-pointer",children:[l("input",{type:"checkbox",onChange:h=>{const u=h.target.checked;i(u),r(!1)},className:"cursor-pointer"}),l("span",{children:t(o)})]}),e&&l("span",{className:"form-error",children:t("You must check this box to continue.")})]}),l(fe,{text:t(a?"Next":"Submit"),buttonAction:()=>c()})]})},Qa=`.ldsEllipsis{display:inline-block;position:relative;width:80px;height:13px}.ldsEllipsis div{position:absolute;top:0;width:13px;height:13px;border-radius:50%;background:var(--al-color-primary);animation-timing-function:cubic-bezier(0,1,1,0)}.ldsEllipsis div:nth-child(1){left:8px;animation:ldsEllipsis1 .6s infinite}.ldsEllipsis div:nth-child(2){left:8px;animation:ldsEllipsis2 .6s infinite}.ldsEllipsis div:nth-child(3){left:32px;animation:ldsEllipsis2 .6s infinite}.ldsEllipsis div:nth-child(4){left:56px;animation:ldsEllipsis3 .6s infinite}@keyframes ldsEllipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes ldsEllipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes ldsEllipsis2{0%{transform:translate(0)}to{transform:translate(24px)}}
`,el=()=>{const{shadowDom:t}=ne();return Ce(t,Qa,"spinner"),l("div",{className:"ldsEllipsis",children:[l("div",{}),l("div",{}),l("div",{}),l("div",{})]})},tl=`.coupon{border:dashed 3px #333;background:#fff;padding:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--al-color-primary);font-weight:700;transition:all .2s ease-in-out;cursor:pointer;flex-direction:row;height:52px}.couponText{font-size:18px;line-height:1;word-break:break-all;color:var(--al-text-dark)}.copyIcon{width:20px;height:20px;margin-left:10px}
`,rl=async(t,e,r,n)=>{try{const s=await(await fetch("https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer/generateCoupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({surveyId:t,pageId:e,submitterId:r,submissionId:n})})).json();return[s.coupon,s.submissionId]}catch{}},nl=()=>l("div",{className:"copyIcon",children:l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:l("path",{d:"M19 20H5V4h2v3h10V4h2m-7-2a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m7 0h-4.2A3 3 0 0 0 12 0a3 3 0 0 0-2.8 2H5a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"})})}),il=()=>{const t=B.translate,[e,r]=F(!1),[n,i]=F("SAMPLE COUPON"),[s,o]=F(!1),{mainData:a,submissionIdRef:c,setSubmissionId:d,currentPage:h,shadowDom:u}=ne(),{actions:f,handleSubmit:g,processComplete:v,shouldProcessComplete:w}=ie();Ce(u,tl,"coupon");const x=P=>{fetch(`/discount/${P}`).then(()=>{}).catch(C=>{})},T=()=>{var C;const P=f.find(S=>S.action==="tagUser"&&S.enabled);if(P&&((C=P.value)!=null&&C.length)){const S=P.value.map(b=>b.value);Va(a.id,At.value,S)}};ee(()=>{if(de.value==="live-edit")i("PREVIEW"),r(!0);else{const P=a.id,C=h.id,S=At.value;rl(P,C,S,c.current).then(([b,$])=>{if($&&d($),r(!0),!(b!=null&&b.couponCode)){i("An error occurred.");return}i(b.couponCode),b.autoApplication&&typeof window.Shopify=="object"&&x(b.couponCode),w()&&(T(),v())})}},[]);const _=()=>{e&&navigator.clipboard!==void 0&&navigator.clipboard.writeText(n).then(()=>{o(!0),setTimeout(()=>{o(!1)},3e3)})};return l(ce,{children:[l("div",{className:`coupon mb ${e&&"loaded"} ${s&&"copied"}`,onClick:_,children:[e&&l(ce,{children:[l("div",{className:"couponText",children:s?t("Code copied!"):n}),l(nl,{})]}),!e&&l(ce,{children:[l(el,{})," ",t("Generating...")]})]}),l(fe,{text:t("Next"),iconName:"chevron-right",iconOnLeft:!1,enableBackButton:!1,buttonAction:()=>g()})]})};var me;let je=(me=class extends Date{constructor(r=null,n="YYYY-MM-DD",i="en-US"){super(me.parseDateTime(r,n,i));I(this,"lang");this.lang=i}static parseDateTime(r,n="YYYY-MM-DD",i="en-US"){if(!r)return new Date(new Date().setHours(0,0,0,0));if(r instanceof me)return r.toJSDate();if(r instanceof Date)return r;if(/^-?\d{10,}$/.test(String(r)))return new Date(Number(r));if(typeof r=="string"){const s=[];let o=null;for(;(o=me.regex.exec(n))!=null;)o[1]!=="\\"&&s.push(o);if(s.length){const a={year:null,month:null,shortMonth:null,longMonth:null,day:null,hour:0,minute:0,second:0,ampm:null,value:""};s[0].index>0&&(a.value+=".*?");for(const[d,h]of Object.entries(s)){const u=Number(d),{group:f,pattern:g}=me.formatPatterns(h[0],i);a[f]=u+1,a.value+=g,a.value+=".*?"}const c=new RegExp(`^${a.value}$`);if(c.test(r)){const d=c.exec(r),h=Number(d[a.year]);let u=null;a.month?u=Number(d[a.month])-1:a.shortMonth?u=me.shortMonths(i).indexOf(d[a.shortMonth]):a.longMonth&&(u=me.longMonths(i).indexOf(d[a.longMonth]));const f=Number(d[a.day])||1,g=Number(d[a.hour]);let v=Number.isNaN(g)?0:g;const w=Number(d[a.minute]),x=Number.isNaN(w)?0:w,T=Number(d[a.second]),_=Number.isNaN(T)?0:T,P=d[a.ampm];return P&&P==="PM"&&(v+=12,v===24&&(v=0)),new Date(h,u,f,v,x,_,0)}}}return new Date(new Date().setHours(0,0,0,0))}static shortMonths(r){return me.MONTH_JS.map(n=>new Date(2019,n).toLocaleString(r,{month:"short"}))}static longMonths(r){return me.MONTH_JS.map(n=>new Date(2019,n).toLocaleString(r,{month:"long"}))}static formatPatterns(r,n){switch(r){case"YY":case"YYYY":return{group:"year",pattern:`(\\d{${r.length}})`};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:`(${me.shortMonths(n).join("|")})`};case"MMMM":return{group:"longMonth",pattern:`(${me.longMonths(n).join("|")})`};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"};case"h":case"H":return{group:"hour",pattern:"(\\d{1,2})"};case"hh":case"HH":return{group:"hour",pattern:"(\\d{2})"};case"m":return{group:"minute",pattern:"(\\d{1,2})"};case"mm":return{group:"minute",pattern:"(\\d{2})"};case"s":return{group:"second",pattern:"(\\d{1,2})"};case"ss":return{group:"second",pattern:"(\\d{2})"};case"a":case"A":return{group:"ampm",pattern:"(AM|PM|am|pm)"}}}getWeek(r){const n=new Date(this.midnight_ts(this)),i=(this.getDay()+(7-r))%7;n.setDate(n.getDate()-i);const s=n.getTime();return n.setMonth(0,1),n.getDay()!==r&&n.setMonth(0,1+(4-n.getDay()+7)%7),1+Math.ceil((s-n.getTime())/6048e5)}clone(){return new me(this)}toJSDate(){return new Date(this)}inArray(r,n="[]"){return r.some(i=>i instanceof Array?this.isBetween(i[0],i[1],n):this.isSame(i,"day"))}isBetween(r,n,i="()"){switch(i){default:case"()":return this.midnight_ts(this)>this.midnight_ts(r)&&this.midnight_ts(this)<this.midnight_ts(n);case"[)":return this.midnight_ts(this)>=this.midnight_ts(r)&&this.midnight_ts(this)<this.midnight_ts(n);case"(]":return this.midnight_ts(this)>this.midnight_ts(r)&&this.midnight_ts(this)<=this.midnight_ts(n);case"[]":return this.midnight_ts()>=this.midnight_ts(r)&&this.midnight_ts()<=this.midnight_ts(n)}}isBefore(r,n="days"){switch(n){case"day":case"days":return new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(r.getFullYear(),r.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return r.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")}isSameOrBefore(r,n="days"){switch(n){case"day":case"days":return new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(r.getFullYear(),r.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")}isAfter(r,n="days"){switch(n){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(r.getFullYear(),r.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>r.getFullYear()}throw new Error("isAfter: Invalid unit!")}isSameOrAfter(r,n="days"){switch(n){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(r.getFullYear(),r.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")}isSame(r,n="days"){switch(n){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(r.getFullYear(),r.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")}add(r,n="days"){switch(n){case"day":case"days":this.setDate(this.getDate()+r);break;case"month":case"months":this.setMonth(this.getMonth()+r)}return this}subtract(r,n="days"){switch(n){case"day":case"days":this.setDate(this.getDate()-r);break;case"month":case"months":this.setMonth(this.getMonth()-r)}return this}diff(r,n="days"){switch(n){default:case"day":case"days":return Math.round((this.midnight_ts()-this.midnight_ts(r))/864e5);case"month":case"months":let i=12*(r.getFullYear()-this.getFullYear());return i-=r.getMonth(),i+=this.getMonth(),i}}format(r,n="en-US"){let i="";const s=[];let o=null;for(;(o=me.regex.exec(r))!=null;)o[1]!=="\\"&&s.push(o);if(s.length){s[0].index>0&&(i+=r.substring(0,s[0].index));for(const[a,c]of Object.entries(s)){const d=Number(a);i+=this.formatTokens(c[0],n),s[d+1]&&(i+=r.substring(c.index+c[0].length,s[d+1].index)),d===s.length-1&&(i+=r.substring(c.index+c[0].length))}}return i.replace(/\\/g,"")}midnight_ts(r){return r?new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime():new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()}formatTokens(r,n){switch(r){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return`0${this.getMonth()+1}`.slice(-2);case"MMM":return me.shortMonths(n)[this.getMonth()];case"MMMM":return me.longMonths(n)[this.getMonth()];case"D":return String(this.getDate());case"DD":return`0${this.getDate()}`.slice(-2);case"H":return String(this.getHours());case"HH":return`0${this.getHours()}`.slice(-2);case"h":return String(this.getHours()%12||12);case"hh":return`0${this.getHours()%12||12}`.slice(-2);case"m":return String(this.getMinutes());case"mm":return`0${this.getMinutes()}`.slice(-2);case"s":return String(this.getSeconds());case"ss":return`0${this.getSeconds()}`.slice(-2);case"a":return this.getHours()<12||this.getHours()===24?"am":"pm";case"A":return this.getHours()<12||this.getHours()===24?"AM":"PM";default:return""}}},I(me,"regex",/(\\)?(Y{2,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|A|a)/g),I(me,"MONTH_JS",[0,1,2,3,4,5,6,7,8,9,10,11]),me),sl=class{constructor(e){I(this,"picker");this.picker=e}render(e,r){e||(e=new je),e.setDate(1),e.setHours(0,0,0,0),typeof this[`get${r}View`]=="function"&&this[`get${r}View`](e)}getContainerView(e){this.picker.ui.container.innerHTML="",this.picker.options.header&&this.picker.trigger("render",{date:e.clone(),view:"Header"}),this.picker.trigger("render",{date:e.clone(),view:"Main"}),this.picker.options.autoApply||this.picker.trigger("render",{date:e.clone(),view:"Footer"})}getHeaderView(e){const r=document.createElement("header");this.picker.options.header instanceof HTMLElement&&r.appendChild(this.picker.options.header),typeof this.picker.options.header=="string"&&(r.innerHTML=this.picker.options.header),this.picker.ui.container.appendChild(r),this.picker.trigger("view",{target:r,date:e.clone(),view:"Header"})}getMainView(e){const r=document.createElement("main");this.picker.ui.container.appendChild(r);const n=document.createElement("div");n.className=`calendars grid-${this.picker.options.grid}`;for(let i=0;i<this.picker.options.calendars;i++){const s=document.createElement("div");s.className="calendar",n.appendChild(s);const o=this.getCalendarHeaderView(e.clone());s.appendChild(o),this.picker.trigger("view",{date:e.clone(),view:"CalendarHeader",index:i,target:o});const a=this.getCalendarDayNamesView();s.appendChild(a),this.picker.trigger("view",{date:e.clone(),view:"CalendarDayNames",index:i,target:a});const c=this.getCalendarDaysView(e.clone());s.appendChild(c),this.picker.trigger("view",{date:e.clone(),view:"CalendarDays",index:i,target:c});const d=this.getCalendarFooterView(this.picker.options.lang,e.clone());s.appendChild(d),this.picker.trigger("view",{date:e.clone(),view:"CalendarFooter",index:i,target:d}),this.picker.trigger("view",{date:e.clone(),view:"CalendarItem",index:i,target:s}),e.add(1,"month")}r.appendChild(n),this.picker.trigger("view",{date:e.clone(),view:"Calendars",target:n}),this.picker.trigger("view",{date:e.clone(),view:"Main",target:r})}getFooterView(e){const r=document.createElement("footer"),n=document.createElement("div");n.className="footer-buttons";const i=document.createElement("button");i.className="cancel-button unit",i.innerHTML=this.picker.options.locale.cancel,n.appendChild(i);const s=document.createElement("button");s.className="apply-button unit",s.innerHTML=this.picker.options.locale.apply,s.disabled=!0,n.appendChild(s),r.appendChild(n),this.picker.ui.container.appendChild(r),this.picker.trigger("view",{date:e,target:r,view:"Footer"})}getCalendarHeaderView(e){const r=document.createElement("div");r.className="header";const n=document.createElement("div");n.className="month-name",n.innerHTML=`<span>${e.toLocaleString(this.picker.options.lang,{month:"long"})}</span> ${e.format("YYYY")}`,r.appendChild(n);const i=document.createElement("button");i.className="previous-button unit",i.innerHTML=this.picker.options.locale.previousMonth,r.appendChild(i);const s=document.createElement("button");return s.className="next-button unit",s.innerHTML=this.picker.options.locale.nextMonth,r.appendChild(s),r}getCalendarDayNamesView(){const e=document.createElement("div");e.className="daynames-row";for(let r=1;r<=7;r++){const n=3+this.picker.options.firstDay+r,i=document.createElement("div");i.className="dayname",i.innerHTML=new Date(1970,0,n,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"short"}),i.title=new Date(1970,0,n,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"long"}),e.appendChild(i),this.picker.trigger("view",{dayIdx:n,view:"CalendarDayName",target:i})}return e}getCalendarDaysView(e){const r=document.createElement("div");r.className="days-grid";const n=this.calcOffsetDays(e,this.picker.options.firstDay),i=32-new Date(e.getFullYear(),e.getMonth(),32).getDate();for(let s=0;s<n;s++){const o=document.createElement("div");o.className="offset",r.appendChild(o)}for(let s=1;s<=i;s++){e.setDate(s);const o=this.getCalendarDayView(e);r.appendChild(o),this.picker.trigger("view",{date:e,view:"CalendarDay",target:o})}return r}getCalendarDayView(e){const r=this.picker.options.date?new je(this.picker.options.date):null,n=new je,i=document.createElement("div");return i.className="day unit",i.innerHTML=e.format("D"),i.dataset.time=String(e.getTime()),e.isSame(n,"day")&&i.classList.add("today"),[0,6].includes(e.getDay())&&i.classList.add("weekend"),this.picker.datePicked.length?this.picker.datePicked[0].isSame(e,"day")&&i.classList.add("selected"):r&&e.isSame(r,"day")&&i.classList.add("selected"),this.picker.trigger("view",{date:e,view:"CalendarDay",target:i}),i}getCalendarFooterView(e,r){const n=document.createElement("div");return n.className="footer",n}calcOffsetDays(e,r){let n=e.getDay()-r;return n<0&&(n+=7),n}};class ol{constructor(e){I(this,"picker");I(this,"instances",{});this.picker=e}initialize(){const e=[];this.picker.options.plugins.forEach(r=>{typeof r=="function"?e.push(new r):typeof r=="string"&&typeof easepick<"u"&&Object.prototype.hasOwnProperty.call(easepick,r)?e.push(new easepick[r]):console.warn(`easepick: ${r} not found.`)}),e.sort((r,n)=>r.priority>n.priority?-1:r.priority<n.priority||r.dependencies.length>n.dependencies.length?1:r.dependencies.length<n.dependencies.length?-1:0),e.forEach(r=>{r.attach(this.picker),this.instances[r.getName()]=r})}getInstance(e){return this.instances[e]}addInstance(e){if(Object.prototype.hasOwnProperty.call(this.instances,e))console.warn(`easepick: ${e} already added.`);else{if(typeof easepick<"u"&&Object.prototype.hasOwnProperty.call(easepick,e)){const r=new easepick[e];return r.attach(this.picker),this.instances[r.getName()]=r,r}if(this.getPluginFn(e)!=="undefined"){const r=new(this.getPluginFn(e));return r.attach(this.picker),this.instances[r.getName()]=r,r}console.warn(`easepick: ${e} not found.`)}return null}removeInstance(e){return e in this.instances&&this.instances[e].detach(),delete this.instances[e]}reloadInstance(e){return this.removeInstance(e),this.addInstance(e)}getPluginFn(e){return[...this.picker.options.plugins].filter(r=>typeof r=="function"&&new r().getName()===e).shift()}}class yn{constructor(e){I(this,"Calendar",new sl(this));I(this,"PluginManager",new ol(this));I(this,"calendars",[]);I(this,"datePicked",[]);I(this,"cssLoaded",0);I(this,"binds",{hidePicker:this.hidePicker.bind(this),show:this.show.bind(this)});I(this,"options",{doc:document,css:[],element:null,firstDay:1,grid:1,calendars:1,lang:"en-US",date:null,format:"YYYY-MM-DD",readonly:!0,autoApply:!0,header:!1,inline:!1,scrollToDate:!0,locale:{nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',cancel:"Cancel",apply:"Apply"},documentClick:this.binds.hidePicker,plugins:[]});I(this,"ui",{container:null,shadowRoot:null,wrapper:null});I(this,"version","1.2.1");const r={...this.options.locale,...e.locale};this.options={...this.options,...e},this.options.locale=r,this.handleOptions(),this.ui.wrapper=document.createElement("span"),this.ui.wrapper.style.display="none",this.ui.wrapper.style.position="absolute",this.ui.wrapper.style.pointerEvents="none",this.ui.wrapper.className="easepick-wrapper",this.ui.wrapper.attachShadow({mode:"open"}),this.ui.shadowRoot=this.ui.wrapper.shadowRoot,this.ui.container=document.createElement("div"),this.ui.container.className="container",this.options.zIndex&&(this.ui.container.style.zIndex=String(this.options.zIndex)),this.options.inline&&(this.ui.wrapper.style.position="relative",this.ui.container.classList.add("inline")),this.ui.shadowRoot.appendChild(this.ui.container),this.options.element.after(this.ui.wrapper),this.handleCSS(),this.options.element.addEventListener("click",this.binds.show),this.on("view",this.onView.bind(this)),this.on("render",this.onRender.bind(this)),this.PluginManager.initialize(),this.parseValues(),typeof this.options.setup=="function"&&this.options.setup(this),this.on("click",this.onClick.bind(this));const n=this.options.scrollToDate?this.getDate():null;this.renderAll(n)}on(e,r,n={}){this.ui.container.addEventListener(e,r,n)}off(e,r,n={}){this.ui.container.removeEventListener(e,r,n)}trigger(e,r={}){return this.ui.container.dispatchEvent(new CustomEvent(e,{detail:r}))}destroy(){this.options.element.removeEventListener("click",this.binds.show),typeof this.options.documentClick=="function"&&document.removeEventListener("click",this.options.documentClick,!0),Object.keys(this.PluginManager.instances).forEach(e=>{this.PluginManager.removeInstance(e)}),this.ui.wrapper.remove()}onRender(e){const{view:r,date:n}=e.detail;this.Calendar.render(n,r)}onView(e){const{view:r,target:n}=e.detail;r==="Footer"&&this.datePicked.length&&(n.querySelector(".apply-button").disabled=!1)}onClickHeaderButton(e){this.isCalendarHeaderButton(e)&&(e.classList.contains("next-button")?this.calendars[0].add(1,"month"):this.calendars[0].subtract(1,"month"),this.renderAll(this.calendars[0]))}onClickCalendarDay(e){if(this.isCalendarDay(e)){const r=new je(e.dataset.time);this.options.autoApply?(this.setDate(r),this.trigger("select",{date:this.getDate()}),this.hide()):(this.datePicked[0]=r,this.trigger("preselect",{date:this.getDate()}),this.renderAll())}}onClickApplyButton(e){if(this.isApplyButton(e)){if(this.datePicked[0]instanceof Date){const r=this.datePicked[0].clone();this.setDate(r)}this.hide(),this.trigger("select",{date:this.getDate()})}}onClickCancelButton(e){this.isCancelButton(e)&&this.hide()}onClick(e){const r=e.target;if(r instanceof HTMLElement){const n=r.closest(".unit");if(!(n instanceof HTMLElement))return;this.onClickHeaderButton(n),this.onClickCalendarDay(n),this.onClickApplyButton(n),this.onClickCancelButton(n)}}isShown(){return this.ui.container.classList.contains("inline")||this.ui.container.classList.contains("show")}show(e){if(this.isShown())return;const r=e&&"target"in e?e.target:this.options.element,{top:n,left:i}=this.adjustPosition(r);this.ui.container.style.top=`${n}px`,this.ui.container.style.left=`${i}px`,this.ui.container.classList.add("show"),this.trigger("show",{target:r})}hide(){this.ui.container.classList.remove("show"),this.datePicked.length=0,this.renderAll(),this.trigger("hide")}setDate(e){const r=new je(e,this.options.format);this.options.date=r.clone(),this.updateValues(),this.calendars.length&&this.renderAll()}getDate(){return this.options.date instanceof je?this.options.date.clone():null}parseValues(){this.options.date?this.setDate(this.options.date):this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.setDate(this.options.element.value),this.options.date instanceof Date||(this.options.date=null)}updateValues(){const e=this.getDate(),r=e instanceof Date?e.format(this.options.format,this.options.lang):"",n=this.options.element;n instanceof HTMLInputElement?n.value=r:n instanceof HTMLElement&&(n.innerText=r)}hidePicker(e){let r=e.target,n=null;r.shadowRoot&&(r=e.composedPath()[0],n=r.getRootNode().host),this.isShown()&&n!==this.ui.wrapper&&r!==this.options.element&&this.hide()}renderAll(e){this.trigger("render",{view:"Container",date:(e||this.calendars[0]).clone()})}isCalendarHeaderButton(e){return["previous-button","next-button"].some(r=>e.classList.contains(r))}isCalendarDay(e){return e.classList.contains("day")}isApplyButton(e){return e.classList.contains("apply-button")}isCancelButton(e){return e.classList.contains("cancel-button")}gotoDate(e){const r=new je(e,this.options.format);r.setDate(1),this.calendars[0]=r.clone(),this.renderAll()}clear(){this.options.date=null,this.datePicked.length=0,this.updateValues(),this.renderAll(),this.trigger("clear")}handleOptions(){this.options.element instanceof HTMLElement||(this.options.element=this.options.doc.querySelector(this.options.element)),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0),this.options.element instanceof HTMLInputElement&&(this.options.element.readOnly=this.options.readonly),this.options.date?this.calendars[0]=new je(this.options.date,this.options.format):this.calendars[0]=new je}handleCSS(){if(Array.isArray(this.options.css))this.options.css.forEach(e=>{const r=document.createElement("link");r.href=e,r.rel="stylesheet";const n=()=>{this.cssLoaded++,this.cssLoaded===this.options.css.length&&(this.ui.wrapper.style.display="")};r.addEventListener("load",n),r.addEventListener("error",n),this.ui.shadowRoot.append(r)});else if(typeof this.options.css=="string"){const e=document.createElement("style"),r=document.createTextNode(this.options.css);e.appendChild(r),this.ui.shadowRoot.append(e),this.ui.wrapper.style.display=""}else typeof this.options.css=="function"&&(this.options.css.call(this,this),this.ui.wrapper.style.display="")}adjustPosition(e){const r=e.getBoundingClientRect(),n=this.ui.wrapper.getBoundingClientRect();this.ui.container.classList.add("calc");const i=this.ui.container.getBoundingClientRect();this.ui.container.classList.remove("calc");let s=r.bottom-n.bottom,o=r.left-n.left;return typeof window<"u"&&(window.innerHeight<s+i.height&&s-i.height>=0&&(s=r.top-n.top-i.height),window.innerWidth<o+i.width&&r.right-i.width>=0&&(o=r.right-n.right-i.width)),{left:o,top:s}}}var al=Object.freeze({__proto__:null,Core:yn,create:yn});const ll=()=>{const t=B.translate,{skippable:e,handleSubmit:r}=ie(),{currentPage:n}=ne(),[i,s]=F(!1),[o,a]=F(null),c=ve(null),d=Te(()=>n==null?void 0:n.questionSettings,[n]),h=()=>{var u;if(!e){if(o.getDate()===null){s(!0);return}r({value:o.getDate().format("YYYY-MM-DD HH:mm:ss")});return}r({value:(u=o.getDate())==null?void 0:u.format("YYYY-MM-DD HH:mm:ss")})};return ee(()=>{const u=new al.create({element:document.getElementById("date-picker"),css:["/assets/css/easepick-styling.css"],setup(f){f.on("show",()=>{}),f.on("hide",()=>{})}});a(u)},[]),l("div",{className:"single-choice transition300ms",children:[l("div",{className:"date-form",children:[l("div",{className:"position-relative",children:[l("div",{className:"label-box position-relative",children:e&&l("span",{className:"date-input-optional",children:t("Optional")})}),l("div",{className:"position-relative",children:[l("span",{onClick:()=>o.show(),className:"calendar-icon",children:l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:l("path",{d:"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"})})}),l("input",{name:"date-picker",className:"date-picker-container",id:"date-picker",placeholder:(d==null?void 0:d.placeholder)??"",ref:c})]}),i&&l("span",{className:"form-error",children:t("This is required")})]}),l("div",{className:"pt-12",children:l(fe,{text:t("Next"),buttonAction:()=>h()})})]}),l("style",{jsx:!0,children:`
        .pt-12 {
          padding-top: 12px;
        }
        .position-relative {
          position: relative;
        }
        .date-form {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }
        .calendar-icon {
          position: absolute;
          width: 24px;
          display: flex;
          align-items: center;
          height: 100%;
          margin-left: 8px;
          cursor: pointer;
        }
        .date-picker-container {
          box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.03);
          padding: 0.5em;
          border-radius: 6px;
          border: 2px solid var(--al-grey);
          width: 100%;
          font-size: var(--al-body-font-size);
          transition: border 0.3s;
          line-height: 1em;
          padding-left: 36px;
        }
        .date-picker-container:focus {
          outline: none;
          border-color: var(--al-color-primary);
        }
        .label-box {
          display: flex;
          justify-content: space-between;
          flex-direction: row-reverse;
        }
        .date-input-optional {
          text-align: right;
          color: var(--al-text-muted);
          font-size: 14px;
          font-weight: 500;
        }
      `})]})},cl=`.download-page-wrapper{display:flex;flex-direction:column;gap:24px}.download-btn-container{display:flex;justify-content:center}
`,ul=()=>{var o;const t=B.translate,{handleSubmit:e}=ie(),{currentPage:r,shadowDom:n}=ne();Ce(n,cl,"downloadPage");const i=(o=r.questionSettings)==null?void 0:o.downloadData,s=()=>{de.value==="live"&&(i!=null&&i.fileUrl)&&$a(i==null?void 0:i.fileUrl,i==null?void 0:i.fileName)};return l("div",{className:"download-page-wrapper",children:[l("div",{className:"download-btn-container",children:l(fe,{text:t("Download"),iconName:"download",buttonAction:s})}),l(fe,{text:t("Next"),iconName:"chevron-right",iconOnLeft:!1,enableBackButton:!1,buttonAction:()=>e()})]})},dl=()=>{const t=B.translate,[e,r]=F(!1),[n,i]=F(-1),{shuffledChoices:s,placeholderText:o,skippable:a,handleSubmit:c}=ie(),d=async()=>{n===-1?a?c():r(!0):c(s[n])};return l("div",{className:"dropdown",children:[l("div",{class:"input-wrap mb",children:[l("select",{value:n,className:e?"has-error":"",onChange:u=>{r(!1),i(u.target.value)},children:[l("option",{value:-1,children:t(o)}),s.map((u,f)=>l("option",{value:f,children:u.value},`sc-${f}`))]}),e&&l("span",{className:"form-error",children:t("Please select an option")})]}),l(fe,{text:t("Next"),buttonAction:()=>d()})]})};function Vi(t,e){for(var r in e)t[r]=e[r];return t}function Er(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}function Fi(t,e){var r=e(),n=F({t:{__:r,u:e}}),i=n[0].t,s=n[1];return rt(function(){i.__=r,i.u=e,fr(i)&&s({t:i})},[t,r,e]),ee(function(){return fr(i)&&s({t:i}),t(function(){fr(i)&&s({t:i})})},[t]),r}function fr(t){var e,r,n=t.u,i=t.__;try{var s=n();return!((e=i)===(r=s)&&(e!==0||1/e==1/r)||e!=e&&r!=r)}catch{return!0}}function Ui(t){t()}function Hi(t){return t}function Yi(){return[!1,Ui]}var zi=rt;function Cr(t,e){this.props=t,this.context=e}function hl(t,e){function r(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),e?!e(this.props,i)||!o:Er(this.props,i)}function n(i){return this.shouldComponentUpdate=r,De(t,i)}return n.displayName="Memo("+(t.displayName||t.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Cr.prototype=new Ie).isPureReactComponent=!0,Cr.prototype.shouldComponentUpdate=function(t,e){return Er(this.props,t)||Er(this.state,e)};var vn=V.__b;V.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),vn&&vn(t)};var fl=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Bi(t){function e(r){var n=Vi({},r);return delete n.ref,t(n,r.ref||null)}return e.$$typeof=fl,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var _n=function(t,e){return t==null?null:Ge(Ge(t).map(e))},pl={map:_n,forEach:_n,count:function(t){return t?Ge(t).length:0},only:function(t){var e=Ge(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:Ge},gl=V.__e;V.__e=function(t,e,r,n){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),i.__c(t,e)}gl(t,e,r,n)};var bn=V.unmount;function Wi(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),t.__c.__H=null),(t=Vi({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(n){return Wi(n,e,r)})),t}function ji(t,e,r){return t&&r&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(n){return ji(n,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=r)),t}function Ht(){this.__u=0,this.o=null,this.__b=null}function Gi(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ml(t){var e,r,n;function i(s){if(e||(e=t()).then(function(o){r=o.default||o},function(o){n=o}),n)throw n;if(!r)throw e;return De(r,s)}return i.displayName="Lazy",i.__f=!0,i}function St(){this.i=null,this.l=null}V.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),bn&&bn(t)},(Ht.prototype=new Ie).__c=function(t,e){var r=e.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var i=Gi(n.__v),s=!1,o=function(){s||(s=!0,r.__R=null,i?i(a):a())};r.__R=o;var a=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=ji(c,c.__c.__P,c.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.o.pop();)d.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(o,o)},Ht.prototype.componentWillUnmount=function(){this.o=[]},Ht.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Wi(this.__b,r,n.__O=n.__P)}this.__b=null}var i=e.__a&&De(ce,null,t.fallback);return i&&(i.__u&=-33),[De(ce,null,e.__a?null:t.children),i]};var wn=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};function yl(t){return this.getChildContext=function(){return t.context},t.children}function vl(t){var e=this,r=t.h;if(e.componentWillUnmount=function(){ht(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),!e.v){for(var n=e.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(i,s){this.childNodes.push(i),e.h.insertBefore(i,s)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}ht(De(yl,{context:e.context},t.__v),e.v)}function _l(t,e){var r=De(vl,{__v:t,h:e});return r.containerInfo=e,r}(St.prototype=new Ie).__a=function(t){var e=this,r=Gi(e.__v),n=e.l.get(t);return n[0]++,function(i){var s=function(){e.props.revealOrder?(n.push(i),wn(e,t,n)):i()};r?r(s):s()}},St.prototype.render=function(t){this.i=null,this.l=new Map;var e=Ge(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},St.prototype.componentDidUpdate=St.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,r){wn(t,r,e)})};var qi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,bl=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,wl=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Sl=/[A-Z0-9]/g,xl=typeof document<"u",El=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Cl(t,e,r){return e.__k==null&&(e.textContent=""),ht(t,e),typeof r=="function"&&r(),t?t.__c:null}function kl(t,e,r){return pi(t,e),typeof r=="function"&&r(),t?t.__c:null}Ie.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Ie.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Sn=V.event;function Tl(){}function Al(){return this.cancelBubble}function Nl(){return this.defaultPrevented}V.event=function(t){return Sn&&(t=Sn(t)),t.persist=Tl,t.isPropagationStopped=Al,t.isDefaultPrevented=Nl,t.nativeEvent=t};var Yr,Il={enumerable:!1,configurable:!0,get:function(){return this.class}},xn=V.vnode;V.vnode=function(t){typeof t.type=="string"&&function(e){var r=e.props,n=e.type,i={},s=n.indexOf("-")===-1;for(var o in r){var a=r[o];if(!(o==="value"&&"defaultValue"in r&&a==null||xl&&o==="children"&&n==="noscript"||o==="class"||o==="className")){var c=o.toLowerCase();o==="defaultValue"&&"value"in r&&r.value==null?o="value":o==="download"&&a===!0?a="":c==="translate"&&a==="no"?a=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?o="ondblclick":c!=="onchange"||n!=="input"&&n!=="textarea"||El(r.type)?c==="onfocus"?o="onfocusin":c==="onblur"?o="onfocusout":wl.test(o)&&(o=c):c=o="oninput":s&&bl.test(o)?o=o.replace(Sl,"-$&").toLowerCase():a===null&&(a=void 0),c==="oninput"&&i[o=c]&&(o="oninputCapture"),i[o]=a}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Ge(r.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Ge(r.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),r.class&&!r.className?(i.class=r.class,Object.defineProperty(i,"className",Il)):(r.className&&!r.class||r.class&&r.className)&&(i.class=i.className=r.className),e.props=i}(t),t.$$typeof=qi,xn&&xn(t)};var En=V.__r;V.__r=function(t){En&&En(t),Yr=t.__c};var Cn=V.diffed;V.diffed=function(t){Cn&&Cn(t);var e=t.props,r=t.__e;r!=null&&t.type==="textarea"&&"value"in e&&e.value!==r.value&&(r.value=e.value==null?"":e.value),Yr=null};var Dl={ReactCurrentDispatcher:{current:{readContext:function(t){return Yr.__n[t.__c].props.value},useCallback:ct,useContext:er,useDebugValue:yi,useDeferredValue:Hi,useEffect:ee,useId:vi,useImperativeHandle:Lr,useInsertionEffect:zi,useLayoutEffect:rt,useMemo:Te,useReducer:$r,useRef:ve,useState:F,useSyncExternalStore:Fi,useTransition:Yi}}};function Pl(t){return De.bind(null,t)}function nr(t){return!!t&&t.$$typeof===qi}function $l(t){return nr(t)&&t.type===ce}function Ll(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function Rl(t){return nr(t)?gi.apply(null,arguments):t}function Ml(t){return!!t.__k&&(ht(null,t),!0)}function Ol(t){return t&&(t.base||t.nodeType===1&&t)||null}var Vl=function(t,e){return t(e)},Fl=function(t,e){return t(e)},Ul=ce,Hl=nr,Z={useState:F,useId:vi,useReducer:$r,useEffect:ee,useLayoutEffect:rt,useInsertionEffect:zi,useTransition:Yi,useDeferredValue:Hi,useSyncExternalStore:Fi,startTransition:Ui,useRef:ve,useImperativeHandle:Lr,useMemo:Te,useCallback:ct,useContext:er,useDebugValue:yi,version:"18.3.1",Children:pl,render:Cl,hydrate:kl,unmountComponentAtNode:Ml,createPortal:_l,createElement:De,createContext:Pr,createFactory:Pl,cloneElement:Rl,createRef:bs,Fragment:ce,isValidElement:nr,isElement:Hl,isFragment:$l,isMemo:Ll,findDOMNode:Ol,Component:Ie,PureComponent:Cr,memo:hl,forwardRef:Bi,flushSync:Fl,unstable_batchedUpdates:Vl,StrictMode:Ul,Suspense:Ht,SuspenseList:St,lazy:ml,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Dl},Pt=t=>t.type==="checkbox",et=t=>t instanceof Date,Ee=t=>t==null;const Ki=t=>typeof t=="object";var pe=t=>!Ee(t)&&!Array.isArray(t)&&Ki(t)&&!et(t),Yl=t=>pe(t)&&t.target?Pt(t.target)?t.target.checked:t.target.value:t,zl=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Bl=(t,e)=>t.has(zl(e)),Wl=t=>{const e=t.constructor&&t.constructor.prototype;return pe(e)&&e.hasOwnProperty("isPrototypeOf")},zr=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function be(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(zr&&(t instanceof Blob||n))&&(r||pe(t)))if(e=r?[]:{},!r&&!Wl(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=be(t[i]));else return t;return e}var ir=t=>/^\w*$/.test(t),ye=t=>t===void 0,Br=t=>Array.isArray(t)?t.filter(Boolean):[],Wr=t=>Br(t.replace(/["|']|\]/g,"").split(/\.|\[/)),N=(t,e,r)=>{if(!e||!pe(t))return r;const n=(ir(e)?[e]:Wr(e)).reduce((i,s)=>Ee(i)?i:i[s],t);return ye(n)||n===t?ye(t[e])?r:t[e]:n},Oe=t=>typeof t=="boolean",ae=(t,e,r)=>{let n=-1;const i=ir(e)?[e]:Wr(e),s=i.length,o=s-1;for(;++n<s;){const a=i[n];let c=r;if(n!==o){const d=t[a];c=pe(d)||Array.isArray(d)?d:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const kn={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Re={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Be={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jl=Z.createContext(null);jl.displayName="HookFormContext";var Gl=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Re.all&&(e._proxyFormState[o]=!n||Re.all),r&&(r[o]=!0),t[o]}});return i};const ql=typeof window<"u"?rt:ee;var He=t=>typeof t=="string",Kl=(t,e,r,n,i)=>He(t)?(n&&e.watch.add(t),N(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),N(r,s))):(n&&(e.watchAll=!0),r),Zl=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},Ct=t=>Array.isArray(t)?t:[t],Tn=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},kr=t=>Ee(t)||!Ki(t);function Je(t,e,r=new WeakSet){if(kr(t)||kr(e))return t===e;if(et(t)&&et(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(et(o)&&et(a)||pe(o)&&pe(a)||Array.isArray(o)&&Array.isArray(a)?!Je(o,a,r):o!==a)return!1}}return!0}var ke=t=>pe(t)&&!Object.keys(t).length,jr=t=>t.type==="file",Me=t=>typeof t=="function",qt=t=>{if(!zr)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Zi=t=>t.type==="select-multiple",Gr=t=>t.type==="radio",Jl=t=>Gr(t)||Pt(t),pr=t=>qt(t)&&t.isConnected;function Xl(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=ye(t)?n++:t[e[n++]];return t}function Ql(t){for(const e in t)if(t.hasOwnProperty(e)&&!ye(t[e]))return!1;return!0}function ge(t,e){const r=Array.isArray(e)?e:ir(e)?[e]:Wr(e),n=r.length===1?t:Xl(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(pe(n)&&ke(n)||Array.isArray(n)&&Ql(n))&&ge(t,r.slice(0,-1)),t}var Ji=t=>{for(const e in t)if(Me(t[e]))return!0;return!1};function Kt(t,e={}){const r=Array.isArray(t);if(pe(t)||r)for(const n in t)Array.isArray(t[n])||pe(t[n])&&!Ji(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Kt(t[n],e[n])):Ee(t[n])||(e[n]=!0);return e}function Xi(t,e,r){const n=Array.isArray(t);if(pe(t)||n)for(const i in t)Array.isArray(t[i])||pe(t[i])&&!Ji(t[i])?ye(e)||kr(r[i])?r[i]=Array.isArray(t[i])?Kt(t[i],[]):{...Kt(t[i])}:Xi(t[i],Ee(e)?{}:e[i],r[i]):r[i]=!Je(t[i],e[i]);return r}var bt=(t,e)=>Xi(t,e,Kt(e));const An={value:!1,isValid:!1},Nn={value:!0,isValid:!0};var Qi=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ye(t[0].attributes.value)?ye(t[0].value)||t[0].value===""?Nn:{value:t[0].value,isValid:!0}:Nn:An}return An},es=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ye(t)?t:e?t===""?NaN:t&&+t:r&&He(t)?new Date(t):n?n(t):t;const In={isValid:!1,value:null};var ts=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,In):In;function Dn(t){const e=t.ref;return jr(e)?e.files:Gr(e)?ts(t.refs).value:Zi(e)?[...e.selectedOptions].map(({value:r})=>r):Pt(e)?Qi(t.refs).value:es(ye(e.value)?t.ref.value:e.value,t)}var ec=(t,e,r,n)=>{const i={};for(const s of t){const o=N(e,s);o&&ae(i,s,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Zt=t=>t instanceof RegExp,wt=t=>ye(t)?t:Zt(t)?t.source:pe(t)?Zt(t.value)?t.value.source:t.value:t,Pn=t=>({isOnSubmit:!t||t===Re.onSubmit,isOnBlur:t===Re.onBlur,isOnChange:t===Re.onChange,isOnAll:t===Re.all,isOnTouch:t===Re.onTouched});const $n="AsyncFunction";var tc=t=>!!t&&!!t.validate&&!!(Me(t.validate)&&t.validate.constructor.name===$n||pe(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===$n)),rc=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Ln=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const kt=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=N(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(kt(a,e))break}else if(pe(a)&&kt(a,e))break}}};function Rn(t,e,r){const n=N(t,r);if(n||ir(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),o=N(e,s),a=N(t,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var nc=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return ke(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!n||Re.all))},ic=(t,e,r)=>!t||!e||t===e||Ct(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),sc=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,oc=(t,e)=>!Br(N(t,e)).length&&ge(t,e),ac=(t,e,r)=>{const n=Ct(N(t,r));return ae(n,"root",e[r]),ae(t,r,n),t},Yt=t=>He(t);function Mn(t,e,r="validate"){if(Yt(t)||Array.isArray(t)&&t.every(Yt)||Oe(t)&&!t)return{type:r,message:Yt(t)?t:"",ref:e}}var st=t=>pe(t)&&!Zt(t)?t:{value:t,message:""},On=async(t,e,r,n,i,s)=>{const{ref:o,refs:a,required:c,maxLength:d,minLength:h,min:u,max:f,pattern:g,validate:v,name:w,valueAsNumber:x,mount:T}=t._f,_=N(r,w);if(!T||e.has(w))return{};const P=a?a[0]:o,C=R=>{i&&P.reportValidity&&(P.setCustomValidity(Oe(R)?"":R||""),P.reportValidity())},S={},b=Gr(o),$=Pt(o),O=b||$,M=(x||jr(o))&&ye(o.value)&&ye(_)||qt(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,K=Zl.bind(null,w,n,S),W=(R,Y,L,H=Be.maxLength,j=Be.minLength)=>{const se=R?Y:L;S[w]={type:R?H:j,message:se,ref:o,...K(R?H:j,se)}};if(s?!Array.isArray(_)||!_.length:c&&(!O&&(M||Ee(_))||Oe(_)&&!_||$&&!Qi(a).isValid||b&&!ts(a).isValid)){const{value:R,message:Y}=Yt(c)?{value:!!c,message:c}:st(c);if(R&&(S[w]={type:Be.required,message:Y,ref:P,...K(Be.required,Y)},!n))return C(Y),S}if(!M&&(!Ee(u)||!Ee(f))){let R,Y;const L=st(f),H=st(u);if(!Ee(_)&&!isNaN(_)){const j=o.valueAsNumber||_&&+_;Ee(L.value)||(R=j>L.value),Ee(H.value)||(Y=j<H.value)}else{const j=o.valueAsDate||new Date(_),se=qe=>new Date(new Date().toDateString()+" "+qe),we=o.type=="time",Pe=o.type=="week";He(L.value)&&_&&(R=we?se(_)>se(L.value):Pe?_>L.value:j>new Date(L.value)),He(H.value)&&_&&(Y=we?se(_)<se(H.value):Pe?_<H.value:j<new Date(H.value))}if((R||Y)&&(W(!!R,L.message,H.message,Be.max,Be.min),!n))return C(S[w].message),S}if((d||h)&&!M&&(He(_)||s&&Array.isArray(_))){const R=st(d),Y=st(h),L=!Ee(R.value)&&_.length>+R.value,H=!Ee(Y.value)&&_.length<+Y.value;if((L||H)&&(W(L,R.message,Y.message),!n))return C(S[w].message),S}if(g&&!M&&He(_)){const{value:R,message:Y}=st(g);if(Zt(R)&&!_.match(R)&&(S[w]={type:Be.pattern,message:Y,ref:o,...K(Be.pattern,Y)},!n))return C(Y),S}if(v){if(Me(v)){const R=await v(_,r),Y=Mn(R,P);if(Y&&(S[w]={...Y,...K(Be.validate,Y.message)},!n))return C(Y.message),S}else if(pe(v)){let R={};for(const Y in v){if(!ke(R)&&!n)break;const L=Mn(await v[Y](_,r),P,Y);L&&(R={...L,...K(Y,L.message)},C(L.message),n&&(S[w]=R))}if(!ke(R)&&(S[w]={ref:P,...R},!n))return S}}return C(!0),S};const lc={mode:Re.onSubmit,reValidateMode:Re.onChange,shouldFocusError:!0};function cc(t={}){let e={...lc,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Me(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=pe(e.defaultValues)||pe(e.values)?be(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:be(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...h};const f={array:Tn(),state:Tn()},g=e.criteriaMode===Re.all,v=p=>m=>{clearTimeout(d),d=setTimeout(p,m)},w=async p=>{if(!e.disabled&&(h.isValid||u.isValid||p)){const m=e.resolver?ke((await $()).errors):await M(n,!0);m!==r.isValid&&f.state.next({isValid:m})}},x=(p,m)=>{!e.disabled&&(h.isValidating||h.validatingFields||u.isValidating||u.validatingFields)&&((p||Array.from(a.mount)).forEach(y=>{y&&(m?ae(r.validatingFields,y,m):ge(r.validatingFields,y))}),f.state.next({validatingFields:r.validatingFields,isValidating:!ke(r.validatingFields)}))},T=(p,m=[],y,A,k=!0,E=!0)=>{if(A&&y&&!e.disabled){if(o.action=!0,E&&Array.isArray(N(n,p))){const D=y(N(n,p),A.argA,A.argB);k&&ae(n,p,D)}if(E&&Array.isArray(N(r.errors,p))){const D=y(N(r.errors,p),A.argA,A.argB);k&&ae(r.errors,p,D),oc(r.errors,p)}if((h.touchedFields||u.touchedFields)&&E&&Array.isArray(N(r.touchedFields,p))){const D=y(N(r.touchedFields,p),A.argA,A.argB);k&&ae(r.touchedFields,p,D)}(h.dirtyFields||u.dirtyFields)&&(r.dirtyFields=bt(i,s)),f.state.next({name:p,isDirty:W(p,m),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ae(s,p,m)},_=(p,m)=>{ae(r.errors,p,m),f.state.next({errors:r.errors})},P=p=>{r.errors=p,f.state.next({errors:r.errors,isValid:!1})},C=(p,m,y,A)=>{const k=N(n,p);if(k){const E=N(s,p,ye(y)?N(i,p):y);ye(E)||A&&A.defaultChecked||m?ae(s,p,m?E:Dn(k._f)):L(p,E),o.mount&&w()}},S=(p,m,y,A,k)=>{let E=!1,D=!1;const X={name:p};if(!e.disabled){if(!y||A){(h.isDirty||u.isDirty)&&(D=r.isDirty,r.isDirty=X.isDirty=W(),E=D!==X.isDirty);const te=Je(N(i,p),m);D=!!N(r.dirtyFields,p),te?ge(r.dirtyFields,p):ae(r.dirtyFields,p,!0),X.dirtyFields=r.dirtyFields,E=E||(h.dirtyFields||u.dirtyFields)&&D!==!te}if(y){const te=N(r.touchedFields,p);te||(ae(r.touchedFields,p,y),X.touchedFields=r.touchedFields,E=E||(h.touchedFields||u.touchedFields)&&te!==y)}E&&k&&f.state.next(X)}return E?X:{}},b=(p,m,y,A)=>{const k=N(r.errors,p),E=(h.isValid||u.isValid)&&Oe(m)&&r.isValid!==m;if(e.delayError&&y?(c=v(()=>_(p,y)),c(e.delayError)):(clearTimeout(d),c=null,y?ae(r.errors,p,y):ge(r.errors,p)),(y?!Je(k,y):k)||!ke(A)||E){const D={...A,...E&&Oe(m)?{isValid:m}:{},errors:r.errors,name:p};r={...r,...D},f.state.next(D)}},$=async p=>{x(p,!0);const m=await e.resolver(s,e.context,ec(p||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return x(p),m},O=async p=>{const{errors:m}=await $(p);if(p)for(const y of p){const A=N(m,y);A?ae(r.errors,y,A):ge(r.errors,y)}else r.errors=m;return m},M=async(p,m,y={valid:!0})=>{for(const A in p){const k=p[A];if(k){const{_f:E,...D}=k;if(E){const X=a.array.has(E.name),te=k._f&&tc(k._f);te&&h.validatingFields&&x([A],!0);const Ae=await On(k,a.disabled,s,g,e.shouldUseNativeValidation&&!m,X);if(te&&h.validatingFields&&x([A]),Ae[E.name]&&(y.valid=!1,m))break;!m&&(N(Ae,E.name)?X?ac(r.errors,Ae,E.name):ae(r.errors,E.name,Ae[E.name]):ge(r.errors,E.name))}!ke(D)&&await M(D,m,y)}}return y.valid},K=()=>{for(const p of a.unMount){const m=N(n,p);m&&(m._f.refs?m._f.refs.every(y=>!pr(y)):!pr(m._f.ref))&&Q(p)}a.unMount=new Set},W=(p,m)=>!e.disabled&&(p&&m&&ae(s,p,m),!Je(qe(),i)),R=(p,m,y)=>Kl(p,a,{...o.mount?s:ye(m)?i:He(p)?{[p]:m}:m},y,m),Y=p=>Br(N(o.mount?s:i,p,e.shouldUnregister?N(i,p,[]):[])),L=(p,m,y={})=>{const A=N(n,p);let k=m;if(A){const E=A._f;E&&(!E.disabled&&ae(s,p,es(m,E)),k=qt(E.ref)&&Ee(m)?"":m,Zi(E.ref)?[...E.ref.options].forEach(D=>D.selected=k.includes(D.value)):E.refs?Pt(E.ref)?E.refs.forEach(D=>{(!D.defaultChecked||!D.disabled)&&(Array.isArray(k)?D.checked=!!k.find(X=>X===D.value):D.checked=k===D.value||!!k)}):E.refs.forEach(D=>D.checked=D.value===k):jr(E.ref)?E.ref.value="":(E.ref.value=k,E.ref.type||f.state.next({name:p,values:be(s)})))}(y.shouldDirty||y.shouldTouch)&&S(p,k,y.shouldTouch,y.shouldDirty,!0),y.shouldValidate&&Pe(p)},H=(p,m,y)=>{for(const A in m){if(!m.hasOwnProperty(A))return;const k=m[A],E=p+"."+A,D=N(n,E);(a.array.has(p)||pe(k)||D&&!D._f)&&!et(k)?H(E,k,y):L(E,k,y)}},j=(p,m,y={})=>{const A=N(n,p),k=a.array.has(p),E=be(m);ae(s,p,E),k?(f.array.next({name:p,values:be(s)}),(h.isDirty||h.dirtyFields||u.isDirty||u.dirtyFields)&&y.shouldDirty&&f.state.next({name:p,dirtyFields:bt(i,s),isDirty:W(p,E)})):A&&!A._f&&!Ee(E)?H(p,E,y):L(p,E,y),Ln(p,a)&&f.state.next({...r}),f.state.next({name:o.mount?p:void 0,values:be(s)})},se=async p=>{o.mount=!0;const m=p.target;let y=m.name,A=!0;const k=N(n,y),E=te=>{A=Number.isNaN(te)||et(te)&&isNaN(te.getTime())||Je(te,N(s,y,te))},D=Pn(e.mode),X=Pn(e.reValidateMode);if(k){let te,Ae;const Lt=m.type?Dn(k._f):Yl(p),Ze=p.type===kn.BLUR||p.type===kn.FOCUS_OUT,fs=!rc(k._f)&&!e.resolver&&!N(r.errors,y)&&!k._f.deps||sc(Ze,N(r.touchedFields,y),r.isSubmitted,X,D),lr=Ln(y,a,Ze);ae(s,y,Lt),Ze?(k._f.onBlur&&k._f.onBlur(p),c&&c(0)):k._f.onChange&&k._f.onChange(p);const cr=S(y,Lt,Ze),ps=!ke(cr)||lr;if(!Ze&&f.state.next({name:y,type:p.type,values:be(s)}),fs)return(h.isValid||u.isValid)&&(e.mode==="onBlur"?Ze&&w():Ze||w()),ps&&f.state.next({name:y,...lr?{}:cr});if(!Ze&&lr&&f.state.next({...r}),e.resolver){const{errors:Xr}=await $([y]);if(E(Lt),A){const gs=Rn(r.errors,n,y),Qr=Rn(Xr,n,gs.name||y);te=Qr.error,y=Qr.name,Ae=ke(Xr)}}else x([y],!0),te=(await On(k,a.disabled,s,g,e.shouldUseNativeValidation))[y],x([y]),E(Lt),A&&(te?Ae=!1:(h.isValid||u.isValid)&&(Ae=await M(n,!0)));A&&(k._f.deps&&Pe(k._f.deps),b(y,Ae,te,cr))}},we=(p,m)=>{if(N(r.errors,m)&&p.focus)return p.focus(),1},Pe=async(p,m={})=>{let y,A;const k=Ct(p);if(e.resolver){const E=await O(ye(p)?p:k);y=ke(E),A=p?!k.some(D=>N(E,D)):y}else p?(A=(await Promise.all(k.map(async E=>{const D=N(n,E);return await M(D&&D._f?{[E]:D}:D)}))).every(Boolean),!(!A&&!r.isValid)&&w()):A=y=await M(n);return f.state.next({...!He(p)||(h.isValid||u.isValid)&&y!==r.isValid?{}:{name:p},...e.resolver||!p?{isValid:y}:{},errors:r.errors}),m.shouldFocus&&!A&&kt(n,we,p?k:a.mount),A},qe=p=>{const m={...o.mount?s:i};return ye(p)?m:He(p)?N(m,p):p.map(y=>N(m,y))},it=(p,m)=>({invalid:!!N((m||r).errors,p),isDirty:!!N((m||r).dirtyFields,p),error:N((m||r).errors,p),isValidating:!!N(r.validatingFields,p),isTouched:!!N((m||r).touchedFields,p)}),or=p=>{p&&Ct(p).forEach(m=>ge(r.errors,m)),f.state.next({errors:p?r.errors:{}})},_t=(p,m,y)=>{const A=(N(n,p,{_f:{}})._f||{}).ref,k=N(r.errors,p)||{},{ref:E,message:D,type:X,...te}=k;ae(r.errors,p,{...te,...m,ref:A}),f.state.next({name:p,errors:r.errors,isValid:!1}),y&&y.shouldFocus&&A&&A.focus&&A.focus()},ar=(p,m)=>Me(p)?f.state.subscribe({next:y=>p(R(void 0,m),y)}):R(p,m,!0),$t=p=>f.state.subscribe({next:m=>{ic(p.name,m.name,p.exact)&&nc(m,p.formState||h,hs,p.reRenderRoot)&&p.callback({values:{...s},...r,...m})}}).unsubscribe,oe=p=>(o.mount=!0,u={...u,...p.formState},$t({...p,formState:u})),Q=(p,m={})=>{for(const y of p?Ct(p):a.mount)a.mount.delete(y),a.array.delete(y),m.keepValue||(ge(n,y),ge(s,y)),!m.keepError&&ge(r.errors,y),!m.keepDirty&&ge(r.dirtyFields,y),!m.keepTouched&&ge(r.touchedFields,y),!m.keepIsValidating&&ge(r.validatingFields,y),!e.shouldUnregister&&!m.keepDefaultValue&&ge(i,y);f.state.next({values:be(s)}),f.state.next({...r,...m.keepDirty?{isDirty:W()}:{}}),!m.keepIsValid&&w()},_e=({disabled:p,name:m})=>{(Oe(p)&&o.mount||p||a.disabled.has(m))&&(p?a.disabled.add(m):a.disabled.delete(m))},Ke=(p,m={})=>{let y=N(n,p);const A=Oe(m.disabled)||Oe(e.disabled);return ae(n,p,{...y||{},_f:{...y&&y._f?y._f:{ref:{name:p}},name:p,mount:!0,...m}}),a.mount.add(p),y?_e({disabled:Oe(m.disabled)?m.disabled:e.disabled,name:p}):C(p,!0,m.value),{...A?{disabled:m.disabled||e.disabled}:{},...e.progressive?{required:!!m.required,min:wt(m.min),max:wt(m.max),minLength:wt(m.minLength),maxLength:wt(m.maxLength),pattern:wt(m.pattern)}:{},name:p,onChange:se,onBlur:se,ref:k=>{if(k){Ke(p,m),y=N(n,p);const E=ye(k.value)&&k.querySelectorAll&&k.querySelectorAll("input,select,textarea")[0]||k,D=Jl(E),X=y._f.refs||[];if(D?X.find(te=>te===E):E===y._f.ref)return;ae(n,p,{_f:{...y._f,...D?{refs:[...X.filter(pr),E,...Array.isArray(N(i,p))?[{}]:[]],ref:{type:E.type,name:p}}:{ref:E}}}),C(p,!1,void 0,E)}else y=N(n,p,{}),y._f&&(y._f.mount=!1),(e.shouldUnregister||m.shouldUnregister)&&!(Bl(a.array,p)&&o.action)&&a.unMount.add(p)}}},$e=()=>e.shouldFocusError&&kt(n,we,a.mount),cs=p=>{Oe(p)&&(f.state.next({disabled:p}),kt(n,(m,y)=>{const A=N(n,y);A&&(m.disabled=A._f.disabled||p,Array.isArray(A._f.refs)&&A._f.refs.forEach(k=>{k.disabled=A._f.disabled||p}))},0,!1))},qr=(p,m)=>async y=>{let A;y&&(y.preventDefault&&y.preventDefault(),y.persist&&y.persist());let k=be(s);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:E,values:D}=await $();r.errors=E,k=be(D)}else await M(n);if(a.disabled.size)for(const E of a.disabled)ge(k,E);if(ge(r.errors,"root"),ke(r.errors)){f.state.next({errors:{}});try{await p(k,y)}catch(E){A=E}}else m&&await m({...r.errors},y),$e(),setTimeout($e);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ke(r.errors)&&!A,submitCount:r.submitCount+1,errors:r.errors}),A)throw A},us=(p,m={})=>{N(n,p)&&(ye(m.defaultValue)?j(p,be(N(i,p))):(j(p,m.defaultValue),ae(i,p,be(m.defaultValue))),m.keepTouched||ge(r.touchedFields,p),m.keepDirty||(ge(r.dirtyFields,p),r.isDirty=m.defaultValue?W(p,be(N(i,p))):W()),m.keepError||(ge(r.errors,p),h.isValid&&w()),f.state.next({...r}))},Kr=(p,m={})=>{const y=p?be(p):i,A=be(y),k=ke(p),E=k?i:A;if(m.keepDefaultValues||(i=y),!m.keepValues){if(m.keepDirtyValues){const D=new Set([...a.mount,...Object.keys(bt(i,s))]);for(const X of Array.from(D))N(r.dirtyFields,X)?ae(E,X,N(s,X)):j(X,N(E,X))}else{if(zr&&ye(p))for(const D of a.mount){const X=N(n,D);if(X&&X._f){const te=Array.isArray(X._f.refs)?X._f.refs[0]:X._f.ref;if(qt(te)){const Ae=te.closest("form");if(Ae){Ae.reset();break}}}}if(m.keepFieldsRef)for(const D of a.mount)j(D,N(E,D));else n={}}s=e.shouldUnregister?m.keepDefaultValues?be(i):{}:be(E),f.array.next({values:{...E}}),f.state.next({values:{...E}})}a={mount:m.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!m.keepIsValid||!!m.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:m.keepSubmitCount?r.submitCount:0,isDirty:k?!1:m.keepDirty?r.isDirty:!!(m.keepDefaultValues&&!Je(p,i)),isSubmitted:m.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:k?{}:m.keepDirtyValues?m.keepDefaultValues&&s?bt(i,s):r.dirtyFields:m.keepDefaultValues&&p?bt(i,p):m.keepDirty?r.dirtyFields:{},touchedFields:m.keepTouched?r.touchedFields:{},errors:m.keepErrors?r.errors:{},isSubmitSuccessful:m.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Zr=(p,m)=>Kr(Me(p)?p(s):p,m),ds=(p,m={})=>{const y=N(n,p),A=y&&y._f;if(A){const k=A.refs?A.refs[0]:A.ref;k.focus&&(k.focus(),m.shouldSelect&&Me(k.select)&&k.select())}},hs=p=>{r={...r,...p}},Jr={control:{register:Ke,unregister:Q,getFieldState:it,handleSubmit:qr,setError:_t,_subscribe:$t,_runSchema:$,_focusError:$e,_getWatch:R,_getDirty:W,_setValid:w,_setFieldArray:T,_setDisabledField:_e,_setErrors:P,_getFieldArray:Y,_reset:Kr,_resetDefaultValues:()=>Me(e.defaultValues)&&e.defaultValues().then(p=>{Zr(p,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:cs,_subjects:f,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(p){o=p},get _defaultValues(){return i},get _names(){return a},set _names(p){a=p},get _formState(){return r},get _options(){return e},set _options(p){e={...e,...p}}},subscribe:oe,trigger:Pe,register:Ke,handleSubmit:qr,watch:ar,setValue:j,getValues:qe,reset:Zr,resetField:us,clearErrors:or,unregister:Q,setError:_t,setFocus:ds,getFieldState:it};return{...Jr,formControl:Jr}}function rs(t={}){const e=Z.useRef(void 0),r=Z.useRef(void 0),[n,i]=Z.useState({isDirty:!1,isValidating:!1,isLoading:Me(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Me(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Me(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=cc(t);e.current={...a,formState:n}}const s=e.current.control;return s._options=t,ql(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),Z.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Z.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Z.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Z.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Z.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),Z.useEffect(()=>{t.values&&!Je(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Z.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Gl(n,s),e.current}const uc=`.email-form-wrapper{display:flex;flex-direction:column;gap:12px}.link{color:var(--al-color-primary);text-decoration:underline}.link:hover{color:var(--al-color-primary)}.checkbox-wrapper{display:flex;align-items:center;gap:4px;width:100%}.fullwidth-label{flex:1}.span-text{font-size:14px;font-weight:400}.email-form-error{color:var(--al-color-danger);font-size:14px;animation-name:errorShake;animation-timing-function:ease-in-out;animation-duration:1s;animation-fill-mode:both;animation-iteration-count:1;transform:translateY(110%)}
`,Ye=B.translate,Jt=({link:t})=>l("a",{target:"_blank",href:t,className:"link",children:Ye("terms and conditions")}),Xt=({link:t})=>l("a",{target:"_blank",href:t,className:"link",children:Ye("privacy policy")}),dc=({language:t,privacyPolicyLink:e,termsConditionsLink:r})=>{switch(t){case"ja":return l("span",{className:"span-text",children:[l(Jt,{link:r}),Ye("and"),l(Xt,{link:e}),Ye("I agree to the")]});default:return l("span",{className:"span-text",children:[Ye("I agree to the")," ",l(Jt,{link:r})," ",Ye("and")," ",l(Xt,{link:e})]})}},hc=({language:t,link:e})=>{switch(t){case"ja":return l("span",{className:"span-text",children:[l(Xt,{link:e})," ",Ye("I agree to the")]});default:return l("span",{className:"span-text",children:[Ye("I agree to the")," ",l(Xt,{link:e})]})}},fc=({language:t,link:e})=>{switch(t){case"ja":return l("span",{className:"span-text",children:[l(Jt,{link:e})," ",Ye("I agree to the")]});default:return l("span",{className:"span-text",children:[Ye("I agree to the")," ",l(Jt,{link:e})]})}},pc=({consentRef:t,disableConsentError:e,showBoth:r,showPrivacy:n,showTerms:i,privacyPolicyLink:s,termsConditionsLink:o,consentErr:a})=>{const c=B.translate;return l("div",{children:[l("div",{className:"checkbox-wrapper",children:l("label",{className:"forCheckbox fullwidth-label",children:[(r||n||i)&&l("div",{children:l("input",{onChange:d=>{var h;a&&((h=d.target)==null?void 0:h.checked)===!0&&e()},type:"checkbox",ref:t})}),r&&l(dc,{language:B.getLanguage(),privacyPolicyLink:s,termsConditionsLink:o}),n&&l(hc,{language:B.getLanguage(),link:s}),i&&l(fc,{language:B.getLanguage(),link:o})]})}),a&&l("span",{className:"email-form-error",children:c("You must check this box to continue.")})]})},gc=()=>{var $,O;const t=B.translate,{shadowDom:e,currentPage:r,resetHeight:n}=ne();Ce(e,uc,"emailCapture");const[i,s]=F(!1),o=ve(null),{handleSubmit:a,buttonText:c,skippable:d}=ie(),h=(($=r.questionSettings)==null?void 0:$.privacyPolicy)??{},u=((O=r.questionSettings)==null?void 0:O.termsConditions)??{};let f=!1,g=!1,v=!1,w=!1;(h.enabled||u.enabled)&&(f=!0),h.enabled&&u.enabled?g=!0:h.enabled?v=!0:u.enabled&&(w=!0);const x=h.link||document.referrer,T=u.link||document.referrer,{register:_,handleSubmit:P,formState:{errors:C}}=rs(),S=M=>{if(f&&!o.current.checked)d?a():s(!0);else{const K=M.email.trim();K===""?d&&a():a({value:K})}};ee(()=>{n()},[i,C]);const b={pattern:{value:/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:t("This is invalid")},required:{value:!d,message:t("This is required")}};return l(ce,{children:[l("div",{className:"mb email-form-wrapper",children:[l("form",{onSubmit:M=>{M.preventDefault(),P(S)()},children:l("div",{className:"input-wrap",children:[d&&l("span",{className:"optional",children:t("Optional")}),l("label",{htmlFor:"email",children:t("Email")}),l("input",{..._("email",b),className:C.email?"has-error":"",type:"email",id:"email",name:"email",autoComplete:"on",placeholder:"email@mydomain.com"}),C.email&&l("span",{className:"email-form-error",children:t(C.email.message)})]})}),f&&l(pc,{showBoth:g,showPrivacy:v,showTerms:w,privacyPolicyLink:x,termsConditionsLink:T,consentRef:o,currentPage:r,disableConsentError:()=>s(!1),consentErr:i})]}),l(fe,{buttonAction:P(S),text:c})]})},mc=()=>{const{metadata:t,handleSubmit:e}=ie();return ee(()=>{t?Hr("ASKLAYER_FETCH_METADATA",{dataSource:t.dataSource,variableName:t.variableName}):e()},[]),ee(()=>{window.addEventListener("message",r=>{r.data.type==="SEND_METADATA"&&(r.data.value?e({value:r.data.value}):e())})},[]),null},yc=`.multiple-choice-container{position:relative;margin-bottom:28px}.multiple-choice-item{display:flex;flex-direction:row;align-items:center;margin-bottom:.8em}.multiple-choice-item input[type=radio]{flex-shrink:0;margin-right:1em;cursor:pointer}.multiple-choice-item label{margin-top:-5px;cursor:pointer}.multiple-choice-item label span{font-size:var(--al-body-font-size)}.multiple-choice-item input[type=text]{margin-bottom:0;margin-top:5px;border-radius:var(--al-border-radius) 0 0 var(--al-border-radius)}.multiple-choice-item input[type=text]:disabled{background:var(--al-light-neutral);border-color:var(--al-light-neutral)}.multiple-choice-item .al-btn{border-radius:0 var(--al-border-radius) var(--al-border-radius) 0;min-height:39px}
`,vc=()=>{const t=B.translate,{shuffledChoices:e,skippable:r,handleSubmit:n}=ie(),{shadowDom:i}=ne();Ce(i,yc,"multipleChoice");const s=ve(null),[o,a]=F(!1),[c,d]=F(e.map(f=>({...f,checked:!1}))),h=f=>{a(!1),d(g=>{const v=[...g];return v[f]={...v[f],checked:!g[f].checked},v})},u=()=>{var g;const f=c.filter(v=>v.checked);if(f.length===0)r?n():a(!0);else{const v=((g=f.find(x=>{var T;return(T=x.goto)==null?void 0:T.enabled}))==null?void 0:g.goto)??null,w=Pi(f);n({goto:v,actions:w,value:f.map(x=>x.value)})}};return ee(()=>{d(e)},[e]),l("div",{className:"multiple-choice transition300ms",children:[l("div",{className:"multiple-choice-container",children:[c.map((f,g)=>l("div",{className:"multiple-choice-item",children:[l("input",{type:"checkbox",ref:s,value:f.checked,onChange:()=>h(g),id:`${g}-${f.value}`}),l("label",{htmlFor:`${g}-${f.value}`,children:l("span",{children:f.value})})]},`sc-${g}`)),o&&l("span",{className:"form-error",children:t("You must check at least one to continue.")})]}),l(fe,{text:t("Next"),buttonAction:u})]})},_c=`.scaleWrapper{display:flex;flex-direction:column;gap:8px}.scaleItem{padding:6px 0;line-height:1em;background:var(--al-grey);border-radius:var(--al-border-radius);text-align:center;font-size:14px;width:100%;transition:all .3s;cursor:pointer}@media (hover: hover){.scaleItem:hover{background:var(--al-light-neutral)}}.scaleItem-hover{background:var(--al-light-neutral)}.scaleText{color:var(--al-text-muted);width:100%;display:flex;justify-content:space-between;padding:5px 0 0;font-size:14px}
`,bc=()=>{const t=B.translate,{shadowDom:e}=ne(),{handleSubmit:r,scaleMax:n,leftText:i="Not likely",rightText:s="Very likely",skippable:o,isNps:a}=ie();Ce(e,_c,"numberScale");const c={gridTemplateCols:a?11:n,scaleMin:a?0:1,scaleMax:a?10:n};return l("div",{className:"scaleWrapper",children:[l("div",{children:[l("div",{style:{display:"grid",gridTemplateColumns:`repeat(${c.gridTemplateCols}, 1fr)`,gridTemplateRows:"1fr",gridColumnGap:"3px",gridRowGap:"0px"},children:Pa(c.scaleMin,c.scaleMax).map(d=>l("div",{className:"scaleItem",onClick:()=>r({value:d}),onTouchStart:h=>{const u=h.currentTarget;u&&u.classList.add("scaleItem-hover")},onTouchEnd:h=>{const u=h.currentTarget;u&&u.classList.remove("scaleItem-hover")},children:d},`NPS-${a}-ScaleItem-${d}`))}),l("div",{className:"scaleText",children:[l("div",{children:i}),l("div",{children:s})]})]}),o&&l(fe,{text:t("Next"),buttonAction:()=>r()})]})},wc=()=>{const t=B.translate,{skippable:e,handleSubmit:r}=ie(),{currentPage:n}=ne(),[i,s]=F(!1),[o,a]=F(""),c=Te(()=>n==null?void 0:n.questionSettings,[n]),d=()=>{const h=o.trim();h===""?e?r():s(!0):r({value:h})};return l("div",{className:"single-choice transition300ms",children:[l("div",{className:"number-form",children:[l("div",{className:"position-relative",children:[l("div",{className:"label-box position-relative",children:e&&l("span",{className:"number-input-optional",children:t("Optional")})}),l("input",{type:"number",name:"number-form",className:"number-form-container",id:"number-form",placeholder:(c==null?void 0:c.placeholder)??"",onChange:h=>{const u=h.target;a(u.value),s(!1)}}),i&&l("span",{className:"form-error",children:t("This is required")})]}),l("div",{className:"pt-12",children:l(fe,{text:t("Next"),buttonAction:()=>d()})})]}),l("style",{jsx:!0,children:`
        .pt-12 {
          padding-top: 12px;
        }
        .position-relative {
          position: relative;
        }
        .number-form {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }
        .number-form-container {
          box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.03);
          padding: 0.5em;
          border-radius: 6px;
          border: 2px solid var(--al-grey);
          width: 100%;
          font-size: var(--al-body-font-size);
          transition: border 0.3s;
          line-height: 1em;
        }
        .number-form-container:focus {
          outline: none;
          border-color: var(--al-color-primary);
        }
        .label-box {
          display: flex;
          justify-content: space-between;
          flex-direction: row-reverse;
        }
        .number-input-optional {
          text-align: right;
          color: var(--al-text-muted);
          font-size: 14px;
          font-weight: 500;
        }
      `})]})};var vt=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["Andorra","ad","376"],["Angola","ao","244"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54","(..) ........",0],["Armenia","am","374",".. ......"],["Aruba","aw","297"],["Australia","au","61",{default:". .... ....","/^4/":"... ... ...","/^5(?!50)/":"... ... ...","/^1(3|8)00/":".... ... ...","/^13/":".. .. ..","/^180/":"... ...."},0,[]],["Austria","at","43"],["Azerbaijan","az","994","(..) ... .. .."],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375","(..) ... .. .."],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55","(..) .....-...."],["British Indian Ocean Territory","io","246"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599","",1],["Cayman Islands","ky","1","... ... ....",4,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","... .... ...."],["Colombia","co","57","... ... ...."],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Costa Rica","cr","506","....-...."],["Côte d'Ivoire","ci","225",".. .. .. .. .."],["Croatia","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599","",0],["Cyprus","cy","357",".. ......"],["Czech Republic","cz","420","... ... ..."],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253",".. .. ...."],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372",".... ......"],["Ethiopia","et","251",".. ... ...."],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["France","fr","33",". .. .. .. .."],["French Guiana","gf","594"],["French Polynesia","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49","... ........."],["Ghana","gh","233"],["Greece","gr","30"],["Greenland","gl","299",".. .. .."],["Grenada","gd","1473"],["Guadeloupe","gp","590","",0],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["India","in","91",".....-....."],["Indonesia","id","62"],["Iran","ir","98","... ... ...."],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972","... ... ...."],["Italy","it","39","... .......",0],["Jamaica","jm","1876"],["Japan","jp","81",".. .... ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-..",0],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996","... ... ..."],["Laos","la","856"],["Latvia","lv","371",".. ... ..."],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mayotte","yt","262","",1,["269","639"]],["Mexico","mx","52","... ... ....",0],["Micronesia","fm","691"],["Moldova","md","373","(..) ..-..-.."],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",{"/^06/":"(.). .........","/^6/":". .........","/^0(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":"(.).. ........","/^(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":".. ........","/^0/":"(.)... .......",default:"... ......."}],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["North Korea","kp","850"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63","... ... ...."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",3,["787","939"]],["Qatar","qa","974"],["Réunion","re","262","",0],["Romania","ro","40"],["Russia","ru","7","(...) ...-..-..",1],["Rwanda","rw","250"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82","... .... ...."],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46","... ... ..."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Tuvalu","tv","688"],["Uganda","ug","256"],["Ukraine","ua","380","(..) ... .. .."],["United Arab Emirates","ae","971"],["United Kingdom","gb","44",".... ......"],["United States","us","1","(...) ...-....",0],["Uruguay","uy","598"],["Uzbekistan","uz","998",".. ... .. .."],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ....",1],["Venezuela","ve","58"],["Vietnam","vn","84"],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],Sc="react-international-phone-",ns=(...t)=>t.filter(e=>!!e).join(" ").trim(),xc=(...t)=>ns(...t).split(" ").map(e=>`${Sc}${e}`).join(" "),xe=({addPrefix:t,rawClassNames:e})=>ns(xc(...t),...e),Ec=({value:t,mask:e,maskSymbol:r,offset:n=0,trimNonMaskCharsLeftover:i=!1})=>{if(t.length<n)return t;let s=t.slice(0,n),o=t.slice(n),a=s,c=0;for(let d of e.split("")){if(c>=o.length){if(!i&&d!==r){a+=d;continue}break}d===r?(a+=o[c],c+=1):a+=d}return a},at=t=>t?/^\d+$/.test(t):!1,sr=t=>t.replace(/\D/g,""),Cc=(t,e)=>{let r=t.style.display;r!=="block"&&(t.style.display="block");let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=i.top-n.top,o=n.bottom-i.bottom;s>=0&&o>=0||(Math.abs(s)<Math.abs(o)?t.scrollTop+=s:t.scrollTop-=o),t.style.display=r},kc=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("macintosh"),Tc=(t,e)=>{let r=e.disableDialCodeAndPrefix?!1:e.forceDialCode,n=e.disableDialCodeAndPrefix?!1:e.insertDialCodeOnEmpty,i=t,s=d=>e.trimNonDigitsEnd?d.trim():d;if(!i)return n&&!i.length||r?s(`${e.prefix}${e.dialCode}${e.charAfterDialCode}`):s(i);if(i=sr(i),i===e.dialCode&&!e.disableDialCodeAndPrefix)return s(`${e.prefix}${e.dialCode}${e.charAfterDialCode}`);if(e.dialCode.startsWith(i)&&!e.disableDialCodeAndPrefix)return s(r?`${e.prefix}${e.dialCode}${e.charAfterDialCode}`:`${e.prefix}${i}`);if(!i.startsWith(e.dialCode)&&!e.disableDialCodeAndPrefix){if(r)return s(`${e.prefix}${e.dialCode}${e.charAfterDialCode}`);if(i.length<e.dialCode.length)return s(`${e.prefix}${i}`)}let o=()=>{let d=e.dialCode.length,h=i.slice(0,d),u=i.slice(d);return{phoneLeftSide:h,phoneRightSide:u}},{phoneLeftSide:a,phoneRightSide:c}=o();return a=`${e.prefix}${a}${e.charAfterDialCode}`,c=Ec({value:c,mask:e.mask,maskSymbol:e.maskChar,trimNonMaskCharsLeftover:e.trimNonDigitsEnd||e.disableDialCodeAndPrefix&&c.length===0}),e.disableDialCodeAndPrefix&&(a=""),s(`${a}${c}`)},Ac=({phoneBeforeInput:t,phoneAfterInput:e,phoneAfterFormatted:r,cursorPositionAfterInput:n,leftOffset:i=0,deletion:s})=>{if(n<i)return i;if(!t)return r.length;let o=null;for(let h=n-1;h>=0;h-=1)if(at(e[h])){o=h;break}if(o===null){for(let h=0;h<e.length;h+=1)if(at(r[h]))return h;return e.length}let a=0;for(let h=0;h<o;h+=1)at(e[h])&&(a+=1);let c=0,d=0;for(let h=0;h<r.length&&(c+=1,at(r[h])&&(d+=1),!(d>=a+1));h+=1);if(s!=="backward")for(;!at(r[c])&&c<r.length;)c+=1;return c},zt=({phone:t,prefix:e})=>t?`${e}${sr(t)}`:"";function Tr({value:t,country:e,insertDialCodeOnEmpty:r,trimNonDigitsEnd:n,countries:i,prefix:s,charAfterDialCode:o,forceDialCode:a,disableDialCodeAndPrefix:c,defaultMask:d,countryGuessingEnabled:h,disableFormatting:u}){let f=t;c&&(f=f.startsWith(`${s}`)?f:`${s}${e.dialCode}${f}`);let g=h?Vc({phone:f,countries:i,currentCountryIso2:e==null?void 0:e.iso2}):void 0,v=(g==null?void 0:g.country)??e,w=Tc(f,{prefix:s,mask:Mc({phone:f,country:v,defaultMask:d,disableFormatting:u}),maskChar:is,dialCode:v.dialCode,trimNonDigitsEnd:n,charAfterDialCode:o,forceDialCode:a,insertDialCodeOnEmpty:r,disableDialCodeAndPrefix:c}),x=h&&!(g!=null&&g.fullDialCodeMatch)?e:v;return{phone:zt({phone:c?`${x.dialCode}${w}`:w,prefix:s}),inputValue:w,country:x}}var Nc=t=>{if((t==null?void 0:t.toLocaleLowerCase().includes("delete"))??!1)return t!=null&&t.toLocaleLowerCase().includes("forward")?"forward":"backward"},Ic=(t,{country:e,insertDialCodeOnEmpty:r,phoneBeforeInput:n,prefix:i,charAfterDialCode:s,forceDialCode:o,disableDialCodeAndPrefix:a,countryGuessingEnabled:c,defaultMask:d,disableFormatting:h,countries:u})=>{let f=t.nativeEvent,g=f.inputType,v=Nc(g),w=!!(g!=null&&g.startsWith("insertFrom")),x=g==="insertText",T=(f==null?void 0:f.data)||void 0,_=t.target.value,P=t.target.selectionStart??0;if(g!=null&&g.includes("history"))return{inputValue:n,phone:zt({phone:n,prefix:i}),cursorPosition:n.length,country:e};if(x&&!at(T)&&_!==i)return{inputValue:n,phone:zt({phone:a?`${e.dialCode}${n}`:n,prefix:i}),cursorPosition:P-((T==null?void 0:T.length)??0),country:e};if(o&&!_.startsWith(`${i}${e.dialCode}`)&&!w){let O=_?n:`${i}${e.dialCode}${s}`;return{inputValue:O,phone:zt({phone:O,prefix:i}),cursorPosition:i.length+e.dialCode.length+s.length,country:e}}let{phone:C,inputValue:S,country:b}=Tr({value:_,country:e,trimNonDigitsEnd:v==="backward",insertDialCodeOnEmpty:r,countryGuessingEnabled:c,countries:u,prefix:i,charAfterDialCode:s,forceDialCode:o,disableDialCodeAndPrefix:a,disableFormatting:h,defaultMask:d}),$=Ac({cursorPositionAfterInput:P,phoneBeforeInput:n,phoneAfterInput:_,phoneAfterFormatted:S,leftOffset:o?i.length+e.dialCode.length+s.length:0,deletion:v});return{phone:C,inputValue:S,cursorPosition:$,country:b}},Dc=(t,e)=>{let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i of r)if(t[i]!==e[i])return!1;return!0},Pc=()=>{let t=ve(),e=ve(Date.now());return{check:()=>{let r=Date.now(),n=t.current?r-e.current:void 0;return t.current=e.current,e.current=r,n}}},$c={size:20,overrideLastItemDebounceMS:-1};function Lc(t,e){let{size:r,overrideLastItemDebounceMS:n,onChange:i}={...$c,...e},[s,o]=F(t),[a,c]=F([s]),[d,h]=F(0),u=Pc();return[s,(f,g)=>{if(typeof f=="object"&&typeof s=="object"&&Dc(f,s)||f===s)return;let v=n>0,w=u.check(),x=v&&w!==void 0?w>n:!0;if((g==null?void 0:g.overrideLastItem)!==void 0?g.overrideLastItem:!x)c(T=>[...T.slice(0,d),f]);else{let T=a.length>=r;c(_=>[..._.slice(T?1:0,d+1),f]),T||h(_=>_+1)}o(f),i==null||i(f)},()=>{if(d<=0)return{success:!1};let f=a[d-1];return o(f),h(g=>g-1),i==null||i(f),{success:!0,value:f}},()=>{if(d+1>=a.length)return{success:!1};let f=a[d+1];return o(f),h(g=>g+1),i==null||i(f),{success:!0,value:f}}]}var is=".",Ne={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,disableFormatting:!1,countries:vt,preferredCountries:[]},Rc=({defaultCountry:t=Ne.defaultCountry,value:e=Ne.value,countries:r=Ne.countries,prefix:n=Ne.prefix,defaultMask:i=Ne.defaultMask,charAfterDialCode:s=Ne.charAfterDialCode,historySaveDebounceMS:o=Ne.historySaveDebounceMS,disableCountryGuess:a=Ne.disableCountryGuess,disableDialCodePrefill:c=Ne.disableDialCodePrefill,forceDialCode:d=Ne.forceDialCode,disableDialCodeAndPrefix:h=Ne.disableDialCodeAndPrefix,disableFormatting:u=Ne.disableFormatting,onChange:f,inputRef:g})=>{let v={countries:r,prefix:n,charAfterDialCode:s,forceDialCode:h?!1:d,disableDialCodeAndPrefix:h,defaultMask:i,countryGuessingEnabled:!a,disableFormatting:u},w=ve(null),x=g||w,T=L=>{Promise.resolve().then(()=>{var H;typeof window>"u"||x.current!==(document==null?void 0:document.activeElement)||((H=x.current)==null||H.setSelectionRange(L,L))})},[{phone:_,inputValue:P,country:C},S,b,$]=Lc(()=>{let L=lt({value:t,field:"iso2",countries:r});L||console.error(`[react-international-phone]: can not find a country with "${t}" iso2 code`);let H=L||lt({value:"us",field:"iso2",countries:r}),{phone:j,inputValue:se,country:we}=Tr({value:e,country:H,insertDialCodeOnEmpty:!c,...v});return T(se.length),{phone:j,inputValue:se,country:we.iso2}},{overrideLastItemDebounceMS:o,onChange:({inputValue:L,phone:H,country:j})=>{if(!f)return;let se=O(j);f({phone:H,inputValue:L,country:se})}}),O=ct(L=>lt({value:L,field:"iso2",countries:r}),[r]),M=Te(()=>O(C),[C,O]);ee(()=>{let L=x.current;if(!L)return;let H=j=>{if(!j.key)return;let se=j.ctrlKey,we=j.metaKey,Pe=j.shiftKey;if(j.key.toLowerCase()==="z"){if(kc()){if(!we)return}else if(!se)return;Pe?$():b()}};return L.addEventListener("keydown",H),()=>{L.removeEventListener("keydown",H)}},[x,b,$]);let K=L=>{L.preventDefault();let{phone:H,inputValue:j,country:se,cursorPosition:we}=Ic(L,{country:M,phoneBeforeInput:P,insertDialCodeOnEmpty:!1,...v});return S({inputValue:j,phone:H,country:se.iso2}),T(we),e},W=(L,H={focusOnInput:!1})=>{let j=lt({value:L,field:"iso2",countries:r});if(!j){console.error(`[react-international-phone]: can not find a country with "${L}" iso2 code`);return}let se=h?"":`${n}${j.dialCode}${s}`;S({inputValue:se,phone:`${n}${j.dialCode}`,country:j.iso2}),H.focusOnInput&&Promise.resolve().then(()=>{var we;(we=x.current)==null||we.focus()})},[R,Y]=F(!1);return ee(()=>{if(!R){Y(!0),e!==_&&(f==null||f({inputValue:P,phone:_,country:M}));return}if(e===_)return;let{phone:L,inputValue:H,country:j}=Tr({value:e,country:M,insertDialCodeOnEmpty:!c,...v});S({phone:L,inputValue:H,country:j.iso2})},[e]),{phone:_,inputValue:P,country:M,setCountry:W,handlePhoneValueChange:K,inputRef:x}},Mc=({phone:t,country:e,defaultMask:r="............",disableFormatting:n=!1})=>{let i=e.format,s=a=>n?a.replace(new RegExp(`[^${is}]`,"g"),""):a;if(!i)return s(r);if(typeof i=="string")return s(i);if(!i.default)return console.error(`[react-international-phone]: default mask for ${e.iso2} is not provided`),s(r);let o=Object.keys(i).find(a=>{if(a==="default")return!1;if(!(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"))return console.error(`[react-international-phone]: format regex "${a}" for ${e.iso2} is not valid`),!1;let c=new RegExp(a.substring(1,a.length-1)),d=t.replace(e.dialCode,"");return c.test(sr(d))});return s(o?i[o]:i.default)},Ve=t=>{let[e,r,n,i,s,o]=t;return{name:e,iso2:r,dialCode:n,format:i,priority:s,areaCodes:o}},Oc=t=>`Field "${t}" is not supported`,lt=({field:t,value:e,countries:r=vt})=>{if(["priority"].includes(t))throw new Error(Oc(t));let n=r.find(i=>{let s=Ve(i);return e===s[t]});if(n)return Ve(n)},Vc=({phone:t,countries:e=vt,currentCountryIso2:r})=>{var a;let n={country:void 0,fullDialCodeMatch:!1};if(!t)return n;let i=sr(t);if(!i)return n;let s=n,o=({country:c,fullDialCodeMatch:d})=>{var f,g;let h=c.dialCode===((f=s.country)==null?void 0:f.dialCode),u=(c.priority??0)<(((g=s.country)==null?void 0:g.priority)??0);(!h||u)&&(s={country:c,fullDialCodeMatch:d})};for(let c of e){let d=Ve(c),{dialCode:h,areaCodes:u}=d;if(i.startsWith(h)){let f=s.country?Number(h)>=Number(s.country.dialCode):!0;if(u){let g=i.substring(h.length);for(let v of u)if(g.startsWith(v))return{country:d,fullDialCodeMatch:!0}}(f||h===i||!s.fullDialCodeMatch)&&o({country:d,fullDialCodeMatch:!0})}s.fullDialCodeMatch||i.length<h.length&&h.startsWith(i)&&(!s.country||Number(h)<=Number(s.country.dialCode))&&o({country:d,fullDialCodeMatch:!1})}if(r){let c=lt({value:r,field:"iso2",countries:e});if(!c)return s;let d=c?(h=>{if(!(h!=null&&h.areaCodes))return!1;let u=i.substring(h.dialCode.length);return h.areaCodes.some(f=>f.startsWith(u))})(c):!1;s&&((a=s.country)==null?void 0:a.dialCode)===c.dialCode&&s.country!==c&&s.fullDialCodeMatch&&(!c.areaCodes||d)&&(s={country:c,fullDialCodeMatch:!0})}return s},Fc=(t,e)=>{let r=parseInt(t,16);return Number(r+e).toString(16)},Uc="abcdefghijklmnopqrstuvwxyz",Hc="1f1e6",Vn=Uc.split("").reduce((t,e,r)=>({...t,[e]:Fc(Hc,r)}),{}),Yc=t=>[Vn[t[0]],Vn[t[1]]].join("-"),ss=({iso2:t,size:e,src:r,protocol:n="https",disableLazyLoading:i,className:s,style:o,...a})=>{if(!t)return Z.createElement("img",{className:xe({addPrefix:["flag-emoji"],rawClassNames:[s]}),width:e,height:e,...a});let c=()=>{if(r)return r;let d=Yc(t);return`${n}://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/${d}.svg`};return Z.createElement("img",{className:xe({addPrefix:["flag-emoji"],rawClassNames:[s]}),src:c(),width:e,height:e,draggable:!1,"data-country":t,loading:i?void 0:"lazy",style:{width:e,height:e,...o},alt:"",...a})},zc=1e3,Bc=({show:t,dialCodePrefix:e="+",selectedCountry:r,countries:n=vt,preferredCountries:i=[],flags:s,onSelect:o,onClose:a,...c})=>{let d=ve(null),h=ve(),u=Te(()=>{if(!i||!i.length)return n;let b=[],$=[...n];for(let O of i){let M=$.findIndex(K=>Ve(K).iso2===O);if(M!==-1){let K=$.splice(M,1)[0];b.push(K)}}return b.concat($)},[n,i]),f=ve({updatedAt:void 0,value:""}),g=b=>{let $=f.current.updatedAt&&new Date().getTime()-f.current.updatedAt.getTime()>zc;f.current={value:$?b:`${f.current.value}${b}`,updatedAt:new Date};let O=u.findIndex(M=>Ve(M).name.toLowerCase().startsWith(f.current.value));O!==-1&&x(O)},v=ct(b=>u.findIndex($=>Ve($).iso2===b),[u]),[w,x]=F(v(r)),T=()=>{h.current!==r&&x(v(r))},_=ct(b=>{x(v(b.iso2)),o==null||o(b)},[o,v]),P=b=>{let $=u.length-1,O=M=>b==="prev"?M-1:b==="next"?M+1:b==="last"?$:0;x(M=>{let K=O(M);return K<0?0:K>$?$:K})},C=b=>{if(b.stopPropagation(),b.key==="Enter"){b.preventDefault();let $=Ve(u[w]);_($);return}if(b.key==="Escape"){a==null||a();return}if(b.key==="ArrowUp"){b.preventDefault(),P("prev");return}if(b.key==="ArrowDown"){b.preventDefault(),P("next");return}if(b.key==="PageUp"){b.preventDefault(),P("first");return}if(b.key==="PageDown"){b.preventDefault(),P("last");return}b.key===" "&&b.preventDefault(),b.key.length===1&&!b.altKey&&!b.ctrlKey&&!b.metaKey&&g(b.key.toLocaleLowerCase())},S=ct(()=>{if(!d.current||w===void 0)return;let b=Ve(u[w]).iso2;if(b===h.current)return;let $=d.current.querySelector(`[data-country="${b}"]`);$&&(Cc(d.current,$),h.current=b)},[w,u]);return ee(()=>{S()},[w,S]),ee(()=>{d.current&&(t?d.current.focus():T())},[t]),ee(()=>{T()},[r]),Z.createElement("ul",{ref:d,role:"listbox",className:xe({addPrefix:["country-selector-dropdown"],rawClassNames:[c.className]}),style:{display:t?"block":"none",...c.style},onKeyDown:C,onBlur:a,tabIndex:-1,"aria-activedescendant":`react-international-phone__${Ve(u[w]).iso2}-option`},u.map((b,$)=>{let O=Ve(b),M=O.iso2===r,K=$===w,W=i.includes(O.iso2),R=$===i.length-1,Y=s==null?void 0:s.find(L=>L.iso2===O.iso2);return Z.createElement(Z.Fragment,{key:O.iso2},Z.createElement("li",{"data-country":O.iso2,role:"option","aria-selected":M,"aria-label":`${O.name} ${e}${O.dialCode}`,id:`react-international-phone__${O.iso2}-option`,className:xe({addPrefix:["country-selector-dropdown__list-item",W&&"country-selector-dropdown__list-item--preferred",M&&"country-selector-dropdown__list-item--selected",K&&"country-selector-dropdown__list-item--focused"],rawClassNames:[c.listItemClassName]}),onClick:()=>_(O),style:c.listItemStyle,title:O.name},Z.createElement(ss,{iso2:O.iso2,src:Y==null?void 0:Y.src,className:xe({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[c.listItemFlagClassName]}),style:c.listItemFlagStyle}),Z.createElement("span",{className:xe({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[c.listItemCountryNameClassName]}),style:c.listItemCountryNameStyle},O.name),Z.createElement("span",{className:xe({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[c.listItemDialCodeClassName]}),style:c.listItemDialCodeStyle},e,O.dialCode)),R?Z.createElement("hr",{className:xe({addPrefix:["country-selector-dropdown__preferred-list-divider"],rawClassNames:[c.preferredListDividerClassName]}),style:c.preferredListDividerStyle}):null)}))},Wc=({selectedCountry:t,onSelect:e,disabled:r,hideDropdown:n,countries:i=vt,preferredCountries:s=[],flags:o,renderButtonWrapper:a,...c})=>{let[d,h]=F(!1),u=Te(()=>{if(t)return lt({value:t,field:"iso2",countries:i})},[i,t]),f=ve(null),g=w=>{w.key&&["ArrowUp","ArrowDown"].includes(w.key)&&(w.preventDefault(),h(!0))},v=()=>{var T;let w={title:u==null?void 0:u.name,onClick:()=>h(_=>!_),onMouseDown:_=>_.preventDefault(),onKeyDown:g,disabled:n||r,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":d},x=Z.createElement("div",{className:xe({addPrefix:["country-selector-button__button-content"],rawClassNames:[c.buttonContentWrapperClassName]}),style:c.buttonContentWrapperStyle},Z.createElement(ss,{iso2:t,src:(T=o==null?void 0:o.find(_=>_.iso2===t))==null?void 0:T.src,className:xe({addPrefix:["country-selector-button__flag-emoji",r&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[c.flagClassName]}),style:{visibility:t?"visible":"hidden",...c.flagStyle}}),!n&&Z.createElement("div",{className:xe({addPrefix:["country-selector-button__dropdown-arrow",r&&"country-selector-button__dropdown-arrow--disabled",d&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[c.dropdownArrowClassName]}),style:c.dropdownArrowStyle}));return a?a({children:x,rootProps:w}):Z.createElement("button",{...w,type:"button",className:xe({addPrefix:["country-selector-button",d&&"country-selector-button--active",r&&"country-selector-button--disabled",n&&"country-selector-button--hide-dropdown"],rawClassNames:[c.buttonClassName]}),"data-country":t,style:c.buttonStyle},x)};return Z.createElement("div",{className:xe({addPrefix:["country-selector"],rawClassNames:[c.className]}),style:c.style,ref:f},v(),Z.createElement(Bc,{show:d,countries:i,preferredCountries:s,flags:o,onSelect:w=>{h(!1),e==null||e(w)},selectedCountry:t,onClose:()=>{h(!1)},...c.dropdownStyleProps}))},jc=({dialCode:t,prefix:e,disabled:r,style:n,className:i})=>Z.createElement("div",{className:xe({addPrefix:["dial-code-preview",r&&"dial-code-preview--disabled"],rawClassNames:[i]}),style:n},`${e}${t}`),Gc=Bi(({value:t,onChange:e,countries:r=vt,preferredCountries:n=[],hideDropdown:i,showDisabledDialCodeAndPrefix:s,disableFocusAfterCountrySelect:o,flags:a,style:c,className:d,inputStyle:h,inputClassName:u,countrySelectorStyleProps:f,dialCodePreviewStyleProps:g,inputProps:v,placeholder:w,disabled:x,name:T,onFocus:_,onBlur:P,required:C,autoFocus:S,...b},$)=>{let{phone:O,inputValue:M,inputRef:K,country:W,setCountry:R,handlePhoneValueChange:Y}=Rc({value:t,countries:r,...b,onChange:H=>{e==null||e(H.phone,{country:H.country,inputValue:H.inputValue})}}),L=b.disableDialCodeAndPrefix&&s&&(W==null?void 0:W.dialCode);return Lr($,()=>K.current?Object.assign(K.current,{setCountry:R,state:{phone:O,inputValue:M,country:W}}):null,[K,R,O,M,W]),Z.createElement("div",{ref:$,className:xe({addPrefix:["input-container"],rawClassNames:[d]}),style:c},Z.createElement(Wc,{onSelect:H=>R(H.iso2,{focusOnInput:!o}),flags:a,selectedCountry:W.iso2,countries:r,preferredCountries:n,disabled:x,hideDropdown:i,...f}),L&&Z.createElement(jc,{dialCode:W.dialCode,prefix:b.prefix??"+",disabled:x,...g}),Z.createElement("input",{onChange:Y,value:M,type:"tel",ref:K,className:xe({addPrefix:["input",x&&"input--disabled"],rawClassNames:[u]}),placeholder:w,disabled:x,style:h,name:T,onFocus:_,onBlur:P,autoFocus:S,required:C,...v}))});const qc=()=>{const t=B.translate,{skippable:e,handleSubmit:r}=ie(),[n,i]=F(!1),[s,o]=F(""),[a,c]=F(null),d=()=>{var h,u,f;if(!e){if(s.replace(`+${(h=a==null?void 0:a.country)==null?void 0:h.dialCode}`,"")===""||s===`+${(u=a==null?void 0:a.country)==null?void 0:u.dialCode}`){i(!0);return}r({value:s});return}s===`+${(f=a==null?void 0:a.country)==null?void 0:f.dialCode}`?r():r({value:s})};return l("div",{className:"single-choice transition300ms",children:[l("div",{className:"phone-form",children:[l("div",{className:"position-relative",children:[l("div",{className:"label-box position-relative",children:e&&l("span",{className:"date-input-optional",children:t("Optional")})}),l("div",{children:l(Gc,{defaultCountry:"jp",value:s,onChange:(h,u)=>{o(h),c(u)},className:"phone-input-container",inputClassName:"phone-input-form",countrySelectorStyleProps:{className:"country-selector-container"},inputProps:{onKeyDown:h=>{var g,v;const u="0123456789+()- ",f=((v=(g=a==null?void 0:a.country)==null?void 0:g.dialCode)==null?void 0:v.length)+11;if(!u.includes(h.key)&&!h.ctrlKey&&!["Backspace","ArrowLeft","ArrowRight","Tab"].includes(h.key)){h.preventDefault();return}s.length===f&&!["Backspace","ArrowLeft","ArrowRight","Tab"].includes(h.key)&&h.preventDefault()}}})}),n&&l("span",{className:"form-error",children:t("This is required")})]}),l("div",{className:"pt-12",children:l(fe,{text:t("Next"),buttonAction:()=>d()})})]}),l("style",{jsx:!0,children:`
        .pt-12 {
          padding-top: 12px;
        }
        .position-relative {
          position: relative;
        }
        .phone-form {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }
        .label-box {
          display: flex;
          justify-content: space-between;
          flex-direction: row-reverse;
        }
        .phone-input-container {
          box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.03);
          border-radius: 6px;
          border: 2px solid var(--al-grey);
          width: 100%;
          font-size: var(--al-body-font-size);
          transition: border 0.3s;
          line-height: 1em;
        }
        .phone-input-form {
          width: 100%;
          border: none !important;
          border-top-right-radius: 6px;
          border-bottom-right-radius: 6px;
        }
        .country-selector-container > button {
          border-radius: 6px 0 0 6px !important;
          border-right: 1px solid var(--al-grey);
          border-left: 0;
          border-bottom: 0;
          border-top: 0;
          padding: 0 4px;
        }
        .country-selector-container > ul {
          bottom: auto !important;
          top: 40px !important;
          height: 80px !important;
        }
        .date-input-optional {
          text-align: right;
          color: var(--al-text-muted);
          font-size: 14px;
          font-weight: 500;
        }
      `})]})},Kc=({choices:t,stats:e})=>{const[r,n]=F([]);function i(s){const o=s.reduce((a,c)=>a+c.count,0);return s.map(a=>({answer:a.answer,percentage:(a.count/o*100).toFixed()}))}return ee(()=>{e&&n(i(e))},[e]),l("div",{className:"stats-bars mb",children:t.map((s,o)=>{const a=`${o*200}ms`;let c={answer:s.value,count:0},d={answer:s.value,percentage:0};if(e){const h=e.find(f=>f.answer===s.value);h&&(c=h);const u=r.find(f=>f.answer===s.value);u&&(d=u)}return l("div",{className:"stats-bar",children:[l("div",{className:"stats-bar-label",children:c.answer}),l("div",{className:"stats-bar-count",children:c.count}),c.count>0&&l(ce,{children:[l("div",{className:"stats-bar-percentage",children:[d.percentage,"%"]}),l("div",{className:`stats-bar-fill ${c.answer===s?"highlight":""}`,style:{width:`${d.percentage!==0?d.percentage:0}%`,transitionDelay:a}})]})]},`sb-${o}`)})})},Zc=()=>{const t=B.translate,{currentPage:e}=ne(),{shuffledChoices:r,gotoTarget:n}=ie();return l("div",{className:"result-container",children:[l(Kc,{choices:r,stats:e.results}),l(fe,{text:t("Next"),gotoTarget:n})]})},os=[l(ce,{children:[l("path",{d:"M4331.6 934a1273.7 1273.7 0 0 0 375.5 0c44.6-7 89.8-52 97-96.5a1197.9 1197.9 0 0 0 0-364.7c-7.2-44.6-52.4-89.4-97-96.4a1273.9 1273.9 0 0 0-375.5 0c-44.6 7-89.8 51.8-97 96.4a1197.9 1197.9 0 0 0 0 364.7c7.2 44.6 52.4 89.4 97 96.4Z",style:{fill:"#f95943",fillRule:"nonzero"},transform:"translate(-4220.6 -362.4)"}),l("path",{d:"M4521.1 680.8h-.7c-28 0-55.6 12.4-77.6 34.8-24 24.5-40.6 60-48.1 102.5a24 24 0 0 0 23.6 28.2l202 .2a24 24 0 0 0 23.7-28.2c-14.1-83-62.3-137-122.9-137.5ZM4457 570.9c0-28.1-10.4-45.6-27-45.6-16.7 0-27 17.5-27 45.6 0 28 10.3 45.5 27 45.5 16.6 0 27-17.4 27-45.5Zm151.7-45.6c-16.7 0-27 17.5-27 45.6 0 28 10.3 45.5 27 45.5 16.6 0 27-17.4 27-45.5s-10.4-45.6-27-45.6Z",style:{fill:"#c11511",fillRule:"nonzero"},transform:"translate(-4220.6 -362.4)"})]}),l(ce,{children:[l("path",{d:"M3644.8 934a1273.7 1273.7 0 0 0 375.6 0c44.6-7 89.7-52 97-96.5a1197.9 1197.9 0 0 0 0-364.7c-7.3-44.6-52.4-89.4-97-96.4a1273.9 1273.9 0 0 0-375.6 0c-44.6 7-89.7 51.8-97 96.4a1197.9 1197.9 0 0 0 0 364.7c7.3 44.6 52.4 89.4 97 96.4Z",style:{fill:"#f47c2c",fillRule:"nonzero"},transform:"translate(-3533.9 -362.4)"}),l("path",{d:"M3743.3 616.4c16.6 0 27-17.4 27-45.5s-10.4-45.6-27-45.6c-16.7 0-27 17.5-27 45.6 0 28 10.3 45.5 27 45.5Zm178.7 0c16.6 0 27-17.4 27-45.5s-10.4-45.6-27-45.6c-16.7 0-27 17.5-27 45.6 0 28 10.3 45.5 27 45.5Zm-89.4 40.6c-75.4 0-153.3 49.2-156.4 143l-.3 8.3h35.8l.3-7.7c2.7-74 64.4-107.7 120.6-107.7 32 0 61.8 10.2 83.7 28.6a105.1 105.1 0 0 1 36.8 79.1l.3 7.7h35.8l-.3-8.2c-3-93.9-81-143-156.3-143Z",style:{fill:"#9b481e",fillRule:"nonzero"},transform:"translate(-3533.9 -362.4)"})]}),l(ce,{children:[l("path",{d:"M2958.1 934a1273.6 1273.6 0 0 0 375.5 0c44.7-7 89.8-52 97-96.5a1198.5 1198.5 0 0 0 0-364.7c-7.2-44.6-52.3-89.4-97-96.4a1273.8 1273.8 0 0 0-375.5 0c-44.6 7-89.8 51.8-97 96.4a1198.5 1198.5 0 0 0 0 364.7c7.2 44.6 52.4 89.4 97 96.4Z",style:{fill:"#efb42c",fillRule:"nonzero"},transform:"translate(-2847.2 -362.4)"}),l("path",{d:"M2322.2 709.1h273.9V746h-273.9zm47.6-92.7c16.7 0 27-17.4 27-45.5s-10.3-45.6-27-45.6c-16.6 0-27 17.5-27 45.6 0 28 10.4 45.5 27 45.5Zm178.7 0c16.7 0 27-17.4 27-45.5s-10.3-45.6-27-45.6-27 17.5-27 45.6c0 28 10.3 45.5 27 45.5Z",style:{fill:"#b25d08",fillRule:"nonzero"},transform:"matrix(1.03 0 0 1.03 -2229.7 -377.2)"})]}),l(ce,{children:[l("path",{d:"M2271.4 934a1273.6 1273.6 0 0 0 375.5 0c44.6-7 89.8-52 97-96.5a1198.5 1198.5 0 0 0 0-364.7c-7.2-44.6-52.4-89.5-97-96.4a1273.8 1273.8 0 0 0-375.5 0c-44.6 7-89.8 51.8-97 96.4a1198.5 1198.5 0 0 0 0 364.7c7.2 44.6 52.4 89.4 97 96.4Z",style:{fill:"#89dd4c",fillRule:"nonzero"},transform:"translate(-2160.4 -362.4)"}),l("path",{d:"M1875.1 681.5c-5.9 18.4-19.2 34-38.5 44.8a136 136 0 0 1-65.5 16h-.6c-23.4-.1-46-5.8-63.7-16a78.4 78.4 0 0 1-37-44.7l-5-15.9-35.2 11 5 15.9c16.2 52.3 69.5 86.3 135.8 86.5h.8c30 0 59.6-7.3 83.4-20.7a115.8 115.8 0 0 0 55.7-65.7l5-15.9-35-11.2-5.2 15.9Zm-192-65.1c16.7 0 27-17.4 27-45.5s-10.3-45.6-27-45.6-27 17.5-27 45.6c0 28 10.3 45.5 27 45.5Zm178.7 0c16.6 0 27-17.4 27-45.5s-10.4-45.6-27-45.6c-16.7 0-27 17.5-27 45.6 0 28 10.3 45.5 27 45.5Z",style:{fill:"#066d32",fillRule:"nonzero"},transform:"translate(-1473.8 -362.4)"})]}),l(ce,{children:[l("path",{d:"M898 934a1273.7 1273.7 0 0 0 375.5 0c44.6-7 89.8-52 97-96.5a1197.9 1197.9 0 0 0 0-364.7c-7.2-44.6-52.4-89.5-97-96.4a1273.9 1273.9 0 0 0-375.5 0c-44.7 7-89.8 51.8-97 96.4a1198.3 1198.3 0 0 0 0 364.7c7.2 44.6 52.3 89.4 97 96.4Z",style:{fill:"#52c3ef",fillRule:"nonzero"},transform:"translate(-787 -362.4)"}),l("path",{d:"m1201.3 699.6-231.3-.1c-4.3 0-8.4 2.3-11 6.1-2.5 4-3.3 9-2 13.6 15.2 54.4 65 89.8 126.8 90.1h.7c28 0 55.6-7.6 77.9-21.5a118.1 118.1 0 0 0 52-68.4c1.3-4.6.5-9.7-2-13.6-2.6-3.9-6.7-6.2-11-6.2Zm-204.9-83.2c16.6 0 27-17.4 27-45.5s-10.4-45.6-27-45.6c-16.7 0-27 17.5-27 45.6 0 28 10.3 45.5 27 45.5Zm178.6 0c16.7 0 27-17.4 27-45.5s-10.3-45.6-27-45.6c-16.6 0-27 17.5-27 45.6 0 28 10.4 45.5 27 45.5Z",style:{fill:"#025366",fillRule:"nonzero"},transform:"translate(-787 -362.4)"})]})],Jc=`.scaleWrapper{display:flex;flex-direction:column;gap:8px;position:relative}.scaleText{color:var(--al-text-muted);width:100%;display:flex;justify-content:space-between;padding:5px 0 0;font-size:14px}.emojiSvg{filter:grayscale(50%);transition:all .3s;transition-timing-function:cubic-bezier(.57,.49,.35,1.79);transform:scale(.85);max-width:90px;display:inline;cursor:pointer}@media (hover: hover){.emojiSvg:hover{filter:grayscale(0);transform:scale(1.1)}}.emojiSvg-hover{filter:grayscale(0);transform:scale(1.1)}
`,Xc=({index:t})=>{const{handleSubmit:e}=ie(),{shadowDom:r}=ne();return Ce(r,Jc,"satisfaction"),l("div",{onClick:()=>e({value:t+1}),children:l("svg",{className:"emojiSvg",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 598 586",onTouchStart:n=>{const i=n.currentTarget;i&&i.classList.add("emojiSvg-hover")},onTouchEnd:n=>{const i=n.currentTarget;i&&i.classList.remove("emojiSvg-hover")},children:os[t]})})},Qc=()=>{const t=B.translate,{leftText:e="Terrible",rightText:r="Wonderful",skippable:n,handleSubmit:i}=ie();return l("div",{className:"scaleWrapper",children:[l("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gridTemplateRows:"1fr",gridColumnGap:"3px",gridRowGap:"0px"},children:os.map((s,o)=>l(Xc,{index:o},`Satisfaction-Element-${o}`))}),l("div",{className:"scaleText",children:[l("div",{children:e}),l("div",{children:r})]}),n&&l(fe,{text:t("Next"),buttonAction:()=>i()})]})},eu=()=>{const{handleSubmit:t,buttonText:e,skippable:r,label:n}=ie(),i=B.translate,{register:s,handleSubmit:o,setError:a,formState:{errors:c}}=rs(),d=u=>{const f=u.shortAnswer.trim();f===""?r?t():a("shortAnswer",{message:i("This is required")}):t({value:f})},h={required:{value:!r,message:i("This is required")}};return l(ce,{children:[l("form",{onSubmit:u=>{u.preventDefault(),o(d)()},children:l("div",{className:"input-wrap mb",children:[(r||n)&&l("div",{children:[r&&l("span",{className:"optional",children:i("Optional")}),l("label",{htmlFor:"shortanswer",children:n})]}),l("textarea",{...s("shortAnswer",h),className:c.shortAnswer?"has-error":"",id:"shortanswer"}),c.shortAnswer&&l("span",{className:"form-error",children:c.shortAnswer.message})]})}),l(fe,{buttonAction:o(d),text:e,iconName:"chevron-right",iconOnLeft:!1,enableBackButton:!1})]})},tu=`.single-choice .form-error{position:absolute;bottom:0;left:36px;color:var(--al-color-danger);font-size:14px;animation-name:errorShake;animation-timing-function:ease-in-out;animation-duration:1s;animation-fill-mode:both;animation-iteration-count:1;transform:translateY(110%)}.single-choice-item{display:flex;flex-direction:row;align-items:center;margin-bottom:.8em}.single-choice-item input[type=radio]{flex-shrink:0;margin-right:1em;cursor:pointer}.single-choice-item label{margin-top:-5px;cursor:pointer}.single-choice-item label span{font-size:var(--al-body-font-size)}.single-choice-item input[type=text]{margin-bottom:0;margin-top:5px;border-radius:var(--al-border-radius) 0 0 var(--al-border-radius)}.single-choice-item input[type=text]:disabled{background:var(--al-light-neutral);border-color:var(--al-light-neutral)}.single-choice-item .al-btn{border-radius:0 var(--al-border-radius) var(--al-border-radius) 0;min-height:39px}
`,ru=()=>{const t=B.translate,{shadowDom:e}=ne(),{handleSubmit:r,shuffledChoices:n,skippable:i}=ie();Ce(e,tu,"singleChoice");const[s,o]=F(""),[a,c]=F(!1),d=ve(null),h=ve(null),u=()=>{h.current.checked=!0,d.current.focus()},f=g=>{o(g.target.value)};return l("div",{className:"single-choice",children:[n.map((g,v)=>l("div",{style:{position:"relative"},children:[g.custom&&g.enabled&&l(ce,{children:[l("div",{className:"single-choice-item",children:[l("input",{type:"radio",ref:h,name:"singleChoice"}),l("label",{onClick:u,children:l("input",{type:"text",placeholder:g.placeholder,ref:d,onChange:f})}),l("div",{className:"al-btn btn-primary",onClick:()=>{const w=s.trim();w?r({...g,value:w}):c(!0)},children:g.buttonText})]}),a&&l("span",{className:"form-error",children:t("You can't leave this empty")})]}),!g.custom&&l("div",{className:"single-choice-item",children:[l("input",{type:"radio",name:"singleChoice",id:`${v}-${g.value}`,value:g.value,onClick:w=>{const x=w.target;x.checked=!0,setTimeout(()=>{r(g)},100)}}),l("label",{htmlFor:`${v}-${g.value}`,children:l("span",{children:g.value})})]},`sc-${v}`)]},`SingleChoice-${g.value}-${v}`)),i&&l(fe,{text:t("Next"),buttonAction:()=>r()})]})},nu=()=>{var d;const t=B.translate,{currentPage:e}=ne(),{skippable:r,handleSubmit:n}=ie(),[i,s]=F(!1),[o,a]=F(""),c=()=>{const h=o.trim();h===""?r?n():s(!0):n({value:h})};return l("div",{className:"single-line transition300ms",children:[l("div",{className:"text-form",children:[l("div",{className:"position-relative",children:[l("div",{className:"label-box position-relative",children:r&&l("span",{className:"text-input-optional",children:t("Optional")})}),l("input",{type:"text",name:"text-form",className:"text-form-container",id:"text-form",placeholder:((d=e.questionSettings)==null?void 0:d.placeholder)??"",onChange:h=>{const u=h.target;a(u.value),s(!1)}}),i&&l("span",{className:"form-error",children:t("This is required")})]}),l("div",{className:"pt-12",children:l(fe,{text:t("Next"),buttonAction:()=>c()})})]}),l("style",{jsx:!0,children:`
        .pt-12 {
          padding-top: 12px;
        }
        .position-relative {
          position: relative;
        }
        .text-form {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }
        .text-form-container {
          box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.03);
          padding: 0.5em;
          border-radius: 6px;
          border: 2px solid var(--al-grey);
          width: 100%;
          font-size: var(--al-body-font-size);
          transition: border 0.3s;
          line-height: 1em;
        }
        .text-form-container:focus {
          outline: none;
          border-color: var(--al-color-primary);
        }
        .label-box {
          display: flex;
          justify-content: space-between;
          flex-direction: row-reverse;
        }
        .text-input-optional {
          text-align: right;
          color: var(--al-text-muted);
          font-size: 14px;
          font-weight: 500;
        }
      `})]})},gr=`.scaleWrapper{display:flex;flex-direction:column;gap:8px}.scaleText{color:var(--al-text-muted);width:100%;display:flex;justify-content:space-between;padding:5px 0 0;font-size:14px}.star{margin-top:-10px;filter:grayscale(100%);transition:all .3s;transition-timing-function:cubic-bezier(.57,.49,.35,1.79);transform:scale(.95);width:100%;max-width:90px;cursor:pointer}@media (hover: hover){.star:hover,.star:hover~.star{filter:grayscale(0);transform:scale(1.1)}}.star-hover,.star-hover~.star{filter:grayscale(0);transform:scale(1.1)}
`,iu=[5,4,3,2,1],su=({starNumber:t})=>{const{shadowDom:e}=ne(),{handleSubmit:r}=ie(),n=ve(null);return Ce(e,gr,"star"),l("svg",{ref:n,className:"star",onClick:()=>r({value:t}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onTouchStart:i=>{const s=i.currentTarget;s&&s.classList.add(gr["star-hover"])},onTouchEnd:i=>{const s=i.currentTarget;s&&s.classList.remove(gr["star-hover"])},children:l("path",{d:"m12 17.3 6.2 3.7-1.7-7L22 9.2l-7.2-.6L12 2 9.2 8.6 2 9.2 7.5 14l-1.7 7 6.2-3.7Z",fill:"gold"})})},ou=()=>{const t=B.translate,{leftText:e="Hate it",rightText:r="Love it",skippable:n,handleSubmit:i}=ie();return l("div",{className:"scaleWrapper",children:[l("div",{children:[l("div",{style:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between"},children:iu.map(s=>l(su,{starNumber:s},`star-element-${s}`))}),l("div",{className:"scaleText",children:[l("div",{children:e}),l("div",{children:r})]})]}),n&&l(fe,{text:t("Next"),buttonAction:()=>i()})]})},au=()=>{const{handleSubmit:t}=ie(),e=B.translate;return l(fe,{text:e("Next"),iconName:"chevron-right",iconOnLeft:!1,enableBackButton:!1,buttonAction:()=>t({value:"ASKLAYER_TEXT_SUBMIT"})})},lu=()=>{const{mainData:t}=ne(),{actions:e}=ie(),r=he.value;if(r==="LINK"||r==="EMAIL"||r==="POST_PURCHASE")return null;const n=B.translate,i=()=>{Ri(e),de.value!=="live-edit"&&Di(t.id)};return l(fe,{text:n("Close"),iconName:"check",buttonAction:i})},cu=`.choices-wrapper{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:.8em}.choices-box{padding:2px 8px;cursor:pointer;border:1px solid #bfc1c2;border-radius:55px;background-color:#f5f6f8}.selected-choices-box{padding:2px 8px;cursor:pointer;border-radius:55px;border:1px solid #000000;background-color:#000}.choices-label{font-size:14px}.selected-choices-label{font-size:14px;color:#fff}.wordCloud-container{position:relative;margin-bottom:28px}
`,uu=()=>{const t=B.translate,{shadowDom:e}=ne(),{shuffledChoices:r,skippable:n,handleSubmit:i}=ie();Ce(e,cu,"wordCloud");const[s,o]=F(!1),[a,c]=F(r.map(u=>({...u,checked:!1}))),d=u=>{c(f=>{const g=[...f];return g[u]={...g[u],checked:!f[u].checked},g})},h=()=>{var f;const u=a.filter(g=>g.checked);if(u.length===0)n?i():o(!0);else{const g=((f=u.find(w=>{var x;return(x=w.goto)==null?void 0:x.enabled}))==null?void 0:f.goto)??null,v=Pi(u);i({goto:g,actions:v,value:u.map(w=>w.value)})}};return ee(()=>{c(r)},[r]),l("div",{children:[l("div",{className:"wordCloud-container",children:[l("div",{className:"choices-wrapper",children:a.map((u,f)=>l("div",{className:u!=null&&u.checked?"selected-choices-box":"choices-box",onClick:()=>d(f),children:l("p",{className:u!=null&&u.checked?"selected-choices-label":"choices-label",children:u.label})},u.value))}),s&&l("span",{className:"form-error",children:t("You must check at least one to continue.")})]}),l(fe,{text:t("Next"),buttonAction:h})]})},du=({pageData:t})=>{var e,r;return l("div",{className:"page",children:[l(Ga,{headingText:t.content.headingText,bodyText:t.content.bodyText,imagePosition:t.content.imagePosition,imageAlignment:t.content.imageAlignment,imageUrl:((e=t.content)==null?void 0:e.imageUrl)??"",imageWidth:((r=t.content)==null?void 0:r.imageWidth)??"",pageType:t.type}),l(qa,{children:[t.type==="Text"&&l(au,{}),t.type==="EmailCapture"&&l(gc,{}),t.type==="Binary"&&l(Ka,{}),t.type==="NumberScale"&&l(bc,{}),t.type==="SingleChoice"&&l(ru,{}),t.type==="ShortAnswer"&&l(eu,{}),t.type==="Dropdown"&&l(dl,{}),t.type==="Satisfaction"&&l(Qc,{}),t.type==="Stars"&&l(ou,{}),t.type==="ThankYou"&&l(lu,{}),t.type==="Consent"&&l(Xa,{}),t.type==="Coupon"&&l(il,{}),t.type==="MultipleChoice"&&l(vc,{}),t.type==="WordCloud"&&l(uu,{}),t.type==="DownloadPage"&&l(ul,{}),t.type==="SingleLine"&&l(nu,{}),t.type==="NumberType"&&l(wc,{}),t.type==="PhoneNumber"&&l(qc,{}),t.type==="Date"&&l(ll,{}),t.type==="MetaData"&&de.value==="live"&&l(mc,{}),t.type==="ButtonList"&&l(Ja,{}),t.type==="Result"&&l(Zc,{})]})]})},hu=`.brandingWrapper{width:100%;text-align:center;background:#f3f6f8;color:#5a666b;font-size:11px;display:flex;flex-direction:row;justify-content:center;align-items:center;height:30px;line-height:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px;flex-shrink:0}.logoWrapper{max-width:90px;padding-left:10px;cursor:pointer}
`,fu=t=>l("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,width:"100%",height:"auto"},viewBox:"0 0 243 43",...t,children:[l("path",{d:"M0 0h242.6v42.3H0z",style:{fill:"none"}}),l("clipPath",{id:"a",children:l("path",{d:"M0 0h242.6v42.3H0z"})}),l("g",{clipPath:"url(#a)",children:[l("path",{d:"m41.818 10.543 3.566-1.83L28.01.029h-3.474L.032 12.28l26.242 13.258 22.676-11.43v4.846L26.274 30.292.032 17.217v11.887l26.242 13.075 26.333-13.167v-3.566L26.274 38.613 3.415 27.366V22.52l22.859 11.338 26.333-13.166v-8.23l-3.657-1.92L26.274 21.88 7.073 12.371l19.201-9.6 15.544 7.772Z"}),l("path",{d:"m35.4 9.8-13 6.5 3.7 1.8 13-6.5-3.7-1.8Zm-6.2-1.5L18 14l3.6 1.8 11.3-5.7-3.6-1.8Zm-7.5-.8-8.4 4.2 3.6 1.8 8.4-4.2-3.6-1.8ZM78.5 9H81l10 24.4h-3.4l-2.9-7.1H74.6l-2.8 7.1h-3.3L78.5 9Zm5.7 15-4.4-11.3L75.2 24h9Zm24.6-9.8a5 5 0 0 0-1-1 9.8 9.8 0 0 0-3.5-1.4l-2.1-.2c-1.9 0-3.3.4-4.2 1-.9.8-1.3 1.8-1.3 3 0 .9.2 1.6.7 2a5 5 0 0 0 2 1.3l3.7 1c1.7.4 3.2.8 4.4 1.3 1.2.6 2.2 1.3 2.9 2.1.6 1 1 2.1 1 3.6 0 1.1-.3 2.1-.7 3-.5.9-1 1.6-1.9 2.1-.8.6-1.7 1-2.8 1.3A16.6 16.6 0 0 1 95.5 32c-1-.5-2-1.1-3-1.9l1.5-2.6 1.5 1.2a13.5 13.5 0 0 0 7 2c1.8 0 3.2-.2 4.1-.9 1-.6 1.5-1.5 1.5-2.7a3 3 0 0 0-.8-2.2c-.6-.6-1.4-1-2.4-1.4-1-.4-2.4-.7-3.9-1L97 21c-1.2-.4-2-1-2.6-1.9-.5-.8-.8-1.8-.8-3.1 0-1.6.4-2.9 1.1-4a7 7 0 0 1 3.2-2.4c1.3-.6 2.8-.8 4.5-.8a13.1 13.1 0 0 1 5.7 1.3c.8.4 1.6.9 2.3 1.5l-1.5 2.5Zm7.1 19.2V9.1h3v13.4L131.6 9h3.4l-10 10.8 10.3 13.6h-3.5L123 21.6l-4 4.4v7.4h-3.1Zm22 0V9h3v21.7h13.7v2.7h-16.7Zm28-24.4h2.6l10 24.4H175l-2.8-7.1H162l-2.8 7.1h-3.3l10-24.4Zm5.7 14.9-4.4-11.3-4.6 11.3h9ZM180.4 9l7.4 12.7L195.2 9h3.4l-9.3 15.5v9h-3v-9L177 9h3.4Zm38.3 21.7v2.7h-16.6V9h16.3v2.8h-13.2v7.9h11.5v2.6h-11.5v8.4h13.5Zm5.3 2.7V9h10.5c1 0 2 .3 3 .7a8.3 8.3 0 0 1 4.4 7.1c0 1.2-.3 2.2-.7 3.2-.4 1-1 1.9-1.8 2.6-.7.7-1.6 1.2-2.7 1.5l6 9.3H239l-5.5-8.7H227v8.7h-3Zm3.1-11.5h7.4c.8 0 1.6-.2 2.2-.7.6-.5 1.1-1 1.5-1.9a6 6 0 0 0 .5-2.5 5.2 5.2 0 0 0-2.2-4.3c-.7-.5-1.4-.7-2.2-.7H227v10.1Z"})]})]}),pu=({currentPage:t})=>{if(t.type==="MetaData")return null;const{shadowDom:e}=ne();return Ce(e,hu,"brandingMain"),l("div",{className:"brandingWrapper",children:[l("div",{children:"Powered by"}),l("a",{className:"logoWrapper",href:"https://asklayer.io/",target:"_blank",children:l(fu,{})})]})},gu=()=>{const{mainData:t}=ne();return l("div",{className:"close-button",onClick:()=>{Di(t.id)},style:{position:"absolute",top:"6px",right:"6px",display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"24px",height:"24px",cursor:"pointer",borderRadius:"24px",background:"white"},children:l("svg",{"aria-hidden":"true",focusable:"false",className:"svg-inline--fa fa-times fa-w-10",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",children:l("path",{fill:"#777",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"})})})},mu=()=>{const{mainData:t,currentPage:e,currentPageIndex:r,showLoader:n,pageManagerRef:i}=ne(),s=()=>{const{hideCloseButton:a}=t;return he.value===q.WIDGET&&a!=="true"},o=r>0;return ee(()=>{de.value!=="live-edit"&&gn("view",null,t.userId,t.id)},[]),ee(()=>{de.value!=="live-edit"&&gn("p_view",e.id,t.userId,t.id)},[r]),l(ce,{children:[l("div",{className:Ma(de.value,he.value,e,t.hideBranding),ref:i,children:[l("div",{className:`page-wrapper ${o?"slideInRight":""}`,children:l(du,{pageData:e})},e.id),s()&&l(gu,{})]}),!t.hideBranding&&l(pu,{currentPage:e}),l(ja,{show:n})]})};class yu extends Ie{componentDidMount(){const{nodeRef:e}=this.props;e.current=this.base}componentWillUnmount(){const{nodeRef:e}=this.props;e.current=void 0}render(){const{children:e}=this.props;return De(ce,{},e)}}var U,Le;(function(t){t.APPEAR="appear",t.APPEAR_ACTIVE="appearActive",t.APPEAR_DONE="appearDone",t.ENTER="enter",t.ENTER_ACTIVE="enterActive",t.ENTER_DONE="enterDone",t.EXIT="exit",t.EXIT_ACTIVE="exitActive",t.EXIT_DONE="exitDone"})(U||(U={})),function(t){t.ENTER="onEnter",t.ENTERING="onEntering",t.ENTERED="onEntered",t.EXIT="onExit",t.EXITING="onExiting",t.EXITED="onExited"}(Le||(Le={}));const Fn={[U.APPEAR]:[Le.ENTER,U.APPEAR_ACTIVE],[U.APPEAR_ACTIVE]:[Le.ENTERING,U.APPEAR_DONE,!0],[U.APPEAR_DONE]:[Le.ENTERED],[U.ENTER]:[Le.ENTER,U.ENTER_ACTIVE],[U.ENTER_ACTIVE]:[Le.ENTERING,U.ENTER_DONE,!0],[U.ENTER_DONE]:[Le.ENTERED],[U.EXIT]:[Le.EXIT,U.EXIT_ACTIVE],[U.EXIT_ACTIVE]:[Le.EXITING,U.EXIT_DONE,!0],[U.EXIT_DONE]:[Le.EXITED]};function vu(t){const{children:e,in:r=!1,appear:n=!1,enter:i=!0,exit:s=!0,duration:o=500,alwaysMounted:a=!1,addEndListener:c}=t,d=ve(),h=ve();let u=!1;const[f,g]=F(()=>(u=!0,r?n?U.APPEAR:U.APPEAR_DONE:U.EXIT_DONE));ee(()=>{const{setTimeout:w,clearTimeout:x}=window,[T,_,P]=Fn[f],{[T]:C}=t;return C==null||C(d.current),_&&(P?c?c(d.current,()=>g(_)):h.current=w(g,o,_):g(_)),()=>{x(h.current)}},[f,o]),rt(()=>{u||g(r?i?U.ENTER:U.ENTER_DONE:s?U.EXIT:U.EXIT_DONE)},[r]);const v=Te(()=>{const w={};return Object.keys(Fn).forEach(x=>{w[x]=f===x}),w},[f]);return a||(s?f!==U.EXIT_DONE:r)?De(yu,{nodeRef:d,children:e(v,f)}):null}function _u(t,e){if(t==null)return{};var r,n,i={},s=Object.keys(t);for(n=0;n<s.length;n++)e.indexOf(r=s[n])>=0||(i[r]=t[r]);return i}const bu=["children","classNames"],wu={[U.APPEAR]:"-appear",[U.APPEAR_ACTIVE]:"-appear-active",[U.APPEAR_DONE]:"-appear-done",[U.ENTER]:"-enter",[U.ENTER_ACTIVE]:"-enter-active",[U.ENTER_DONE]:"-enter-done",[U.EXIT]:"-exit",[U.EXIT_ACTIVE]:"-exit-active",[U.EXIT_DONE]:"-exit-done"},Ot=(...t)=>t.filter(e=>!!e).join(" "),Vt=(t,e)=>typeof e=="string"?`${e}${wu[t]}`:e[t];function Un(t){const{children:e,classNames:r}=t,n=_u(t,bu);return De(vu,n,(i,s)=>{const{className:o,class:a}=e.props,c=Te(()=>Ot(a||o,((d,h)=>{const u=Vt(d,h);switch(d){case U.APPEAR_ACTIVE:return Ot(Vt(U.APPEAR,h),u);case U.ENTER_ACTIVE:return Ot(Vt(U.ENTER,h),u);case U.EXIT_ACTIVE:return Ot(Vt(U.EXIT,h),u);default:return u}})(s,r)),[o,a,r,s]);return gi(e,{class:c})})}const Su=({isDedicated:t,isSelectPreview:e,children:r})=>{const n={position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",overflowY:e?"hidden":"auto",backgroundColor:t?"unset":"rgba(0, 0, 0, 0.25)",padding:e?"0":"25px 0",transition:"opacity 600ms"};return CSS.supports("height","100dvh")&&(n.height="100dvh"),l("div",{style:n,className:"al-overlay",children:r})},xu=({children:t})=>{const{visibility:e,position:r,isCenterPos:n,mainData:i,heightManagerRef:s}=ne(),o=tr.value!==document.body,a=he.value===q.LINK||he.value===q.EMAIL||he.value===q.SELECT_PREVIEW,c=he.value===q.SELECT_PREVIEW;return ee(()=>{La(i),de.value==="live-edit"&&s.current&&s.current.style.height!=="auto"&&(s.current.style.height="auto")},[i]),o?e&&l("div",{className:"wrapper pos-embedded",children:l("div",{className:"height-manager",ref:s,children:t})}):n?l(Un,{in:e,appear:!0,classNames:"fade",children:l("div",{style:{transition:"opacity 600ms"},children:l(Su,{isDedicated:a,isSelectPreview:c,children:l("div",{className:"wrapper pos-screen-center",children:l("div",{className:"height-manager",ref:s,children:t})})})})}):l("div",{className:`wrapper widget-bottom ${r} `,children:l(Un,{in:e,classNames:"height-manager slideIn",children:l("div",{ref:s,children:t})})})};function Eu({surveyData:t,shadowDom:e}){const[r,n]=F(Ti.value),[i,s]=F(t);return Ce(e,js,"app"),ee(()=>{de.value==="live-edit"&&(window.addEventListener("page-index-change",a=>{const{detail:c}=a;n(c)}),window.addEventListener("survey-update",a=>{const{detail:c}=a;s(c)}));const o=new CustomEvent("asklayer-renderer-ready",{detail:{surveyId:t.id}});window.dispatchEvent(o)},[]),l(Ba,{mainData:i,shadowDom:e,currentPageIndex:r,setCurrentPageIndex:n,children:l(xu,{children:l(mu,{})})})}Da();const Cu=t=>{const e=document.createElement("div");return e.classList.add("al-shadow-host"),e.innerHTML="<div></div>",e.style.zIndex="2147483647",e.style.position="fixed",e.style.top="0",e.style.left="0",e.attachShadow({mode:"open"}).append(t),e};function ku(){const t=document.createElement("div");return t.setAttribute("id","alroot"),t}function Tu(t){document.documentElement.setAttribute("lang",navigator.language);const e=ku(),r=Cu(e);return ht(l(Eu,{surveyData:t,shadowDom:r.shadowRoot}),e),r}class Au{constructor(e){I(this,"surveyData");I(this,"platform");I(this,"useOverlay");this.surveyData=e,this.platform=Ur();const r=this.surveyData.position==="screen-center",n=he.value===q.WIDGET;this.useOverlay=r&&n,this.init()}init(){const e=this.createShadowHost();this.appendShadowHost(e),this.setNanoid(),this.setPlatformVariables().catch(r=>console.error(r)),this.setAnalyticsENV()}appendShadowHost(e){const r=tr.value||document.body,n=document.querySelector(`[data-survey-id="${this.surveyData.id}"]`);n&&n.remove(),e.dataset.surveyId=this.surveyData.id,he.value===q.POST_PURCHASE?r.prepend(e):r.appendChild(e)}createShadowHost(){const e=Tu(this.surveyData);return this.setStyleByChannelType(e,he.value),e}setStyleByChannelType(e,r){r===q.POST_PURCHASE&&(e.style.width="100%",e.style.position="relative")}setNanoid(){const e=this.getNanoId();At.value=e}async setPlatformVariables(){let e="",r="";if(he.value===q.LINK||he.value===q.EMAIL){const i=new URLSearchParams(location.search);e=i.get("platformId")??"",r=i.get("orderId")??""}else e=this.platform.getPlatformId(),r=this.platform.getOrderId();const n={id:e,orderId:r};tt.value=n}setAnalyticsENV(){const e=document.referrer,n=new URLSearchParams(location.search).get("utm")??"";Ps.value={referrer:e,utm:n}}getNanoId(){const e=z.get(G.ASKLAYER_NANOID);if(e)return e;{const r=Us();return z.set(G.ASKLAYER_NANOID,r),r}}}class Hn{constructor(e){I(this,"triggerSettings");I(this,"enabledTriggers");I(this,"triggerType");I(this,"triggered",!1);this.triggerSettings=e,this.enabledTriggers=e.enabledTriggers??{},this.triggerType=e.triggerType}isEnabledAdvancedTrigger(e){return this.triggerType==="advanced"&&this.enabledTriggers[e]}setTriggered(e){this.triggered=e}checkTrigger(e){if(this.triggered)return!1;switch(e.type){case le.TIME_ELAPSED:return this.triggerType==="immediately"?e.value>=0:this.triggerType==="standard"?e.value>=10:this.isEnabledAdvancedTrigger("timeElapsed")?e.value>=+this.triggerSettings.timeElapsed:!1;case le.NO_OPERATION_TIME_ELAPSED:return this.isEnabledAdvancedTrigger("idleTimeElapsed")?e.value>=+this.triggerSettings.idleTimeElapsed:!1;case le.WINDOW_SCROLL:return this.isEnabledAdvancedTrigger("scrollPercent")?e.value>=+this.triggerSettings.scrollPercent:!1;case le.SURVEY_EXIT_INTENT:return this.triggerType==="onExitIntent";default:return!1}}getEnabledTriggers(){const e=[];if(this.triggerType==="immediately")e.push("immediately");else if(this.triggerType==="standard")e.push("10 seconds");else if(this.triggerType==="advanced")this.isEnabledAdvancedTrigger("timeElapsed")&&e.push(`${this.triggerSettings.timeElapsed} seconds`),this.isEnabledAdvancedTrigger("idleTimeElapsed")&&e.push(`${this.triggerSettings.idleTimeElapsed} seconds of inactivity`),this.isEnabledAdvancedTrigger("scrollPercent")&&e.push(`${this.triggerSettings.scrollPercent}% scroll`);else throw new Error(`Unknown trigger type ${this.triggerType}`);return e}}class Nu{constructor(){I(this,"observables",new Map)}subscribe(e){return e.addObserver(this),this.observables.set(e.constructor.name,e),this}}class as extends Nu{constructor(r,n=null){super();I(this,"surveyState",{current:"INITIAL"});I(this,"gateState",{current:"INITIAL"});I(this,"surveyData");I(this,"location");I(this,"gate");I(this,"trigger");I(this,"embeddignManager");I(this,"channel");I(this,"wrapperElement");I(this,"rendererReady",!1);this.surveyData=r,this.gate=n,this.setTrigger()}async init(){await this.preload(),this.embeddignManager=new Au(this.surveyData)}preload(){const r=this.surveyData.pages.slice(0,3);this.surveyData.pages.slice(3).forEach(s=>{var o;(o=s.content)!=null&&o.imageUrl&&pn(xr(s.content.imageUrl))});const i=[];return r.forEach(s=>{var o;(o=s.content)!=null&&o.imageUrl&&i.push(pn(xr(s.content.imageUrl)))}),Promise.all(i)}setTrigger(){he.value===q.WIDGET?this.trigger=new Hn(this.surveyData.delivery.siteWidget.trigger):this.trigger=new Hn({triggerType:"immediately"})}async update(r){const n=r.type,i=r.surveyId;if(!(i&&i!==this.surveyData.id))switch(n){case le.FORCE_TRIGGERED:console.info(`Survey triggered by ${n}`),this.show();break;case le.QUERY_STATUS:this.showStatus();break;case le.TIME_ELAPSED:case le.NO_OPERATION_TIME_ELAPSED:case le.WINDOW_SCROLL:case le.SURVEY_EXIT_INTENT:await this.examine(r)&&(console.info(`Survey triggered by ${n}`),this.show());break;case le.SURVEY_CLOSED:this.close();break;case le.RENDERER_READY:this.rendererReady=!0;break}}async waitRendererReady(){return new Promise(r=>{let n=0;const i=setInterval(()=>{this.rendererReady?(clearInterval(i),r(!0)):(n++,n>100&&(clearInterval(i),r(!1)),console.info("Waiting for renderer to be ready..."))},5)})}async examine(r){if(this.shouldEmit(r))return await this.doesPassGates()}async doesPassGates(){if(this.gateState.current==="PASSED")return!0;if(this.gateState.current==="FAILED")return!1;const r=await this.gate.checkGates();return r?this.gateState.current="PASSED":this.gateState.current="FAILED",r}showStatus(){console.info({status:this.surveyState.current,failedGates:this.gate.getFailedGates(),triggers:this.trigger.getEnabledTriggers()})}shouldEmit(r){if(this.trigger.triggered)return!1;const n=this.trigger.checkTrigger(r);return n&&this.trigger.setTriggered(!0),n}sendEvent(r){window.dispatchEvent(new CustomEvent(r,{detail:{surveyId:this.surveyData.id,event:r}}))}show(){this.sendEvent("asklayer-show"),this.embeddignManager.useOverlay?document.body.classList.add("asklayer-body-overflow-hidden"):document.body.classList.remove("asklayer-body-overflow-hidden")}close(){this.sendEvent("asklayer-close"),this.embeddignManager.useOverlay&&document.body.classList.remove("asklayer-body-overflow-hidden")}}var mr=/iPhone/i,Yn=/iPod/i,zn=/iPad/i,Bn=/\biOS-universal(?:.+)Mac\b/i,yr=/\bAndroid(?:.+)Mobile\b/i,Wn=/Android/i,ot=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ft=/Silk/i,We=/Windows Phone/i,jn=/\bWindows(?:.+)ARM\b/i,Gn=/BlackBerry/i,qn=/BB10/i,Kn=/Opera Mini/i,Zn=/\b(CriOS|Chrome)(?:.+)Mobile/i,Jn=/Mobile(?:.+)Firefox\b/i,Xn=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Iu(t){return function(e){return e.test(t)}}function Du(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=Iu(r),s={apple:{phone:i(mr)&&!i(We),ipod:i(Yn),tablet:!i(mr)&&(i(zn)||Xn(e))&&!i(We),universal:i(Bn),device:(i(mr)||i(Yn)||i(zn)||i(Bn)||Xn(e))&&!i(We)},amazon:{phone:i(ot),tablet:!i(ot)&&i(Ft),device:i(ot)||i(Ft)},android:{phone:!i(We)&&i(ot)||!i(We)&&i(yr),tablet:!i(We)&&!i(ot)&&!i(yr)&&(i(Ft)||i(Wn)),device:!i(We)&&(i(ot)||i(Ft)||i(yr)||i(Wn))||i(/\bokhttp\b/i)},windows:{phone:i(We),tablet:i(jn),device:i(We)||i(jn)},other:{blackberry:i(Gn),blackberry10:i(qn),opera:i(Kn),firefox:i(Jn),chrome:i(Zn),device:i(Gn)||i(qn)||i(Kn)||i(Jn)||i(Zn)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Qn=()=>Du(window.navigator).phone,Pu=(t,e="millisecond")=>{if(e==="millisecond"){let[r,n]=t.split(/(?=[a-z])/);return r=parseInt(r),n==="s"?r*1e3:n==="m"?r*60*1e3:n==="h"?r*60*60*1e3:n==="d"?r*24*60*60*1e3:0}else if(e==="day"){let[r,n]=t.split(/(?=[a-z])/);return r=parseInt(r),n==="s"?r/(24*60*60):n==="m"?r/(24*60):n==="h"?r/24:n==="d"?r:3650}},$u=t=>{const e=Ai();if(e){if(!t||t==="any")return e.length;{const r=Pu(t),n=Date.now()-r;let i=0;for(;e.pop()>=n;)i++;return i}}else return 0},Lu=t=>{var e;if(t.type==="spin-to-win")return t.wheelSegments.slice(0,+t.wheelSegmentCount).some(n=>{var i;return((i=n.coupon)==null?void 0:i.couponType)==="pool"&&n.coupon.pool});if(t.showForm){const r=t.thankYouContents.find(n=>n.type==="coupon");return r&&((e=r.coupon)==null?void 0:e.couponType)==="pool"&&(!r.hidden||r.sendCouponByMail)}else return!1};class Ru{constructor(e){I(this,"survey",null);I(this,"location",null);I(this,"settings",null);I(this,"enabled",null);I(this,"platform",null);I(this,"testMode",!1);I(this,"recurrenceOff",{}.VITE_GATE_RECURRENCE_CHECK_OFF==="true");I(this,"failedGates",[]);this.survey=e,he.value===q.WIDGET?this.settings=e.delivery.siteWidget:he.value===q.POST_PURCHASE?(this.settings=e.delivery.postPurchase,this.settings.recurrence={recurrenceType:"every_time_not_completed"}):this.settings=null,this.platform=Ur()}async checkGates(){if(he.value===q.LINK||he.value===q.EMAIL||this.testMode)return!0;if(this.enabled!==null)return this.enabled;const e=new Map([["recurrence",this.recurrence.bind(this)],["url",this.isVisibleOnUrl.bind(this)],["lang",this.lang.bind(this)],["referrer",this.referrer.bind(this)],["device",this.device.bind(this)],["frequency",this.frequency.bind(this)],["numberOfPageViewsInSession",this.numberOfPageViewsInSession.bind(this)],["browsingHistory",this.browsingHistory.bind(this)],["blockIP",this.blockIP.bind(this)]]);for(const[i,s]of e.entries()){if(this.recurrenceOff&&i==="recurrence")continue;if(!s()){this.failedGates.push(i),this.enabled=!1;break}}if(this.enabled===!1)return!1;const r=new Map([["userTags",this.userTags.bind(this)],["loginState",this.loginState.bind(this)],["geoLocation",this.geolocation.bind(this)],["productsOrdered",this.productsOrdered.bind(this)]]);return(await Promise.all(Array.from(r.values()).map(i=>i()))).forEach((i,s)=>{if(!i){const o=Array.from(r.keys())[s];this.failedGates.push(o),this.enabled=!1}}),this.enabled===!1?!1:this.enabled=!0}getFailedGates(){return this.failedGates}doesMatch(e,r,n){let i=!1;switch(e){case"equals":n.replace(/\?.*$/,"").replace(/\/$/,"")===r.replace(/\?.*$/,"").replace(/\/$/,"")&&(i=!0);break;case"startsWith":n.replace(/\?.*$/,"").replace(/\/$/,"").startsWith(r.replace(/\?.*$/,"").replace(/\/$/,""))&&(i=!0);break;case"endsWith":n.replace(/\?.*$/,"").replace(/\/$/,"").endsWith(r.replace(/\?.*$/,"").replace(/\/$/,""))&&(i=!0);break;case"contains":n.toLowerCase().includes(r.toLowerCase())&&(i=!0);break}return i}url(e,r,n=""){if(!e||!r)return!0;e=e.trim();const i=n||window.location.href,s=decodeURI(i);return[i,s].some(o=>this.doesMatch(r,e,o))}isEnabledSegment(e,r){if(r==="userTargeting")return this.settings.userTargeting.targetingType!=="segment"?!1:this.settings.userTargeting.enabledSegments[e]===!0}isVisibleOnUrl(){const e=this.settings.pageTargeting;if(e.targetingType==="all")return!0;if(e.targetingType==="homepage")return location.pathname==="/";if(e.targetingType==="selectedPages")return this.selectedPages();if(e.targetingType==="advanced"){let r=!0;return e!=null&&e.advancedTargets.length&&e.advancedTargets.filter(n=>n.matchText)&&(r=e.advancedTargets.some(n=>this.url(n.matchText,n.matchType))),e!=null&&e.excludedTargets.length&&(r=r&&!e.excludedTargets.filter(n=>n.matchText).some(n=>this.url(n.matchText,n.matchType))),r}}selectedPages(){var c,d;let e=!1,r=!1;const n=this.settings.pageTargeting;if(n.targetingType!=="selectedPages")return!0;const i=this.platform.getCurrentPageId();e=(((c=n.selectedPages)==null?void 0:c.map(h=>h.value.toString()))??[]).includes(i);const o=this.platform.getCurrentProductId();return r=(((d=n.selectedProducts)==null?void 0:d.map(h=>h.value.toString()))??[]).includes(o),e||r}isInApp(e){const r=["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*(wv)"],n=new RegExp(`(${r.join("|")})`,"ig");return!!e.match(n)}evaluateReferrer(e){let r=!1;const n=z.getSession(G.ASKLAYER_REFERRER),i=z.getSession(G.ASKLAYER_SEARCH),s=navigator.userAgent;switch(e){case"in-app-browser":{r=this.isInApp(s);break}case"line-app-browser":case"line":r=s.includes("Line");break;case"yappli-app-browser":r=s.includes("Yappli");break;case"facebook":case"instagram":case"youtube":case"tiktok":case"reddit":case"pinterest":r=s.toLowerCase().includes(e)||(n==null?void 0:n.includes(e));break;case"twitter":r=s.toLowerCase().includes(e)||n.includes(e)||n.includes("t.co");break;case"google-ads":r=(i==null?void 0:i.includes("utm_source=google"))||(i==null?void 0:i.includes("gclid"));break;case"criteo-ads":r=i==null?void 0:i.includes("source=criteo");break;case"any-search-engine":r=["google","bing","yahoo","duckduckgo"].some(o=>n==null?void 0:n.includes(o));break}return r}device(){if(!this.isEnabledSegment("deviceType","userTargeting"))return!0;const e=this.settings.userTargeting.deviceType??"mobile";return e==="mobile"&&Qn()?!0:e==="desktop"&&!Qn()}recurrence(){var d,h,u,f,g;const e=this.survey.id,r=this.settings.recurrence.recurrenceType??"once",n=z.get(G.ASKLAYER_SURVEY_SHOWN)??[],i=z.getSession(G.ASKLAYER_SURVEY_SHOWN)??[],s=z.get(G.ASKLAYER_SURVEY_COMPLETED)??[],o=n.find(v=>v.id===e),a=i.find(v=>v.id===e),c=s.find(v=>v.id===e);if(r==="once")return!o;if(r==="once_per_session")return!a&&!c;if(r==="every_time_not_completed")if(he.value===q.POST_PURCHASE)if((((d=this.settings)==null?void 0:d.surveyFrequency)??{}).type==="one-time-per-order"){const x=z.get(`asklayer_submission_${this.survey.id}`);return!c||!x?!0:x&&x.orderId!==((u=(h=window.Shopify)==null?void 0:h.checkout)==null?void 0:u.order_id)?(z.remove(`asklayer_submission_${this.survey.id}`),z.set(G.ASKLAYER_SURVEY_COMPLETED,s.filter(T=>T.id!==e)),tt.value={...tt.value,orderId:(g=(f=window.Shopify)==null?void 0:f.checkout)==null?void 0:g.order_id},!0):!1}else return!c;else return!c;return!0}lang(){var s,o,a;if(!this.isEnabledSegment("browserLanguage","userTargeting")||!((a=(o=(s=this.settings.userTargeting)==null?void 0:s.browserLanguage)==null?void 0:o.languages)!=null&&a.length))return!0;const e=window.navigator.language,r=this.settings.userTargeting.browserLanguage.languages,n=this.settings.userTargeting.browserLanguage.matchType??"equals",i=r.some(c=>{const d=c.value==="zh-CN"||c.value==="zh-TW"?5:2;return c.value===e.slice(0,d)});return n==="equals"&&i||n==="does_not_equal"&&!i}referrer(){var i,s,o;if(!this.isEnabledSegment("cameFrom","userTargeting")||!((o=(s=(i=this.settings.userTargeting)==null?void 0:i.cameFrom)==null?void 0:s.sources)!=null&&o.length))return!0;const e=this.settings.userTargeting.cameFrom.sources,r=this.settings.userTargeting.cameFrom.matchType??"equals",n=e.map(a=>a.value).some(this.evaluateReferrer.bind(this));return r==="equals"&&n||r==="does_not_equal"&&!n}frequency(){if(!this.isEnabledSegment("frequency","userTargeting"))return!0;const e=this.settings.userTargeting.frequency.interval??"any",r=this.settings.userTargeting.frequency.times??0,n=$u(e);return r===0?n-1===r:n-1>=r}numberOfPageViewsInSession(){var i,s,o,a;if(!this.isEnabledSegment("numberOfPageViewsInSession","userTargeting"))return!0;const e=+z.getSession(G.ASKLAYER_NUMBER_OF_PAGEVIEWS_IN_SESSION),r=((s=(i=this.settings.userTargeting)==null?void 0:i.numberOfPageViewsInSession)==null?void 0:s.matchType)??"equals",n=+((a=(o=this.settings.userTargeting)==null?void 0:o.numberOfPageViewsInSession)==null?void 0:a.numberOfViews);return r==="more_than_equal"?e>=n:r==="less_than_equal"?e<=n:e===n}browsingHistory(){var e;return!this.isEnabledSegment("browsingHistory","userTargeting")||!((e=this.settings.userTargeting)!=null&&e.browsingHistory.length)?!0:this.settings.userTargeting.browsingHistory.some(r=>{const n=+r.numberOfTimes,i=r.matchText,s=r.matchType??"contains",a=(z.get(G.ASKLAYER_BROWSING_HISTORY)??[]).filter(d=>this.url(i,s,d[0]));return this.url(i,s)?a.length-1>=n:a.length>=n})}async geolocation(){var n,i,s,o;if(!this.isEnabledSegment("geolocation","userTargeting"))return!0;const e=((i=(n=this.settings.userTargeting)==null?void 0:n.geolocation)==null?void 0:i.countries.length)>0,r=((o=(s=this.settings.userTargeting)==null?void 0:s.geolocation)==null?void 0:o.states.length)>0;if(e||r){this.location=Fr.value;try{const a=this.location;return r?this.settings.userTargeting.geolocation.states.map(d=>d.value).includes(a.region):e?this.settings.userTargeting.geolocation.countries.map(d=>d.value).includes(a.country):!1}catch(a){return console.error(a),!0}}return!0}async userTags(){var a,c;if(!this.isEnabledSegment("userTags","userTargeting"))return!0;const e=((a=this.settings.userTargeting)==null?void 0:a.userTags)??{tags:[]},r=(c=e.tags)==null?void 0:c.map(d=>d.value);if(!r.length)return!0;const n=e.matchType??"equals",i=await this.platform.getUserTags(this.survey.userId);if(!i)return!1;const s=r.some(d=>i.includes(d));return n==="equals"?s:!s}blockIP(){var e,r,n;return!this.isEnabledSegment("blockIP","userTargeting")||!((n=(r=(e=this.settings.userTargeting)==null?void 0:e.blockIP)==null?void 0:r.ipAddresses)!=null&&n.length)?!0:!this.settings.userTargeting.blockIP.ipAddresses.map(i=>i.value).includes(this.location.ip)}async loginState(){var n;if(!this.isEnabledSegment("loginState","userTargeting"))return!0;const e=((n=this.settings.userTargeting)==null?void 0:n.loginState)??"is_logged_in",r=await this.platform.isLoggedIn();return e==="is_logged_in"&&r||e==="is_not_logged_in"&&r===!1}async productsOrdered(){var s;if(!this.isEnabledSegment("productPurchased","userTargeting"))return!0;const r=(((s=this.settings.userTargeting)==null?void 0:s.productPurchased)??[]).map(o=>String(o.value));if(!r.length)return!0;const n=await this.platform.getOrder(this.survey.userId);if(!n||!(n!=null&&n.line_items.length))return!1;const i=n.line_items.map(o=>String(o.product_id));return r.some(o=>i.includes(o))}async couponPoolRemains(){if(!Lu(this.survey))return!0;const e="https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer";try{const r=await fetch(`${e}/coupon-pool-check/${this.survey.id}`);return r.ok?(await r.json()).result:!1}catch{return!1}}}const Mu=async t=>{const{email:e,userId:r,orderId:n}=t;if(!e||!r)return;const i="https://asklayer-generic-api-6nonizu4oa-an.a.run.app/asklayer";try{if(!(await fetch(`${i}/sending-survey-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,email:e,orderId:n})})).ok)throw new Error("Failed to send email")}catch(s){console.error(s)}},Bt="https://surveydatacdn.asklayer.io",ls="https://surveydata.asklayer.io",Qt=async t=>{try{const e=await fetch(t);if(e.ok)return await e.json();throw new Error("Failed to fetch")}catch(e){throw new Error(e)}},Ou=async t=>{const e=t.targetSurvey,r=t.targetWorkspace;if(!e||!r)return[null,new Error("Survey id or workspace id is not provided")];try{return[(await Qt(`${Bt}/workspace/${r}/survey/${e}`)).surveys,null]}catch{try{return[(await Qt(`${ls}/workspace/${r}/survey/${e}`)).surveys,null]}catch{return[null,new Error("Failed to fetch")]}}},Vu=async t=>{let e;t.targetWorkspace?e=`${Bt}/workspace/${t.targetWorkspace}`:t.targetUser&&(e=`${Bt}/user/${t.targetUser}`);let r=null;try{r=(await Qt(e)).surveys}catch{try{const i=e.replace(Bt,ls);r=(await Qt(i)).surveys}catch{return[null,new Error("Failed to fetch")]}}return t.type===q.POST_PURCHASE?r=r.filter(n=>n.delivery.enabledDeliveryTypes.postPurchase):t.type===q.WIDGET&&(r=r.filter(n=>n.delivery.enabledDeliveryTypes.siteWidget)),[r,null]};function Fu(t){const e=t==null?void 0:t.dataset.workspace,r=t==null?void 0:t.dataset.pluid;if(!e&&!r)throw new Error("Workspace id is not provided");const n=t==null?void 0:t.dataset.surveyid,i=(t==null?void 0:t.dataset.channel)??q.WIDGET,s=new URL(location.href).searchParams.get("emailSurvey");return i===q.LINK?{type:s?q.EMAIL:q.LINK,targetWorkspace:e,targetUser:r,targetSurvey:n}:i===q.POST_PURCHASE?{type:i,targetWorkspace:e,targetUser:r}:{type:i,targetWorkspace:e,targetUser:r}}const Uu=()=>{const t=new URL(window.location.href).search,e=new URLSearchParams(t);return[e.get("al-preview"),e.get("ignoreRules")==="true",e.get("useCustomTrigger")==="true",e.get("clearStorage")==="true"]},Hu=()=>{const t=new URL(window.location.href);if(t.searchParams.has("mode"))return t.searchParams.get("mode");const e=document.querySelector("script[data-almode]"),r=e==null?void 0:e.dataset.almode;if(r)return r;{const[n]=Uu();return n?"preview-on-site":"live"}},Yu=(t,e)=>{switch(e){case"minutes":return t*1e3*60;case"hours":return t*1e3*60*60;case"days":return t*1e3*60*60*24;default:return t}},zu=(t,e)=>{var s,o,a;const r=z.get(G.ASKLAYER_SURVEY_COMPLETED);let n=!1,i=null;if(Array.isArray(r)){const c=r.filter(d=>d.id===t.id);c.length>0&&(n=!0,i=(s=c[0].history)==null?void 0:s.pop())}if(!n)return!1;if(e===q.EMAIL){if(!(((o=t.delivery.email)==null?void 0:o.multipleSends)==="once-per-order"))return!0;const d=new URL(location.href).searchParams.get("orderId");if(!d)return!0;const h=!!z.get(`${G.ASKLAYER_COMPLETED_SURVEY_BY_ORDER}${t.id}_${d}`);return h||z.remove(`${G.ASKLAYER_SUBMISSION_ID}${t.id}`),h}else{const c=((a=t.delivery.link)==null?void 0:a.surveyFrequency)??{};if(c.type==="multiple-times"){if(!i)return n;const u=new Date().getTime()-i,f=Yu(c.occurrenceTime,c.occurrencePeriod),g=u<f,v=z.get(`${G.ASKLAYER_SUBMISSION_ID}${t.id}`);return!g&&v&&v.timestamp<i+1e3&&z.remove(`${G.ASKLAYER_SUBMISSION_ID}${t.id}`),g}else return n}},Bu=()=>{const r=navigator.language.toLowerCase().startsWith("ja")?`
      <div class="unavailable">
        <p><strong>このアンケートは利用できません。</strong></p>
        <p>考えられる理由は次のとおりです：</p>
        <ul>
          <li>このアンケートが公開されていません。</li>
          <li>アンケートの実施者がリンク機能を有効にしていません。</li>
          <li>アンケートの実施者のアカウント制限を超過しました。</li>
        </ul>
      </div>
    `:`
      <div class="unavailable">
        <p><strong>This survey is unavailable.</strong></p>
        <p>Possible reasons include:</p>
        <ul>
          <li>The survey is not published.</li>
          <li>The survey owner has not enabled link functionality.</li>
          <li>The survey owner has exceeded their account limit.</li>
        </ul>
      </div>
    `,n=document.createElement("div");n.style.alignSelf="center",n.innerHTML=r,document.body.appendChild(n)},Wu=()=>{const r=navigator.language.toLowerCase().startsWith("ja")?`
      <div class="unavailable">
        <p><strong>このアンケートは回答済みです。</strong></p>
      </div>
    `:`
      <div class="unavailable">
        <p><strong>You have already completed this survey.</strong></p>
      </div>
    `,n=document.createElement("div");n.style.alignSelf="center",n.innerHTML=r,document.body.appendChild(n)};function ju(t){window.asklayer={triggerSurvey:e=>t.triggerSurvey(e),showStatus:e=>t.getStatus(e)}}const Gu=t=>t==="select-preview"?q.SELECT_PREVIEW:t==="link"?q.LINK:t==="post-purchase"?q.POST_PURCHASE:q.WIDGET,qu=t=>t==="post-purchase"?document.querySelector(".asklayer-embed-section"):document.body,Ku=async()=>{const t="https://geoip.peakdigital.cloud";try{const r=await(await fetch(t)).json();return delete r.ip,r}catch{return null}};de.value=Hu();de.value;async function Zu(){const t=document.querySelector("script[data-asklayer]");if(!t)throw new Error("Failed to find script element");let e=null;const r=Ur(),n=Fu(t);he.value=n.type,tr.value=r.getWrapperElement(n.type);let i;if(n.type===q.LINK||n.type===q.EMAIL){if([i,e]=await Ou(n),i=i.filter(o=>{if(n.type===q.LINK)return o.delivery.enabledDeliveryTypes.link;if(n.type===q.EMAIL)return o.delivery.enabledDeliveryTypes.email}),(i==null?void 0:i.length)===0||e)return Bu(),null;if(zu(i[0],n.type))return Wu(),null}else{if([i,e]=await Vu(n),e)throw new Error("Failed to fetch survey data");if(i.length===0)throw new Error("No surveys found")}Fr.value=await Ku();const s=new Ni;for(const o of i){const a=new as(o,new Ru(o));await a.init(),a.subscribe(s)}return s.init(),s}const Ju=async()=>{var e,r,n,i;(r=(e=window.asklayerData)==null?void 0:e.triggerEmail)!=null&&r.email&&((i=(n=window.asklayerData)==null?void 0:n.triggerEmail)!=null&&i.userId)&&await Mu(window.asklayerData.triggerEmail);const t=await Zu();ju(t)},ei=(t,e="desktop")=>{he.value=Gu(e),tr.value=qu(e);const r=new Ni,n=new as(t);n.init().then(()=>{n.subscribe(r).waitRendererReady().then(()=>{r.notify({type:le.FORCE_TRIGGERED,surveyId:t.id})})})};de.value==="live-edit"?window.addEventListener("show-preview-survey",t=>{const{survey:e,previewMode:r,pageIndex:n}=t.detail;Ti.value=n,r==="select-preview"?ei(e,"select-preview"):ei(e,r)}):Ju().catch(t=>{});
