var vn=Object.defineProperty,yn=(R,X,te)=>X in R?vn(R,X,{enumerable:!0,configurable:!0,writable:!0,value:te}):R[X]=te,m=(R,X,te)=>(yn(R,typeof X!="symbol"?X+"":X,te),te);(function(){"use strict";const ae=class ae2{constructor(){m(this,"intervals",new Map)}static getInstance(){return ae2.instance||(ae2.instance=new ae2),ae2.instance}setInterval(e,i,n){this.clearInterval(e);const r=window.setInterval(i,n);this.intervals.set(e,r)}clearInterval(e){const i=this.intervals.get(e);i&&(window.clearInterval(i),this.intervals.delete(e))}clearAll(){this.intervals.forEach(e=>window.clearInterval(e)),this.intervals.clear()}};m(ae,"instance");let R=ae;const te="https://impulse-lite.heliumbuilder.com/ev/batch",kt=.7,gi=5e3,Pt=2e3,fi=5e3,B=class B2{constructor(){if(m(this,"measurementIds",[]),m(this,"gtagIdForGclid"),B2._instance)return B2._instance;this.measurementIds=this.findGA4MeasurementIds(),this.gtagIdForGclid=this.findGtagIdForGclid()||null,B2._instance=this}static getInstance(){return B2._instance||(B2._instance=new B2),B2._instance}findGA4MeasurementIds(){const e=new Set;return Array.from(document.querySelectorAll("script")).forEach(n=>{if(n.src&&n.src.includes("gtag/js")){const r=n.src.match(/id=(G-[A-Z0-9]+)/i);r&&e.add(r[1])}n.textContent&&[...n.textContent.matchAll(/gtag\(['"]config['"],\s*['"](G-[A-Z0-9]+)['"]/gi)].forEach(s=>e.add(s[1]))}),window.dataLayer&&Array.isArray(window.dataLayer)&&window.dataLayer.forEach(n=>{Array.isArray(n)&&n[0]==="config"&&typeof n[1]=="string"&&n[1].startsWith("G-")&&e.add(n[1]),n&&n.event==="config"&&typeof n.measurement_id=="string"&&n.measurement_id.startsWith("G-")&&e.add(n.measurement_id)}),Array.from(e)}findGtagIdForGclid(){const e=Array.from(document.querySelectorAll("script"));for(const i of e){if(i.src){const n=i.src.match(/id=(DC-[A-Z0-9]+)/i);if(n)return n[1]}if(i.textContent){const n=i.textContent.match(/gtag\(['"]config['"],\s*['"](DC-[A-Z0-9]+)['"]/i);if(n)return n[1]}}return null}getCookiesByPrefix(e){const i=document.cookie.split("; "),n={};return i.forEach(r=>{if(r.startsWith(e)){const[s,a]=r.split("=");n[s]=decodeURIComponent(a)}}),n}gtagGet(e,i){return new Promise(n=>{typeof window?.gtag=="function"&&i?window.gtag("get",i,e,r=>{n(r||null)}):n(null)})}async getAllIds(){const e=this.measurementIds.length?this.measurementIds[0]:null,i=this.gtagIdForGclid,n=this.getCookiesByPrefix("_shopify"),r=this.getCookiesByPrefix("_ga"),s=this.getCookiesByPrefix("gtag"),a=this.getCookiesByPrefix("_fb"),[c,g,o]=await Promise.all([this.gtagGet("gclid",i),this.gtagGet("client_id",e),this.gtagGet("session_id",e)]);return{detectedMeasurementIds:this.measurementIds,shopifyCookies:n,metaIds:a,gaCookies:r,gtagCookies:s,gtagIds:{gclid:c,client_id:g,session_id:o}}}};m(B,"_instance");let Qe=B;var pi="2.0.0-beta.3",ue="",Ct="?",Je="function",Y="undefined",he="object",Ze="string",Te="major",h="model",d="name",u="type",f="vendor",l="version",C="architecture",ge="console",v="mobile",S="tablet",x="smarttv",Oe="wearable",At="xr",et="embedded",xt="user-agent",tt=500,it="brands",ie="formFactors",nt="fullVersionList",fe="platform",rt="platformVersion",Me="bitness",Q="sec-ch-ua",mi=Q+"-full-version-list",wi=Q+"-arch",vi=Q+"-"+Me,yi=Q+"-form-factors",bi=Q+"-"+v,Ei=Q+"-"+h,Lt=Q+"-"+fe,Ti=Lt+"-version",_t=[it,nt,v,h,fe,rt,C,ie,Me],L="browser",G="cpu",U="device",$="engine",D="os",pe="result",Ne="Amazon",Ie="Apple",Ot="ASUS",Mt="BlackBerry",Re="Google",Nt="Huawei",Rt="Lenovo",at="LG",De="Microsoft",Dt="Motorola",He="Samsung",Ht="Sharp",Ve="Sony",st="Xiaomi",ot="Zebra",me="Mobile ",we=" Browser",Fe="Chrome",Ii="Edge",Se="Firefox",ke="Opera",Vt="Facebook",Ft="Sogou",ct="Windows",Si=typeof window!==Y,A=Si&&window.navigator?window.navigator:void 0,J=A&&A.userAgentData?A.userAgentData:void 0,ki=function(t,e){var i={},n=e;if(!qe(e)){n={};for(var r in e)for(var s in e[r])n[s]=e[r][s].concat(n[s]?n[s]:[])}for(var a in t)i[a]=n[a]&&n[a].length%2===0?n[a].concat(t[a]):t[a];return i},Ue=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},dt=function(t,e){if(typeof t===he&&t.length>0){for(var i in t)if(Z(t[i])==Z(e))return!0;return!1}return ve(t)?Z(e).indexOf(Z(t))!==-1:!1},qe=function(t,e){for(var i in t)return/^(browser|cpu|device|engine|os)$/.test(i)||(e?qe(t[i]):!1)},ve=function(t){return typeof t===Ze},lt=function(t){if(t){for(var e=[],i=ne(/\\?\"/g,t).split(","),n=0;n<i.length;n++)if(i[n].indexOf(";")>-1){var r=Ce(i[n]).split(";v=");e[n]={brand:r[0],version:r[1]}}else e[n]=Ce(i[n]);return e}},Z=function(t){return ve(t)?t.toLowerCase():t},ut=function(t){return ve(t)?ne(/[^\d\.]/g,t).split(".")[0]:void 0},z=function(t){for(var e in t){var i=t[e];typeof i==he&&i.length==2?this[i[0]]=i[1]:this[i]=void 0}return this},ne=function(t,e){return ve(e)?e.replace(t,ue):e},Pe=function(t){return ne(/\\?\"/g,t)},Ce=function(t,e){if(ve(t))return t=ne(/^\s\s*/,t),typeof e===Y?t:t.substring(0,tt)},Ut=function(t,e){if(!(!t||!e))for(var i=0,n,r,s,a,c,g;i<e.length&&!c;){var o=e[i],p=e[i+1];for(n=r=0;n<o.length&&!c&&o[n];)if(c=o[n++].exec(t),c)for(s=0;s<p.length;s++)g=c[++r],a=p[s],typeof a===he&&a.length>0?a.length===2?typeof a[1]==Je?this[a[0]]=a[1].call(this,g):this[a[0]]=a[1]:a.length===3?typeof a[1]===Je&&!(a[1].exec&&a[1].test)?this[a[0]]=g?a[1].call(this,g,a[2]):void 0:this[a[0]]=g?g.replace(a[1],a[2]):void 0:a.length===4&&(this[a[0]]=g?a[3].call(this,g.replace(a[1],a[2])):void 0):this[a]=g||void 0;i+=2}},Be=function(t,e){for(var i in e)if(typeof e[i]===he&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(dt(e[i][n],t))return i===Ct?void 0:i}else if(dt(e[i],t))return i===Ct?void 0:i;return e.hasOwnProperty("*")?e["*"]:t},qt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Bt={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},Gt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[l,[d,me+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[l,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,l],[/opios[\/ ]+([\w\.]+)/i],[l,[d,ke+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[l,[d,ke+" GX"]],[/\bopr\/([\w\.]+)/i],[l,[d,ke]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[l,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,l],[/\bddg\/([\w\.]+)/i],[l,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[l,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[l,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[l,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[l,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[l,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[l,[d,"Smart "+Rt+we]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure"+we],l],[/\bfocus\/([\w\.]+)/i],[l,[d,Se+" Focus"]],[/\bopt\/([\w\.]+)/i],[l,[d,ke+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[l,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[l,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[l,[d,ke+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[l,[d,"MIUI"+we]],[/fxios\/([\w\.-]+)/i],[l,[d,me+Se]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360"+we]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],l],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+we],l],[/samsungbrowser\/([\w\.]+)/i],[l,[d,He+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],l],[/metasr[\/ ]?([\d\.]+)/i],[l,[d,Ft+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,Ft+" Mobile"],l],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,l],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,Vt],l],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,l],[/\bgsa\/([\w\.]+) .*safari\//i],[l,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[l,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[l,[d,Fe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,Fe+" WebView"],l],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[l,[d,"Android"+we]],[/chrome\/([\w\.]+) mobile/i],[l,[d,me+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,l],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[l,[d,me+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[d,me+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[l,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[l,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[d,l],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[d,me+Se],l],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],l],[/(wolvic)\/([\w\.]+)/i],[d,l],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[l,[d,Se+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,[l,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[l,/[^\d\.]+./,ue]]],cpu:[[/\b(?:(amd|x|x86[-_]?|wow|win)64)\b/i],[[C,"amd64"]],[/(ia32(?=;))/i,/((?:i[346]|x)86)[;\)]/i],[[C,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[C,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[C,"armhf"]],[/windows (ce|mobile); ppc;/i],[[C,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[C,/ower/,ue,Z]],[/(sun4\w)[;\)]/i],[[C,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[C,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[f,He],[u,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[f,He],[u,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[f,Ie],[u,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[f,Ie],[u,S]],[/(macintosh);/i],[h,[f,Ie]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[f,Ht],[u,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[f,Nt],[u,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[f,Nt],[u,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[f,st],[u,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[f,st],[u,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[f,"OPPO"],[u,v]],[/\b(opd2\d{3}a?) bui/i],[h,[f,"OPPO"],[u,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[f,"Vivo"],[u,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[f,"Realme"],[u,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[f,Dt],[u,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[f,Dt],[u,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[f,at],[u,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[f,at],[u,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[f,Rt],[u,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[f,"Nokia"],[u,v]],[/(pixel c)\b/i],[h,[f,Re],[u,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[f,Re],[u,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[f,Ve],[u,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[f,Ve],[u,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[f,"OnePlus"],[u,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[f,Ne],[u,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[f,Ne],[u,v]],[/(playbook);[-\w\),; ]+(rim)/i],[h,f,[u,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[f,Mt],[u,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[f,Ot],[u,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[f,Ot],[u,v]],[/(nexus 9)/i],[h,[f,"HTC"],[u,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[h,/_/g," "],[u,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[f,"Acer"],[u,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[f,"Meizu"],[u,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[f,"Ulefone"],[u,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,h,[u,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[f,h,[u,S]],[/(surface duo)/i],[h,[f,De],[u,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[f,"Fairphone"],[u,v]],[/(shield[\w ]+) b/i],[h,[f,"Nvidia"],[u,S]],[/(sprint) (\w+)/i],[f,h,[u,v]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[f,De],[u,v]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[f,ot],[u,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[f,ot],[u,v]],[/smart-tv.+(samsung)/i],[f,[u,x]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[f,He],[u,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,at],[u,x]],[/(apple) ?tv/i],[f,[h,Ie+" TV"],[u,x]],[/crkey/i],[[h,Fe+"cast"],[f,Re],[u,x]],[/droid.+aft(\w+)( bui|\))/i],[h,[f,Ne],[u,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[f,Ht],[u,x]],[/(bravia[\w ]+)( bui|\))/i],[h,[f,Ve],[u,x]],[/(mitv-\w{5}) bui/i],[h,[f,st],[u,x]],[/Hbbtv.*(technisat) (.*);/i],[f,h,[u,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Ce],[h,Ce],[u,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,x]],[/(ouya)/i,/(nintendo) (\w+)/i],[f,h,[u,ge]],[/droid.+; (shield) bui/i],[h,[f,"Nvidia"],[u,ge]],[/(playstation \w+)/i],[h,[f,Ve],[u,ge]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[f,De],[u,ge]],[/((pebble))app/i],[f,h,[u,Oe]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[f,Ie],[u,Oe]],[/droid.+; (wt63?0{2,3})\)/i],[h,[f,ot],[u,Oe]],[/droid.+; (glass) \d/i],[h,[f,Re],[u,At]],[/(quest( \d| pro)?)/i],[h,[f,Vt],[u,At]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[u,et]],[/(aeobc)\b/i],[h,[f,Ne],[u,et]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[u,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[u,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,v]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[l,[d,Ii+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,l],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[l,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,l],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[l,Be,qt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,Be,qt],[d,ct]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[l,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"macOS"],[l,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[l,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,l],[/\(bb(10);/i],[l,[d,Mt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[l,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[l,[d,Se+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[l,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[l,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[l,[d,Fe+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,"Chrome OS"],l],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,l],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],l],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,l]]},Ge=function(){var t={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return z.call(t.init,[[L,[d,l,Te,u]],[G,[C]],[U,[u,h,f]],[$,[d,l]],[D,[d,l]]]),z.call(t.isIgnore,[[L,[l,Te]],[$,[l]],[D,[l]]]),z.call(t.isIgnoreRgx,[[L,/ ?browser$/i],[D,/ ?os$/i]]),z.call(t.toString,[[L,[d,l]],[G,[C]],[U,[f,h]],[$,[d,l]],[D,[d,l]]]),t}(),Pi=function(t,e){var i=Ge.init[e],n=Ge.isIgnore[e]||0,r=Ge.isIgnoreRgx[e]||0,s=Ge.toString[e]||0;function a(){z.call(this,i)}return a.prototype.getItem=function(){return t},a.prototype.withClientHints=function(){return J?J.getHighEntropyValues(_t).then(function(c){return t.setCH(new $t(c,!1)).parseCH().get()}):t.parseCH().get()},a.prototype.withFeatureCheck=function(){return t.detectFeature().get()},e!=pe&&(a.prototype.is=function(c){var g=!1;for(var o in this)if(this.hasOwnProperty(o)&&!dt(n,o)&&Z(r?ne(r,this[o]):this[o])==Z(r?ne(r,c):c)){if(g=!0,c!=Y)break}else if(c==Y&&g){g=!g;break}return g},a.prototype.toString=function(){var c=ue;for(var g in s)typeof this[s[g]]!==Y&&(c+=(c?" ":ue)+this[s[g]]);return c||Y}),J||(a.prototype.then=function(c){var g=this,o=function(){for(var w in g)g.hasOwnProperty(w)&&(this[w]=g[w])};o.prototype={is:a.prototype.is,toString:a.prototype.toString};var p=new o;return c(p),p}),new a};function $t(t,e){if(t=t||{},z.call(this,_t),e)z.call(this,[[it,lt(t[Q])],[nt,lt(t[mi])],[v,/\?1/.test(t[bi])],[h,Pe(t[Ei])],[fe,Pe(t[Lt])],[rt,Pe(t[Ti])],[C,Pe(t[wi])],[ie,lt(t[yi])],[Me,Pe(t[vi])]]);else for(var i in t)this.hasOwnProperty(i)&&typeof t[i]!==Y&&(this[i]=t[i])}function zt(t,e,i,n){return this.get=function(r){return r?this.data.hasOwnProperty(r)?this.data[r]:void 0:this.data},this.set=function(r,s){return this.data[r]=s,this},this.setCH=function(r){return this.uaCH=r,this},this.detectFeature=function(){if(A&&A.userAgent==this.ua)switch(this.itemType){case L:A.brave&&typeof A.brave.isBrave==Je&&this.set(d,"Brave");break;case U:!this.get(u)&&J&&J[v]&&this.set(u,v),this.get(h)=="Macintosh"&&A&&typeof A.standalone!==Y&&A.maxTouchPoints&&A.maxTouchPoints>2&&this.set(h,"iPad").set(u,S);break;case D:!this.get(d)&&J&&J[fe]&&this.set(d,J[fe]);break;case pe:var r=this.data,s=function(a){return r[a].getItem().detectFeature().get()};this.set(L,s(L)).set(G,s(G)).set(U,s(U)).set($,s($)).set(D,s(D))}return this},this.parseUA=function(){return this.itemType!=pe&&Ut.call(this.data,this.ua,this.rgxMap),this.itemType==L&&this.set(Te,ut(this.get(l))),this},this.parseCH=function(){var r=this.uaCH,s=this.rgxMap;switch(this.itemType){case L:var a=r[nt]||r[it],c;if(a)for(var g in a){var o=ne(/(Google|Microsoft) /,a[g].brand||a[g]),p=a[g].version;!/not.a.brand/i.test(o)&&(!c||/chrom/i.test(c)&&!/chromi/i.test(o))&&(this.set(d,o).set(l,p).set(Te,ut(p)),c=o)}break;case G:var w=r[C];w&&(w&&r[Me]=="64"&&(w+="64"),Ut.call(this.data,w+";",s));break;case U:if(r[v]&&this.set(u,v),r[h]&&this.set(h,r[h]),r[h]=="Xbox"&&this.set(u,ge).set(f,De),r[ie]){var b;if(typeof r[ie]!="string")for(var y=0;!b&&y<r[ie].length;)b=Be(r[ie][y++],Bt);else b=Be(r[ie],Bt);this.set(u,b)}break;case D:var E=r[fe];if(E){var O=r[rt];E==ct&&(O=parseInt(ut(O),10)>=13?"11":"10"),this.set(d,E).set(l,O)}this.get(d)==ct&&r[h]=="Xbox"&&this.set(d,"Xbox").set(l,void 0);break;case pe:var H=this.data,F=function(Xe){return H[Xe].getItem().setCH(r).parseCH().get()};this.set(L,F(L)).set(G,F(G)).set(U,F(U)).set($,F($)).set(D,F(D))}return this},z.call(this,[["itemType",t],["ua",e],["uaCH",n],["rgxMap",i],["data",Pi(this,t)]]),this}function j(t,e,i){if(typeof t===he?(qe(t,!0)?(typeof e===he&&(i=e),e=t):(i=t,e=void 0),t=void 0):typeof t===Ze&&!qe(e,!0)&&(i=e,e=void 0),!(this instanceof j))return new j(t,e,i).getResult();var n=typeof t===Ze?t:A&&A.userAgent?A.userAgent:i&&i[xt]?i[xt]:ue,r=new $t(i,!0),s=e?ki(Gt,e):Gt,a=function(c){return c==pe?function(){return new zt(c,n,s,r).set("ua",n).set(L,this.getBrowser()).set(G,this.getCPU()).set(U,this.getDevice()).set($,this.getEngine()).set(D,this.getOS()).get()}:function(){return new zt(c,n,s[c],r).parseUA().get()}};return z.call(this,[["getBrowser",a(L)],["getCPU",a(G)],["getDevice",a(U)],["getEngine",a($)],["getOS",a(D)],["getResult",a(pe)],["getUA",function(){return n}],["setUA",function(c){return ve(c)&&(n=c.length>tt?Ce(c,tt):c),this}]]).setUA(n),this}j.VERSION=pi,j.BROWSER=Ue([d,l,Te,u]),j.CPU=Ue([C]),j.DEVICE=Ue([h,f,u,ge,v,x,S,Oe,et]),j.ENGINE=j.OS=Ue([d,l]);function ht(t,e,i,n){return new(i||(i=Promise))(function(r,s){function a(o){try{g(n.next(o))}catch(p){s(p)}}function c(o){try{g(n.throw(o))}catch(p){s(p)}}function g(o){var p;o.done?r(o.value):(p=o.value,p instanceof i?p:new i(function(w){w(p)})).then(a,c)}g((n=n.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const Ci=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function jt(t){return t=t.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const Wt=typeof window>"u",q=(()=>{if(Wt)return;const{userAgent:t,platform:e,maxTouchPoints:i}=window.navigator,n=/(iphone|ipod|ipad)/i.test(t),r=e==="iPad"||e==="MacIntel"&&i>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(t)||n||r,isSafari12:/Version\/12.+Safari/.test(t),isFirefox:/Firefox/.test(t)}})();function Ai(t,e,i){if(!i)return[e];const n=function(o){const p=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,w=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,b=o.createShader(35633),y=o.createShader(35632),E=o.createProgram();if(!(y&&b&&E))return;o.shaderSource(b,p),o.shaderSource(y,w),o.compileShader(b),o.compileShader(y),o.attachShader(E,b),o.attachShader(E,y),o.linkProgram(E),o.detachShader(E,b),o.detachShader(E,y),o.deleteShader(b),o.deleteShader(y),o.useProgram(E);const O=o.createBuffer();o.bindBuffer(34962,O),o.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const H=o.getAttribLocation(E,"aPosition");o.vertexAttribPointer(H,3,5126,!1,0,0),o.enableVertexAttribArray(H),o.clearColor(1,1,1,1),o.clear(16384),o.viewport(0,0,1,1),o.drawArrays(4,0,3);const F=new Uint8Array(4);return o.readPixels(0,0,1,1,6408,5121,F),o.deleteProgram(E),o.deleteBuffer(O),F.join("")}(t),r="801621810",s="8016218135",a="80162181161",c=q!=null&&q.isIpad?[["a7",a,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["a15",r,15],["m1",r,15],["m2",r,15]]:[["a7",a,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15],["a15",r,15],["a16",r,15],["a17",r,15]];let g;return n==="80162181255"?g=c.filter(([,,o])=>o>=14):(g=c.filter(([,o])=>o===n),g.length||(g=c)),g.map(([o])=>`apple ${o} gpu`)}class Kt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const gt=[],Xt=[];function xi(t,e){if(t===e)return 0;const i=t;t.length>e.length&&(t=e,e=i);let n=t.length,r=e.length;for(;n>0&&t.charCodeAt(~-n)===e.charCodeAt(~-r);)n--,r--;let s,a=0;for(;a<n&&t.charCodeAt(a)===e.charCodeAt(a);)a++;if(n-=a,r-=a,n===0)return r;let c,g,o=0,p=0,w=0;for(;p<n;)Xt[p]=t.charCodeAt(a+p),gt[p]=++p;for(;w<r;)for(s=e.charCodeAt(a+w),c=w++,o=w,p=0;p<n;p++)g=s===Xt[p]?c:c+1,c=gt[p],o=gt[p]=c>o?g>o?o+1:g:g>c?c+1:g;return o}function Li(t){return t!=null}const _i=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:i={},glContext:n,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@5.0.53/dist/benchmarks"}={})=>ht(void 0,void 0,void 0,function*(){const a={};if(Wt)return{tier:0,type:"SSR"};const{isIpad:c=!!(q!=null&&q.isIpad),isMobile:g=!!(q!=null&&q.isMobile),screenSize:o=window.screen,loadBenchmarks:p=I=>ht(void 0,void 0,void 0,function*(){const P=yield fetch(`${s}/${I}`).then(M=>M.json());if(parseInt(P.shift().split(".")[0],10)<4)throw new Kt("Detect GPU benchmark data is out of date. Please update to version 4x");return P})}=i;let{renderer:w}=i;const b=(I,P,M,N,W)=>({device:W,fps:N,gpu:M,isMobile:g,tier:I,type:P});let y,E="";if(w)w=jt(w),y=[w];else{const I=n||function(M,N=!1){const W={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:N,powerPreference:"high-performance",stencil:!1};M&&delete W.powerPreference;const Ee=window.document.createElement("canvas");return(Ee.getContext("webgl",W)||Ee.getContext("experimental-webgl",W))??void 0}(q?.isSafari12,r);if(!I)return b(0,"WEBGL_UNSUPPORTED");const P=q!=null&&q.isFirefox?null:I.getExtension("WEBGL_debug_renderer_info");if(w=P?I.getParameter(P.UNMASKED_RENDERER_WEBGL):I.getParameter(I.RENDERER),!w)return b(1,"FALLBACK");E=w,w=jt(w),y=function(M,N,W){return N==="apple gpu"?Ai(M,N,W):[N]}(I,w,g)}const O=(yield Promise.all(y.map(function(I){var P;return ht(this,void 0,void 0,function*(){const M=(k=>{const V=g?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const K of V)if(k.includes(K))return K})(I);if(!M)return;const N=`${g?"m":"d"}-${M}${c?"-ipad":""}.json`,W=a[N]=(P=a[N])!==null&&P!==void 0?P:p(N);let Ee;try{Ee=yield W}catch(k){if(k instanceof Kt)throw k;return}const Ye=function(k){var V;const K=(k=k.replace(/\([^)]+\)/,"")).match(/\d+/)||k.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(V=K?.join("").replace(/\W|amd/g,""))!==null&&V!==void 0?V:""}(I);let _e=Ee.filter(([,k])=>k===Ye);_e.length||(_e=Ee.filter(([k])=>k.includes(I)));const li=_e.length;if(li===0)return;const un=I.split(/[.,()\[\]/\s]/g).sort().filter((k,V,K)=>V===0||k!==K[V-1]).join(" ");let It,[hn,,,,gn]=li>1?_e.map(k=>[k,xi(un,k[2])]).sort(([,k],[,V])=>k-V)[0][0]:_e[0],St=Number.MAX_VALUE;const{devicePixelRatio:ui}=window,fn=o.width*ui*o.height*ui;for(const k of gn){const[V,K]=k,wn=V*K,hi=Math.abs(fn-wn);hi<St&&(St=hi,It=k)}if(!It)return;const[,,pn,mn]=It;return[St,pn,hn,mn]})}))).filter(Li).sort(([I=Number.MAX_VALUE,P],[M=Number.MAX_VALUE,N])=>I===M?P-N:I-M);if(!O.length){const I=Ci.find(P=>w.includes(P));return I?b(0,"BLOCKLISTED",I):b(1,"FALLBACK",`${w} (${E})`)}const[,H,F,Xe]=O[0];if(H===-1)return b(0,"BLOCKLISTED",F,H,Xe);const ci=g?t:e;let di=0;for(let I=0;I<ci.length;I++)H>=ci[I]&&(di=I);return b(di,"BENCHMARK",F,H,Xe)}),Oi=[{gpu:"a17",viewports:{"1179x2556":{devicePixelRatios:{3:{models:["iPhone 15 Pro"]}}},"1290x2796":{devicePixelRatios:{3:{models:["iPhone 15 Pro Max"]}}}}},{gpu:"a16",viewports:{"1179x2556":{devicePixelRatios:{3:{models:["iPhone 14 Pro"]}}},"1290x2796":{devicePixelRatios:{3:{models:["iPhone 14 Pro Max"]}}}}},{gpu:"a15",viewports:{"1170x2532":{devicePixelRatios:{3:{models:["iPhone 13","iPhone 13 Pro","iPhone 14"]}}},"1080x2340":{devicePixelRatios:{3:{models:["iPhone 13 mini"]}}},"1284x2778":{devicePixelRatios:{3:{models:["iPhone 13 Pro Max","iPhone 14 Plus"]}}}}},{gpu:"a14",viewports:{"1170x2532":{devicePixelRatios:{3:{models:["iPhone 12","iPhone 12 Pro"]}}},"1080x2340":{devicePixelRatios:{3:{models:["iPhone 12 mini"]}}},"1284x2778":{devicePixelRatios:{3:{models:["iPhone 12 Pro Max"]}}}}},{gpu:"a13",viewports:{"828x1792":{devicePixelRatios:{2:{models:["iPhone 11"]}}},"1125x2436":{devicePixelRatios:{3:{models:["iPhone 11 Pro"]}}},"1242x2688":{devicePixelRatios:{3:{models:["iPhone 11 Pro Max"]}}}}},{gpu:"a12",viewports:{"1125x2436":{devicePixelRatios:{3:{models:["iPhone XS"]}}},"1242x2688":{devicePixelRatios:{3:{models:["iPhone XS Max"]}}},"828x1792":{devicePixelRatios:{2:{models:["iPhone XR"]}}}}},{gpu:"a11",viewports:{"1125x2436":{devicePixelRatios:{3:{models:["iPhone X"]}}},"750x1334":{devicePixelRatios:{2:{models:["iPhone 8"]}}},"1080x1920":{devicePixelRatios:{3:{models:["iPhone 8 Plus"]}}}}}];function ft(t){return t==="session"?sessionStorage:localStorage}function pt(t){return`helium-${t}`}const T={get(t,e="session"){const n=ft(e).getItem(pt(t));try{return n?JSON.parse(n):null}catch{return n}},set(t,e,i="session"){const n=ft(i),r=typeof e=="string"?e:JSON.stringify(e);n.setItem(pt(t),r)},remove(t,e="session"){ft(e).removeItem(pt(t))}},Mi="https://pulse.heliumbuilder.com/api/device-info",mt={async getLocationAndDevice(){const t=T.get("location");if(t)return t;const{device:{model:e}}=await mt.getOs(),i=await fetch(Mi+"?model="+e).then(r=>r.json()),n={...i,isp:mt.resolveISP(i.isp),ip:i.ip??""};return T.set("location",n),n},async getOs(){var s;const t=T.get("os");if(t)return t;const e=await j(navigator.userAgent).withClientHints(),i=await _i();if(((s=e.device.vendor)==null?void 0:s.toLowerCase())!=="apple"||!i.gpu)return T.set("os",e),e;if(e.device.model==="Macintosh")return e.device.model=i.gpu.toLowerCase().replace("gpu","")||"",T.set("os",e),e;if((e.device.model||"").toLowerCase()!=="iphone")return T.set("os",e),e;const n=`${window.innerWidth*window.devicePixelRatio}x${window.innerHeight*window.devicePixelRatio}`,r=window.devicePixelRatio;for(const a of Oi){if(!i.gpu.toLowerCase().includes(a.gpu))continue;const c=Object.keys(a.viewports)[0];e.device.model=a.viewports[c].devicePixelRatios[3].models[0];const g=a.viewports[n];if(!g)continue;const o=g.devicePixelRatios[r];o&&(e.device.model=o.models[0])}return T.set("os",e),e},getBrowser(){},getLanguage(){return{primary:navigator.language,secondary:navigator.languages?navigator.languages.slice(1):[]}},async getBattery(){if(navigator!=null&&navigator.getBattery){const t=await navigator.getBattery();return{level:t.level*100,charging:t.charging}}},getNetwork(){if(navigator!=null&&navigator.connection)return{type:navigator.connection.type,effectiveType:navigator.connection.effectiveType}},resolveISP(t){if(!t)return t;const e=["Airtel","Jio","BSNL","ACT Fibernet","Tata Play Fiber"];for(const i of e)if(t.toLowerCase().includes(i.toLowerCase()))return i;return t}},Yt={getProductCurrentHandle(){const t=window.location.pathname.split("?")[0];let e="";if(t.includes("/products/")){const i=t.split("/products/");i.length>1&&(e=i[1].split("/")[0])}return e.split("#").at(0)},getCurrent(){const t=window.location.pathname;let e="other",i="";if(t.includes("/products/")){e="product";const n=t.split("/products/");n.length>1&&(i=n[1].split("/")[0])}else if(t.includes("/collections/")){e="collection";const n=t.split("/collections/");n.length>1&&(i=n[1].split("/")[0])}else t.includes("/cart")?e="cart":t==="/"&&(e="home");return{pageType:e,handle:i,path:t,referrer:document.referrer}},getLandingInfo(){const t=T.get("landing_info");if(t)return t;const e=Yt.getCurrent();return T.set("landing_info",e),e}},_={page:Yt,device:mt,source:{getUTM(){const t=T.get("utm");if(t)return t;const e=new URLSearchParams(window.location.search),i={utmSource:e.get("utm_source")||"",utmMedium:e.get("utm_medium")||"",utmCampaign:e.get("utm_campaign")||"",utmContent:e.get("utm_content")||"",utmTerm:e.get("utm_term")||"",utmId:e.get("utm_id")||"",...Object.fromEntries(Array.from(e.entries()).filter(([n])=>n.startsWith("utm_")))};return T.set("utm",i),i}},trackingIds:Qe.getInstance()},se=class se2{constructor(e,i){m(this,"queue",[]),m(this,"endpoint"),m(this,"flushInterval"),m(this,"intervalManager",R.getInstance()),m(this,"deduplicationTimeFrame",250),this.endpoint=e,this.flushInterval=i,this.setupAutoFlush()}static getInstance(){return se2.instance||(se2.instance=new se2(te,gi)),se2.instance}setupAutoFlush(){this.intervalManager.setInterval("helium_pixel_flush",()=>this.flushQueue(),this.flushInterval)}generateEventSignature(e){const i=[e.type,e.entityId,e.entityName,e.entityType,e.parentEntityId,e.parentEntityName,e.parentEntityType,window.helium.sessionToken,window.helium.userToken];return btoa(i.filter(n=>typeof n=="string"&&n.trim()!=="").join("-")).replace(/=/g,"")}async setupCartAttributes(){return fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attributes:{_helium_session:window.helium.sessionToken,_helium_user:window.helium.userToken}})}).then(e=>e.json()).then(e=>{console.log("Cart attributes updated:",e)}).catch(e=>{console.error("Error updating cart attributes:",e)})}getDefaultProps(){var i,n;const e=_.page.getCurrent();return{time:new Date().toISOString(),userId:window.helium.userToken,sessionId:window.helium.sessionToken,brand:((i=window.helium.brandData)==null?void 0:i.storeId)||((n=window.helium.brandData)==null?void 0:n.orgId),pagePath:e.path,...e}}isDuplicateEventWithinTimeFrame(e){if(this.queue.length===0)return!1;const i=this.queue[this.queue.length-1],n=new Date(i.time).getTime(),r=new Date().getTime();return e===i._clientSignature&&r-n<this.deduplicationTimeFrame}track(e){const i=this.generateEventSignature(e);if(this.isDuplicateEventWithinTimeFrame(i))return;const r={...this.getDefaultProps(),type:e.type,entityId:e.entityId,entityName:e.entityName,entityType:e.entityType,parentEntityId:e.parentEntityId,parentEntityName:e.parentEntityName,parentEntityType:e.parentEntityType,featureProvider:e.featureProvider||"helium",eventData:e.eventData,_clientSignature:i};this.queue.push(r)}async flushQueue(){if(this.queue.length===0)return;const e=[...this.queue];this.queue=[];const i=e.map(({_clientSignature:n,...r})=>r);try{const n=await fetch(this.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:i})});n.ok||(console.error("Failed to send events, server responded with an error:",n.status,await n.text()),this.queue=[...e,...this.queue])}catch(n){this.queue=[...e,...this.queue],console.error("Failed to send events due to network error:",n)}}generateTokens(){const e=localStorage.getItem("userToken")||window.crypto.randomUUID(),i=sessionStorage.getItem("sessionToken")||window.crypto.randomUUID();typeof window<"u"&&(window.helium={...window.helium,userToken:e,sessionToken:i}),sessionStorage.setItem("sessionToken",i),localStorage.setItem("userToken",e)}async load(){this.generateTokens(),this.track({type:"load",entityId:window.location.pathname,entityName:"script",featureProvider:"native"}),await this.flushQueue(),this.setupCartAttributes()}getQueueCount(){return this.queue.length}};m(se,"instance");let re=se;window.h_pixel=re;function wt(t){var y,E;const{entityId:e,entityName:i,entityType:n,eventData:r}=t.dataset,s=(E=(y=t.parentElement)==null?void 0:y.closest)==null?void 0:E.call(y,"[data-entity-name]"),{entityId:a,entityName:c,entityType:g,eventData:o}=s?.dataset??{};let p={},w={};try{p=r?JSON.parse(r):{},w=o?JSON.parse(o):{}}catch{}const b={data:{...p,...w},entityId:e,entityName:i,entityType:n,parentEntityId:a,parentEntityName:c,parentEntityType:g};return Object.keys(b.data).length===0&&delete b.data,b}const Ni=["section","page","product"];function ye(t){return Ni.includes(t)}function Ri(t){return""}function Di(t){const e=t.dataset.hEventName??void 0,i=t.dataset.hId??Ri();let n={};try{n=JSON.parse(t.dataset.hEventData??"{}")}catch(r){console.error("Failed to parse hEventData",r,t.dataset.hEventData)}return{id:i,name:e,data:n}}function $e(t){const e=t.getBoundingClientRect(),i=e.top+e.height/2,n=window.scrollY,r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),a=(i+n)/r*100;return Math.min(Math.max(a,0),100)}const Qt="click_count";class Hi{constructor(){m(this,"pixel",re.getInstance()),this.initClickListener()}getClickCount(){return T.get(Qt,"session")||0}initClickListener(){window.addEventListener("click",e=>{const i=this.getClickCount();T.set(Qt,i+1,"session");const n=e.target,r=n.closest("[data-h-event-name]"),s=wt(n),a=r?wt(r):null;let c=s.entityId,g=s.entityName,o=s.entityType,p={...s.data||{},pageDepthPercentage:$e(n)},w=s.parentEntityId,b=s.parentEntityName,y=s.parentEntityType;a&&r!==n&&(w=s.entityId,b=s.entityName,y=s.entityType,c=a.entityId,g=a.entityName,o=a.entityType,p={...a.data||{},...s.data||{},pageDepthPercentage:$e(r)},a.parentEntityId&&(w=a.parentEntityId,b=a.parentEntityName,y=a.parentEntityType));const E={type:"click",entityId:c,entityName:g,entityType:ye(o)?o:void 0,parentEntityId:w,parentEntityName:b,parentEntityType:ye(y)?y:void 0,eventData:p};this.pixel.track(E)})}cleanup(){}}function Vi(t,e=300){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(this,n)},e)}}const Fi=300;class Ui{constructor(){m(this,"mutationObserver",null),m(this,"callbacks",[])}handleMutation(){try{this.callbacks.forEach(e=>e())}catch(e){console.error("Error in MutationObserver callback for element marking:",e)}}track(e){this.callbacks.push(e)}init(){if(this.mutationObserver)return;const e=Vi(this.handleMutation.bind(this),Fi);this.mutationObserver=new MutationObserver(()=>{e()}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})}disconnect(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}}class qi{constructor(){m(this,"elementVisibilityData",new WeakMap),m(this,"activelyObservedElements",new Set)}getVisibilityInfo(e){return this.elementVisibilityData.get(e)}updateVisibilityInfo(e,i){this.elementVisibilityData.set(e,i)}createInitialVisibilityInfo(e,i,n,r,s){const a=wt(e);return{uniqueId:i,startTimeEpochMs:null,totalVisibleDurationMs:0,impressionFired:!1,viewEventFired:!1,viewEventTimerId:null,baseComponentType:n,baseEventData:r,baseFeatureProvider:s??"helium",entityId:a.entityId,entityName:a.entityName,entityType:a.entityType,parentEntityId:a.parentEntityId,parentEntityName:a.parentEntityName,parentEntityType:a.parentEntityType}}initializeElement(e,i){this.elementVisibilityData.set(e,i),this.activelyObservedElements.add(e)}removeElement(e){const i=this.elementVisibilityData.get(e);return this.elementVisibilityData.delete(e),this.activelyObservedElements.delete(e),i}isActive(e){return this.activelyObservedElements.has(e)}getActiveElements(){return this.activelyObservedElements}clearAllActiveElements(){this.activelyObservedElements.clear()}hasVisibilityInfo(e){return this.elementVisibilityData.has(e)}}function Bi(){try{const t=performance.getEntriesByType("navigation")[0],e=performance.getEntriesByType("paint"),i=performance.getEntriesByType("resource"),n=e.find(c=>c.name==="first-paint"),r=e.find(c=>c.name==="first-contentful-paint"),s=i.reduce((c,g)=>{if(!g.initiatorType)return c;const o=g.initiatorType||"other";return c[o]||(c[o]={count:0,totalDuration:0}),c[o].count+=1,c[o].totalDuration+=g.duration,c},{}),a=i.reduce((c,g)=>g.transferSize&&g.transferSize>c.transferSize?g:c,{transferSize:0});return{timeToFirstByte:t.responseStart-t.requestStart,domContentLoaded:t.domContentLoadedEventEnd-t.startTime,loadTime:t.loadEventEnd-t.startTime,domInteractive:t.domInteractive-t.startTime,timeToInteractive:t.domInteractive-t.responseEnd,firstPaint:n?.startTime??null,firstContentfulPaint:r?.startTime??null,largestResource:{name:a.name,transferSize:a?.transferSize,duration:a.duration},totalResources:i.length,resourcesByType:s}}catch{return{}}}const ze="add_to_cart_count",oe=class oe2{constructor(){m(this,"originalFetch"),m(this,"pixel"),this.pixel=re.getInstance(),this.originalFetch=window.fetch.bind(window),this.setupFetchInterceptor()}getAddToCartCount(){return T.get(ze,"session")||0}static getInstance(){return oe2.instance||(oe2.instance=new oe2),oe2.instance}setupFetchInterceptor(){window.fetch=async(e,i)=>{const n=await this.originalFetch(e,i),r=e instanceof URL?e.href:e instanceof Request?e.url:e;if(this.isCartRequest(r)){const s=n.clone();try{const a=await s.json();this.handleCartResponse(r,a,i)}catch(a){console.error("Error processing cart response:",a)}}return n}}isCartRequest(e){return e.includes("/cart/add")||e.includes("/cart/update")||e.includes("/cart/clear")||e.includes("/cart/change")}async getCurrentCart(){const i=await(await fetch("/cart.js")).json();return{token:i.token,totalPrice:i.total_price/100,totalDiscount:i.total_discount/100,totalQuantity:i.item_count,requiredShipping:i.requires_shipping,subtotalPrice:i.items_subtotal_price/100,items:i.items.map(r=>({id:r.id,handle:r.handle,title:r.title,quantity:r.quantity,price:r.final_line_price/100,variantTitle:r.variant_title,variantId:r.variant_id,productId:r.product_id}))}}handleCartResponse(e,i,n){n?.method;let r=null;n!=null&&n.body&&(n.body instanceof FormData?r=Object.fromEntries(n.body.entries()):r=JSON.parse(n.body)),e.includes("/cart/add")?this.trackAddToCart(i,r):e.includes("/cart/change")?this.trackCartQuantityUpdate(i,r):e.includes("/cart/update")&&this.trackCartUpdate(i,r)}async trackAddToCart(e,i){const n=this.getAddToCartCount();T.set(ze,n+1,"session");const r=await this.getCurrentCart();this.pixel.track({type:"add_to_cart",entityName:"cart",eventData:{change:{productHandle:e.handle,variantId:e.variant_id,quantity:e.quantity},cart:r}})}async trackCartQuantityUpdate(e,i){const n=e.items_added,r=e.items_removed,s=await this.getCurrentCart();if(n.length===0&&r.length===0)return;const a=n.length>0?n[0]:r[0],c=this.getAddToCartCount();T.set(ze,c+1,"session"),this.pixel.track({type:n.length>0?"cart_quantity_add":"cart_quantity_remove",entityName:"cart",eventData:{change:{variantId:a.variant_id,productId:a.product_id,handle:a.url.split("/").pop().split("?")[0],quantity:a.quantity,cartTotal:e?.total_price/100,cartItemCount:e?.item_count},cart:s}})}async trackCartUpdate(e,i){const n=await this.getCurrentCart(),r=this.getAddToCartCount();T.set(ze,r+1,"session"),this.pixel.track({type:"cart_update",entityName:"cart",eventData:{change:{cartTotal:e?.total_price,cartItemCount:e?.item_count,updates:i},cart:n}})}disconnect(){window.fetch=this.originalFetch}};m(oe,"instance");let Ae=oe;const Gi={getScore(t){const e=this.getCityTierScore(t.cityTier??"Tier 2"),i=this.getDeviceTierScore(t.deviceTier??3),n=this.getDeviceRecencyScore(t.deviceRecency??3),r=e*.5+i*.25+n*.25;return Math.round(r)},getCityTierScore(t){return(6-parseInt(t.split(" ")[1]))*20},getDeviceTierScore(t){return t*20},getDeviceRecencyScore(t){return t*20}},vt={timeSpent:{low:1e3*30,medium:1e3*60*3,high:1e3*60*5},pageVisits:{low:1,medium:3,high:5},addToCart:{low:1,medium:2,high:3}},je={timeSpent:.1,pageVisits:.25,addToCart:.45,landingPageType:.2},Jt={person:Gi,intent:{getScore(){const t=this.getTimeSpentScore(),e=this.getPageVisitsScore(),i=this.getAddToCartScore(),n=this.getLandingPageScore(),r=t*je.timeSpent+e*je.pageVisits+i*je.addToCart+n*je.landingPageType;return Math.round(r)},getTimeSpentScore(){const t=xe.getInstance(),e=Date.now()-t.getLandingTimestamp();return this.calculateLinearScore(e,vt.timeSpent)},getPageVisitsScore(){const e=xe.getInstance().getPageVisitCount();return this.calculateLinearScore(e,vt.pageVisits)},getAddToCartScore(){const e=Ae.getInstance().getAddToCartCount();return this.calculateLinearScore(e,vt.addToCart)},getLandingPageScore(){return _.page.getLandingInfo().pageType==="product"?100:0},calculateLinearScore(t,e){return t<=e.low?t/e.low*33:t<=e.medium?33+(t-e.low)/(e.medium-e.low)*33:t<=e.high?66+(t-e.medium)/(e.high-e.medium)*33:100}}};class $i{static track(e,i){window.fbq&&window.fbq("track",e,i)}}const Zt={fb:$i};class zi{static track(e,i,n){e.forEach(r=>{Zt[r]&&Zt[r].track("helium_impulse",n)})}}const be=class be2{constructor(e=zi){var i;if(this.externalPixels=e,!((i=window.impulseLiteFlags)!=null&&i.externalConnectors)){window.impulseLiteFlags||(window.impulseLiteFlags={}),window.impulseLiteFlags.externalConnectors={enabled:!1,providers:[],eventTypes:[]};return}}static getInstance(){return be2.instance||(be2.instance=new be2),this.instance}getExternalConnectors(){var e,i;return((i=(e=window.impulseLiteFlags)==null?void 0:e.externalConnectors)==null?void 0:i.providers)??[]}flush(e,i){window.impulseLiteFlags.externalConnectors.enabled&&this.externalPixels.track(this.getExternalConnectors(),e,i)}};m(be,"instance");let yt=be;const We="landing_timestamp",ei="visited_pages",bt="session_ids";function ji(t){const e=t.split("/");return e.length>1?e[1]:"unknown"}const ce=class ce2{constructor(e=re.getInstance(),i=Ae.getInstance(),n=yt.getInstance()){m(this,"eventListeners",new Map),this.pixel=e,this.cartHandler=i,this.externalConnectors=n,this.setupVisibilityChange(),this.setupPageViewTracking(),this.setupPageSpeedTracking(),this.setupSessionTracking(),this.setupVisitCount(),this.triggerEvent("loaded")}static getInstance(){return ce2.instance||(ce2.instance=new ce2),ce2.instance}addEventListener(e,i){this.eventListeners.has(e)||this.eventListeners.set(e,[]);const n=this.eventListeners.get(e);n&&n.push(i)}setupPageSpeedTracking(){const e=()=>{this.track({type:"page_speed",entityId:window.location.pathname,entityName:"page",featureProvider:"helium",eventData:{pageSpeed:Bi()}})};this.addEventListener("loaded",()=>{document.readyState==="complete"?e():window.addEventListener("load",e,{once:!0})})}setupSessionTracking(){const e=async(i=!1)=>{T.get(We,"session")||T.set(We,Date.now(),"session");const[n,r,s,a,c]=await Promise.all([_.device.getBattery().catch(()=>null),_.device.getLocationAndDevice().catch(()=>null),_.device.getOs().catch(()=>null),this.cartHandler.getCurrentCart().catch(()=>null),_.trackingIds.getAllIds().catch(()=>null)]),g=_.device.getBrowser(),o=_.page.getLandingInfo(),p=_.device.getLanguage(),w=_.device.getNetwork(),b=_.source.getUTM(),{deviceModel:y,ip:E}=r??{deviceModel:null,ip:null},O=Jt.person.getScore({cityTier:r?.cityTier,deviceTier:y?.tier,deviceRecency:y?.recency}),H=Jt.intent.getScore();this.track({type:"session",eventData:{personQuality:O,intentQuality:H,visitCount:this.getVisitCount(),battery:n,landingInfo:o,browser:g,userAgent:navigator.userAgent,language:p,...r,device:y,ip:E,network:w,os:s.os,utm:b,cart:a,trackingIds:c}}),i&&this.externalConnectors.flush("session",{personQuality:O,intentQuality:H})};e(),this.addEventListener("loaded",e),this.addEventListener("loaded",()=>{R.getInstance().setInterval("session_tracker",e,1e4)}),window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e(!0)})}setupVisibilityChange(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(this.triggerEvent("dropoff"),this.pixel.flushQueue())})}setupVisitCount(){const e=()=>{const i=T.get(We,"session");if(!i)return;const n=T.get(bt,"persistent")||[],r=Array.from(new Set([...n,i.toString()]));T.set(bt,r,"persistent")};this.addEventListener("loaded",e),this.addEventListener("dropoff",e)}triggerEvent(e){(this.eventListeners.get(e)||[]).forEach(n=>n())}getLandingTimestamp(){return T.get(We,"session")||Date.now()}getVisitedPages(){return T.get(ei,"session")||[]}getPageVisitCount(){return this.getVisitedPages().length}getVisitCount(){return(T.get(bt,"persistent")||[]).length}async getOutOfStockStatus(){var o,p,w,b,y;if(_.page.getCurrent().pageType!=="product")return{};const i=_.page.getProductCurrentHandle(),n=new URLSearchParams(window.location.search).get("variant"),r=await fetch(`/products/${i}.js`).then(E=>E.json()),s=n?!((p=(o=r?.variants)==null?void 0:o.find(E=>+E.id==+n))!=null&&p.available):!((b=(w=r?.variants)==null?void 0:w[0])!=null&&b.available),a=((y=r?.variants)==null?void 0:y.filter(E=>!E.available))??[],c=r?.variants??[];return{isOos:s,totalOosVariants:a?.length??0,oosPercentage:c?.length===0?0:a?.length/c?.length*100,oosVariants:a?.map(E=>E.id)??[]}}setupPageViewTracking(){const e="lastTrackedUrl",i=async()=>{const n=window.location.href,r=window.location.pathname,s=T.get(e,"session");if(n!==s){const a=this.getVisitedPages();a.includes(r)||(a.push(r),T.set(ei,a,"session"));const c=await this.getOutOfStockStatus().catch(()=>({isOos:!1,totalOosVariants:0,oosVariants:[]}));this.pixel.track({type:"view",entityName:ji(n),entityId:n,entityType:"page",eventData:{...c}}),T.set(e,n,"session")}};window.addEventListener("popstate",i),window.addEventListener("pushState",i),window.addEventListener("replaceState",i),window.addEventListener("hashchange",i),this.addEventListener("loaded",i),this.addEventListener("loaded",()=>{R.getInstance().setInterval("page_view_tracker",i,1e4)}),i()}track(e){this.pixel.track(e)}};m(ce,"instance");let xe=ce;class Wi{constructor(e,i,n){m(this,"intersectionObserver"),m(this,"visibilityState"),m(this,"eventManager"),m(this,"viewTrackingLogic"),m(this,"handleIntersectionEntries",e2=>{e2.forEach(i2=>{const n2=i2.target;let r=this.visibilityState.getVisibilityInfo(n2);if(!r){const a=Di(n2);if(!a.id)return;r=this.visibilityState.createInitialVisibilityInfo(n2,a.id,a.name||n2.tagName,a.data||{},void 0),this.visibilityState.initializeElement(n2,r)}const s=Date.now();if(i2.intersectionRatio>=kt)r.startTimeEpochMs===null&&(r.startTimeEpochMs=s,r.impressionFired||(this.eventManager.track({type:"impression",entityId:r.entityId||r.uniqueId,entityName:r.entityName||r.baseComponentType||"unknown_component",entityType:ye(r.entityType)?r.entityType:void 0,parentEntityId:r.parentEntityId,parentEntityName:r.parentEntityName,parentEntityType:ye(r.parentEntityType)?r.parentEntityType:void 0,featureProvider:r.baseFeatureProvider,eventData:{...r.baseEventData||{},pageDepthPercentage:$e(n2)}}),r.impressionFired=!0)),!r.viewEventFired&&r.viewEventTimerId===null&&(r.viewEventTimerId=window.setTimeout(()=>{const a=this.visibilityState.getVisibilityInfo(n2);a&&a.viewEventTimerId===r.viewEventTimerId&&(this.eventManager.track({type:"view",entityId:a.entityId||a.uniqueId,entityName:a.entityName||a.baseComponentType||"section",entityType:ye(a.entityType)?a.entityType:void 0,parentEntityId:a.parentEntityId,parentEntityName:a.parentEntityName,parentEntityType:ye(a.parentEntityType)?a.parentEntityType:void 0,featureProvider:a.baseFeatureProvider,eventData:{...a.baseEventData||{},viewDurationMs:Pt,pageDepthPercentage:$e(n2)}}),a.viewEventFired=!0,a.viewEventTimerId=null,this.visibilityState.updateVisibilityInfo(n2,a))},Pt)),this.visibilityState.updateVisibilityInfo(n2,{...r});else{if(r.startTimeEpochMs!==null){const a=s-r.startTimeEpochMs;r.totalVisibleDurationMs+=a,this.viewTrackingLogic.trackViewTime(n2,r,"left_view_threshold",s),r.startTimeEpochMs=null}r.viewEventTimerId!==null&&(clearTimeout(r.viewEventTimerId),r.viewEventTimerId=null),this.visibilityState.updateVisibilityInfo(n2,{...r})}})}),this.visibilityState=e,this.eventManager=i,this.viewTrackingLogic=n,this.intersectionObserver=new IntersectionObserver(this.handleIntersectionEntries.bind(this),{threshold:kt})}observe(e){this.intersectionObserver.observe(e)}unobserve(e){this.intersectionObserver.unobserve(e)}disconnect(){this.intersectionObserver.disconnect()}}const ti="helium_observer_duration_logging";class Ki{constructor(e,i){m(this,"intervalManager",R.getInstance()),m(this,"visibilityState"),m(this,"viewTrackingLogic"),this.visibilityState=e,this.viewTrackingLogic=i}start(){this.intervalManager.setInterval(ti,()=>this.logAllActiveViewTimes(),fi)}logAllActiveViewTimes(){const e=Date.now();this.visibilityState.getActiveElements().forEach(i=>{const n=this.visibilityState.getVisibilityInfo(i);n&&n.startTimeEpochMs!==null&&this.viewTrackingLogic.trackViewTime(i,n,"periodic_update",e)})}stop(){this.intervalManager.clearInterval(ti)}}class Xi{constructor(e,i){m(this,"eventManager"),m(this,"visibilityState"),this.eventManager=e,this.visibilityState=i}trackViewTime(e,i,n,r){const s=r||Date.now();let a=i.totalVisibleDurationMs,c=0;if(i.startTimeEpochMs!==null&&(c=s-i.startTimeEpochMs,a+=c),(a>0||n!=="periodic_update")&&{...i.baseEventData||{},elementId:i.uniqueId,componentType:i.baseComponentType},n==="periodic_update"&&i.startTimeEpochMs!==null){const g={...i,totalVisibleDurationMs:a,startTimeEpochMs:s};this.visibilityState.updateVisibilityInfo(e,g)}}}function Yi(){const t=window.location.pathname,e=t.match(/^\/products\/([^/?#]+)/);if(e!=null&&e[1])return{path:t,pageType:"product",resourceHandle:e[1]};const i=t.match(/^\/collections\/([^/?#]+)/);return i!=null&&i[1]?{path:t,pageType:"collection",resourceHandle:i[1]}:{path:t,pageType:"other"}}function Qi(t){if(!(t!=null&&t.parentElement))return-1;const e=t.parentElement,n=Array.from(e.children).indexOf(t);return n!==-1?n+1:-1}function ii(t){return Ji(t).slice(0,255)}function Ji(t){var a,c,g;if(t.tagName==="A")return t.href;if(t.tagName==="IMG")return t.src;if(t.dataset.hId)return`[data-h-id="${t.dataset.hId}"]`;if(t.dataset.entityId)return`[data-entity-id="${t.dataset.entityId}"]`;if(t.id)return`#${t.id}`;if(t.dataset.heliumProductHandle)return`product-${t.dataset.heliumProductHandle}`;if(t.dataset.heliumName&&t.dataset.heliumName==="product-item"){const o=t.querySelector('a[href*="/products/"]');return o?`product-${(g=(c=(a=o.href)==null?void 0:a.split)==null?void 0:c.call(a,"/products/"))==null?void 0:g[1]}`:""}const e=t.closest("[id]"),i=t.className.split(" "),n=e!=null&&e.id?`#${e?.id}`:"body",r=Qi(t);let s=`${n} ${t.tagName.toLowerCase()}.${i.join(".")}`;if(r>1&&(s=`${n} ${t.tagName.toLowerCase()}.${i.join(".")}:nth-of-type(${r})`),s.length>255){const o=255-n.length-t.tagName.length-3;let p="";for(const w of i){if(p.length+w.length+1>o)break;p+=(p?".":"")+w}s=`${n} ${t.tagName.toLowerCase()}.${p}`,r>1&&(s+=`:nth-of-type(${r})`)}return s}function Le(t,e,i,n){t.dataset.entityType=t.dataset.entityType??e,t.dataset.entityId=t.dataset.entityId??i,n&&(t.dataset.entityName=t.dataset.entityName??n),t.dataset.markedSection="true"}const Zi=.15,en=1,tn=["H1","H2","H3","H4","H5","H6"],nn=["IMG","VIDEO","PICTURE","IFRAME"],ni=["LI","A"];function ri(t){return t.hasAttribute("data-marked-section")}function Ke(t){t.removeAttribute("data-marked-section")}function ai(t){let e=!1;return t instanceof HTMLElement&&(e=t.style.cursor==="pointer"),t.tagName==="BUTTON"||t.tagName==="A"||t.hasAttribute("onclick")||t.getAttribute("role")==="button"||e}function rn(t){if(t.length===0)return!1;const e=t.map(r=>r.getBoundingClientRect().width),i=e.reduce((r,s)=>r+s,0)/e.length;return i===0?e.every(r=>r===0):e.filter(r=>Math.abs(r-i)/i<Zi).length/e.length>=.7}function ee(t,e="section"){if(!(t instanceof HTMLElement))return;const i=ii(t),n=t.dataset.entityName||t.dataset.heliumName||`${e}-${t.tagName.toLowerCase()}`;Le(t,e,i,n)}function an(t){Array.from(t.querySelectorAll("a, button")).forEach(i=>{i instanceof HTMLElement&&ee(i,"section")})}function sn(t){if(!(t instanceof HTMLElement))return!1;if(ai(t)||tn.includes(t.tagName)||t.tagName==="IMG"||((t.tagName==="UL"||t.tagName==="OL")&&(ee(t),Array.from(t.children).filter(n=>n.tagName==="LI").forEach(n=>{ee(n)})),nn.includes(t.tagName)&&!t.closest("section")))return ee(t),!0;const e=Array.from(t.children).filter(i=>!(i instanceof Element)||i.getBoundingClientRect().width<=10?!1:i instanceof HTMLElement?i.offsetParent!==null:!0);return e.length>=en&&rn(e)&&e.forEach(i=>{i instanceof HTMLElement&&(ee(i),an(i))}),!1}function si(t){if(!(t instanceof HTMLElement))return;const e=window.getComputedStyle(t);if(!(t.clientWidth<5||t.clientHeight<5)){if(e.position==="fixed"){t.querySelectorAll('[data-marked-section="true"]').forEach(r=>{Ke(r)});return}if(ni.includes(t.tagName)){ee(t),t.querySelectorAll('[data-marked-section="true"]').forEach(r=>{Ke(r)});return}sn(t)||ai(t)||Array.from(t.children).forEach(n=>si(n))}}function on(){Array.from(document.querySelectorAll('[data-marked-section="true"]')).forEach(e=>{if(!ri(e))return;const i=e.parentElement;i&&ri(i)&&i instanceof HTMLElement&&(ni.includes(i.tagName)?Ke(e):Ke(i))})}function oi(){return document.body?(si(document.body),on(),Array.from(document.querySelectorAll("[data-marked-section]"))):[]}function cn(){const t=Yi(),e=document.body;if(!e)return;let i="page",n,r="";const s=t.path.replace(/^\//,"").replace(/\//g,"-")||"home";switch(t.pageType){case"product":i="page",n=`product-${t.resourceHandle}`,r="product";break;case"collection":i="page",n=`collection-${t.resourceHandle}`,r="collection";break;default:const a=window.location.pathname.split("/")[1];i="page",n=`${a}-${s}`,r=a;break}return window.location.pathname.length<2&&(i="page",n="home-page",r="home"),Le(e,i,n,r),e}function dn(){const t=[];return document.querySelectorAll('li, [data-helium-name="product-item"]').forEach(i=>{if(i.dataset.heliumName||i.dataset.entityType==="product")return;const n=i.querySelector('a[href*="/products/"]');if(n!=null&&n.href){const r=n.href.match(/\/products\/([^/?#]+)/);if(r!=null&&r[1]){const a=`product-${r[1]}`;Le(i,"product-card",a,"product-card"),t.push(i)}}}),t}function ln(){const t=[];return document.querySelectorAll("[data-helium-name]").forEach(i=>{const n=i.dataset.heliumName;if(!n)return;const r=n;if(r==="product-item"){const s=`${r}-${i.dataset.heliumProductHandle}`,a=i.dataset.heliumName||`${r}-${i.tagName.toLowerCase()}`;Le(i,r,s,a);return}else{const s=i.dataset.heliumId||`${r}-${ii(i)}`,a=i.dataset.heliumName??`${r}-${i.tagName.toLowerCase()}`;Le(i,r,s,a)}t.push(i)}),t}const de=class de2{constructor(){m(this,"eventManager"),m(this,"visibilityState"),m(this,"viewTrackingLogic"),m(this,"intersectionHandler"),m(this,"periodicLogger"),m(this,"clickHandler",null),m(this,"viewMutationHandler",null),m(this,"cartHandler",null),this.eventManager=xe.getInstance(),this.visibilityState=new qi,this.viewTrackingLogic=new Xi(this.eventManager,this.visibilityState),this.intersectionHandler=new Wi(this.visibilityState,this.eventManager,this.viewTrackingLogic),this.periodicLogger=new Ki(this.visibilityState,this.viewTrackingLogic),this.viewMutationHandler=new Ui,this.cartHandler=Ae.getInstance(),this.periodicLogger.start()}static getInstance(){return de2.instance||(de2.instance=new de2),de2.instance}reload(){const e=oi().filter(i=>!this._elementAlreadyTracked(i));this.observeElements(e)}load(e={}){this.clickHandler||(this.clickHandler=new Hi);try{cn();const i=oi();this.observeElements(i);const n=dn();this.observeElements(n);const r=ln();this.observeElements(r)}catch(i){console.error("Error during initial element marking and tracking in load:",i)}this.viewMutationHandler.init(),this.viewMutationHandler.track(()=>this.reload())}observeElements(e){e.forEach(i=>{this.addViewListener(i,{componentType:"section",eventData:{},featureProvider:"helium"})})}_elementAlreadyTracked(e){return e.dataset.hViewListenerAdded==="true"}addViewListener(e,i){const n=e.dataset.hId||`temp-${Date.now()}-${Math.random().toString(16).slice(2)}`;e.dataset.hId||(e.dataset.hId=n);const r=this.visibilityState.createInitialVisibilityInfo(e,n,i.componentType,i.eventData,i.featureProvider);this.visibilityState.initializeElement(e,r),e.setAttribute("data-h-component-type",i.componentType),i.featureProvider&&e.setAttribute("data-h-feature-provider",i.featureProvider);try{e.setAttribute("data-h-event-data",JSON.stringify(i.eventData))}catch(s){console.error("Failed to stringify eventData for view listener:",i.eventData,s),e.setAttribute("data-h-event-data","{}")}this.intersectionHandler.observe(e),e.dataset.hViewListenerAdded="true"}removeViewListener(e){this.intersectionHandler.unobserve(e);const i=this.visibilityState.getVisibilityInfo(e);i&&((i.startTimeEpochMs!==null||i.totalVisibleDurationMs>0)&&this.viewTrackingLogic.trackViewTime(e,i,"unobserved"),i.viewEventTimerId!==null&&clearTimeout(i.viewEventTimerId)),this.visibilityState.removeElement(e)}disconnect(){this.intersectionHandler&&this.intersectionHandler.disconnect(),this.periodicLogger&&this.periodicLogger.stop(),this.viewMutationHandler&&this.viewMutationHandler.disconnect(),this.cartHandler&&this.cartHandler.disconnect();const e=Date.now();this.visibilityState.getActiveElements().forEach(i=>{const n=this.visibilityState.getVisibilityInfo(i);n&&((n.startTimeEpochMs!==null||n.totalVisibleDurationMs>0)&&this.viewTrackingLogic.trackViewTime(i,n,"disconnected",e),n.viewEventTimerId!==null&&clearTimeout(n.viewEventTimerId))}),this.visibilityState.clearAllActiveElements()}};m(de,"instance");let Et=de;const le=class le2{constructor(){m(this,"pixel",re.getInstance()),m(this,"observer",Et.getInstance()),m(this,"isInitialized",!1),this.initialize()}static getInstance(){return le2.instance||(le2.instance=new le2),le2.instance}async initialize(){if(!this.isInitialized){this.isInitialized=!0,this.pixel.load().catch(e=>console.error("Failed to load Helium Pixel",e)).finally(()=>console.info("Helium Pixel loaded"));try{this.observer.load()}catch(e){console.error("Error during element marking:",e)}}}};m(le,"instance");let Tt=le;window.ImpulseLite=Tt.getInstance()})();
//# sourceMappingURL=/s/files/1/0795/9858/4101/files/impulse.js.map
